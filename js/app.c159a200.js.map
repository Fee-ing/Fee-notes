{"version":3,"file":"js/app.c159a200.js","mappings":"4qBA+DA,MAAMA,WAAa,CACjB,CACEC,KAAM,SACNC,MAAO,KACPC,SAAU,CACR,CACEC,MAAO,MACPC,MAAO,qCAET,CACED,MAAO,iCACPC,MAAO,2CAET,CACED,MAAO,SACPC,MAAO,qBAET,CACED,MAAO,OACPC,MAAO,WAET,CACED,MAAO,OACPC,MAAO,yJAET,CACED,MAAO,UACPC,MAAO,sEAET,CACED,MAAO,KACPC,MAAO,2GAET,CACED,MAAO,KACPC,MAAO,sFAET,CACED,MAAO,wBACPC,MAAO,kCAET,CACED,MAAO,qBACPC,MAAO,sEAET,CACED,MAAO,SACPC,MAAO,mCAET,CACED,MAAO,SACPC,MAAO,yEAIb,CACEJ,KAAM,SACNC,MAAO,OACPC,SAAU,CACR,CACEC,MAAO,KACPC,MAAO,cAET,CACED,MAAO,OACPC,MAAO,cAET,CACED,MAAO,UACPC,MAAO,gBAET,CACED,MAAO,YACPC,MAAO,eAET,CACED,MAAO,gBACPC,MAAO,4BAET,CACED,MAAO,WACPC,MAAO,0BAET,CACED,MAAO,YACPC,MAAO,0BAET,CACED,MAAO,SACPC,MAAO,iBAET,CACED,MAAO,SACPC,MAAO,kBAET,CACED,MAAO,OACPC,MAAO,oBAET,CACED,MAAO,OACPC,MAAO,YAET,CACED,MAAO,MACPC,MAAO,wBAET,CACED,MAAO,OACPC,MAAO,sCAET,CACED,MAAO,OACPC,MAAO,yCAET,CACED,MAAO,QACPC,MAAO,oCAET,CACED,MAAO,QACPC,MAAO,sBAIb,CACEJ,KAAM,YACNC,MAAO,OACPC,SAAU,CACR,CACEC,MAAO,OACPC,MAAO,yBAET,CACED,MAAO,YACPC,MAAO,eAET,CACED,MAAO,cACPC,MAAO,cAET,CACED,MAAO,aACPC,MAAO,kBAET,CACED,MAAO,iBACPC,MAAO,eAMTC,MAAOC,EAAAA,iCAAAA,IAAI,CAAEC,MAAO,GAAIC,OAAQ,GAAIC,KAAM,KAE1CC,YAAaJ,EAAAA,iCAAAA,IAAI,IAEjBK,QAASC,EAAAA,iCAAAA,KAAS,KACtB,MAAM,MAAEL,OAA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,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,IACnB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,IAAK,GAAI,EAAG,IAAK,IACrB,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,IACnB,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,IACnB,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,IAAK,GAAI,EAAG,IAAK,IACrB,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,IACnB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,IACnB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,KACV,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,EAAG,GAAI,IACpB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IACpB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,IACrB,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,KACvB,CAAC,GAAI,GAAI,GAAI,EA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","sources":["webpack://fee-notes/./src/pages/RegexpPage.vue","webpack://fee-notes/./src/App.vue","webpack://fee-notes/./src/components/NavComp.vue","webpack://fee-notes/./src/components/NavComp.vue?1717","webpack://fee-notes/./src/App.vue?7ccd","webpack://fee-notes/./src/pages/HomePage.vue","webpack://fee-notes/./src/pages/HomePage.vue?a24f","webpack://fee-notes/./src/pages/PluginsPage.vue","webpack://fee-notes/./src/pages/PluginsPage.vue?de86","webpack://fee-notes/./src/utils/func.js","webpack://fee-notes/./src/pages/TrianglePage.vue","webpack://fee-notes/./src/pages/TrianglePage.vue?3276","webpack://fee-notes/./src/pages/ShadowPage.vue","webpack://fee-notes/./src/pages/ShadowPage.vue?b520","webpack://fee-notes/./src/utils/artqrcode.js","webpack://fee-notes/./src/pages/QrcodePage.vue","webpack://fee-notes/./src/pages/QrcodePage.vue?0d21","webpack://fee-notes/./src/pages/BeautifyPage.vue","webpack://fee-notes/./src/pages/BeautifyPage.vue?273b","webpack://fee-notes/./src/pages/ParseQrcode.vue","webpack://fee-notes/./src/pages/ParseQrcode.vue?8006","webpack://fee-notes/./src/pages/RegexpPage.vue?494e","webpack://fee-notes/./src/pages/TransferPage.vue","webpack://fee-notes/./src/pages/TransferPage.vue?6ae8","webpack://fee-notes/./src/pages/MoviePage.vue","webpack://fee-notes/./src/pages/MoviePage.vue?92a8","webpack://fee-notes/./src/utils/dom-to-image.js","webpack://fee-notes/./src/pages/StitchPage.vue","webpack://fee-notes/./src/pages/StitchPage.vue?9d65","webpack://fee-notes/./src/utils/aes-decryptor.js","webpack://fee-notes/./src/pages/M3u8Page.vue","webpack://fee-notes/./src/pages/M3u8Page.vue?593d","webpack://fee-notes/./src/router.js","webpack://fee-notes/./src/main.js","webpack://fee-notes/./src/utils/mux-mp4.js","webpack://fee-notes/webpack/bootstrap","webpack://fee-notes/webpack/runtime/chunk loaded","webpack://fee-notes/webpack/runtime/compat get default export","webpack://fee-notes/webpack/runtime/define property getters","webpack://fee-notes/webpack/runtime/global","webpack://fee-notes/webpack/runtime/hasOwnProperty shorthand","webpack://fee-notes/webpack/runtime/make namespace object","webpack://fee-notes/webpack/runtime/publicPath","webpack://fee-notes/webpack/runtime/jsonp chunk loading","webpack://fee-notes/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"page-wrapper page-regexp flex\">\n    <el-form class=\"form-wrapper\" label-position=\"top\">\n      <el-form-item label=\"正则表达式\">\n        <el-input\n          v-model=\"form.input\"\n          type=\"textarea\"\n          resize=\"none\"\n          @input=\"regexpExec\"\n        />\n      </el-form-item>\n      <el-form-item label=\"匹配内容\">\n        <div class=\"input-wrapper\" :class=\"[inputClass, regexp ? '' : 'disabled']\">\n          <div class=\"input-content\">\n            <textarea\n              class=\"input-item input\"\n              @input=\"handleInputText\"\n              @focus=\"inputClass = 'focus'\"\n              @blur=\"inputClass = ''\"\n            ></textarea>\n            <pre\n              class=\"input-item result\"\n              contenteditable=\"true\"\n              v-html=\"form.result\"\n            ></pre>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleClear\">清空</el-button>\n      </el-form-item>\n    </el-form>\n    <el-collapse class=\"regexp-wrapper flex-1 over-h\" :model-value=\"['common']\">\n      <el-collapse-item\n        v-for=\"(data, row) in regexpList\"\n        :key=\"row\"\n        :title=\"data.title\"\n        :name=\"data.name\"\n      >\n        <div\n          class=\"regexp-item over-h\"\n          v-for=\"(item, col) in data.children\"\n          :key=\"col\"\n        >\n          <div class=\"item-title flex-v\">\n            <span>{{ item.label }}：</span>\n            <el-icon class=\"item-btn copy-btn\" title=\"复制\" :data-clipboard-text=\"item.value\">\n              <component :is=\"'CopyDocument'\"></component>\n            </el-icon>\n            <el-icon class=\"item-btn\" title=\"填入\" @click=\"handleChoose(item.value)\">\n              <component :is=\"'EditPen'\"></component>\n            </el-icon>\n          </div>\n          <div class=\"item-content\">{{ item.value }}</div>\n        </div>\n      </el-collapse-item>\n    </el-collapse>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst regexpList = [\n  {\n    name: 'common',\n    title: '常用',\n    children: [\n      {\n        label: '手机号',\n        value: '/^(0|86|17951)?(1[2-9])[0-9]{9}$/'\n      },\n      {\n        label: '固定电话 XXX-XXXXXXX XXXX-XXXXXXXX',\n        value: '/(\\\\(\\\\d{3,4}\\\\)|\\\\d{3,4}-|\\\\s)?\\\\d{8}/'\n      },\n      {\n        label: '行首行尾空格',\n        value: '/(^\\\\s*)|(\\\\s*$)/'\n      },\n      {\n        label: '所有空格',\n        value: '/\\\\s+/g'\n      },\n      {\n        label: '身份证号',\n        value: '/^(^[1-9]\\\\d{7}((0\\\\d)|(1[0-2]))(([0|1|2]\\\\d)|3[0-1])\\\\d{3}$)|(^[1-9]\\\\d{5}[1-9]\\\\d{3}((0\\\\d)|(1[0-2]))(([0|1|2]\\\\d)|3[0-1])((\\\\d{4})|\\\\d{3}[Xx])$)$/'\n      },\n      {\n        label: 'Email地址',\n        value: '/^[A-Za-z0-9\\\\u4e00-\\\\u9fa5]+@[a-zA-Z0-9_-]+(\\\\.[a-zA-Z0-9_-]+)+$/'\n      },\n      {\n        label: '域名',\n        value: '/^((http:\\\\/\\\\/)|(https:\\\\/\\\\/))?([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])?\\\\.)+[a-zA-Z]{2,6}(\\\\/)/'\n      },\n      {\n        label: 'IP',\n        value: '/((?:(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)\\\\.){3}(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d))/'\n      },\n      {\n        label: '帐号 字母开头、5-16位、字母数字下划线',\n        value: '/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/'\n      },\n      {\n        label: '密码 8位以上、字母、数字及特殊符号',\n        value: '/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!.,@$%^&*-]).{8,}$/'\n      },\n      {\n        label: 'HTML标签',\n        value: '/<(\\\\S*?)[`^>]*>.*?</>|<.*? />/'\n      },\n      {\n        label: '16进制颜色',\n        value: '/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}|[a-fA-F0-9]{8}|[a-fA-F0-9]{4})$/'\n      },\n    ]\n  },\n  {\n    name: 'number',\n    title: '数字相关',\n    children: [\n      {\n        label: '数字',\n        value: '/^[0-9]*$/'\n      },\n      {\n        label: 'n位数字',\n        value: '/^\\\\d{n}$/'\n      },\n      {\n        label: 'm到n位的数字',\n        value: '/^\\\\d{m,n}$/'\n      },\n      {\n        label: '至少n位以上的数字',\n        value: '/^\\\\d{n,}$/'\n      },\n      {\n        label: '带1-2位小数的正数或负数',\n        value: '/^(-)?\\\\d+(.\\\\d{1,2})?$/'\n      },\n      {\n        label: '正数、负数和小数',\n        value: '/^(-|+)?\\\\d+(.\\\\d+)?$/'\n      },\n      {\n        label: '有两位小数的正实数',\n        value: '/^[0-9]+(.[0-9]{2})?$/'\n      },\n      {\n        label: '非零的正整数',\n        value: '/^[1-9]\\\\d*$/'\n      },\n      {\n        label: '非零的负整数',\n        value: '/^-[1-9]\\\\d*$/'\n      },\n      {\n        label: '非正整数',\n        value: '/^-[1-9]\\\\d*|0$/'\n      },\n      {\n        label: '非负整数',\n        value: '/^\\\\d+$/'\n      },\n      {\n        label: '浮点数',\n        value: '/^(-?\\\\d+)(.\\\\d+)?$/'\n      },\n      {\n        label: '正浮点数',\n        value: '/^[1-9]\\\\d*.\\\\d*|0.\\\\d*[1-9]\\\\d*$/'\n      },\n      {\n        label: '负浮点数',\n        value: '/^-([1-9]\\\\d*.\\\\d*|0.\\\\d*[1-9]\\\\d*)$/'\n      },\n      {\n        label: '非正浮点数',\n        value: '/^((-\\\\d+(.\\\\d+)?)|(0+(.0+)?))$/'\n      },\n      {\n        label: '非负浮点数',\n        value: '/^\\\\d+(.\\\\d+)?$/'\n      }\n    ]\n  },\n  {\n    name: 'character',\n    title: '字符相关',\n    children: [\n      {\n        label: '中文字符',\n        value: '/[\\\\u4e00-\\\\u9fa5]/gm'\n      },\n      {\n        label: '只能由英文字母组成',\n        value: '/^[a-z]+$/i'\n      },\n      {\n        label: '只能由大写英文字母组成',\n        value: '/^[A-Z]+$/'\n      },\n      {\n        label: '只能由英文和数字组成',\n        value: '/^[a-z0-9]+$/i'\n      },\n      {\n        label: '只能由英文、数字和下划线组成',\n        value: '/^\\\\w+$/'\n      }\n    ]\n  }\n]\n\nconst form = ref({ input: '', result: '', text: '' })\n\nconst inputClass = ref('')\n\nconst regexp = computed(() => {\n  const { input } = form.value\n  let reg = null\n  try {\n    reg = eval(input)\n  } catch (error) {\n    console.log(error)\n    return null\n  }\n  if (Object.prototype.toString.call(reg) !== '[object RegExp]') return null\n  return reg\n})\n\nconst regexpExec = () => {\n  if (!regexp.value) return\n  const { text } = form.value\n  let obj = {}\n  if (regexp.value.global) {\n    let res = null\n    while ((res = regexp.value.exec(text)) !== null)\n    {\n      obj[res.index] = res[0]\n    }\n  } else {\n    let res = regexp.value.exec(text)\n    if (res) obj[res.index] = res[0]\n  }\n  let html = ''\n  for (let index = 0; index < text.length; index++) {\n    if (obj[index]) {\n      html += `<b>${obj[index]}</b>`\n      index += obj[index].length - 1\n    } else {\n      html += `<i>${text[index]}</i>`\n    }\n  }\n  form.value.result = html\n}\n\nconst handleInputText = (e) => {\n  form.value.text = e.target.value\n  regexpExec()\n  e.target.style.height = `${e.target.scrollHeight}px`\n}\n\nconst handleChoose = (val) => {\n  form.value.input = val\n  regexpExec()\n}\n\nconst handleClear = () => {\n  form.value.input = ''\n  form.value.result = ''\n  form.value.text = ''\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-regexp {\n  overflow-y: auto;\n  .form-wrapper {\n    width: 400px;\n  }\n  .input-wrapper {\n    width: 100%;\n    padding: 5px 11px;\n    background-color: var(--el-input-bg-color,var(--el-fill-color-blank));\n    box-shadow: 0 0 0 1px var(--el-input-border-color,var(--el-border-color)) inset;\n    border-radius: var(--el-input-border-radius,var(--el-border-radius-base));\n    transition: var(--el-transition-box-shadow);\n    &:hover {\n      box-shadow: 0 0 0 1px var(--el-border-color-hover) inset;\n    }\n    &.focus {\n      box-shadow: 0 0 0 1px var(--el-color-primary) inset;\n    }\n    &.disabled {\n      .input-item {\n        &.input {\n          color: var(--el-input-text-color,var(--el-text-color-regular));\n        }\n        &.result {\n          opacity: 0;\n        }\n      }\n    }\n    .input-content {\n      position: relative;\n      overflow: hidden;\n    }\n    .input-item {\n      outline: none;\n      background-color: transparent;\n      font-size: 14px;\n      line-height: 1.5;\n      font-family: inherit;\n      &::-webkit-scrollbar {\n        width: 0;\n      }\n      &.input {\n        position: relative;\n        width: 100%;\n        min-height: 100px;\n        z-index: 10;\n        color: transparent;\n        caret-color: var(--el-input-text-color,var(--el-text-color-regular));\n        border: none;\n        resize: none;\n      }\n      &.result {\n        position: absolute;\n        left: 0;\n        top: 0;\n        max-width: 100%;\n        max-height: 100%;\n        color: var(--el-input-text-color,var(--el-text-color-regular));\n        :deep(b) {\n          font-style: normal;\n          font-weight: normal;\n          background-color: #FCFF99;\n          &.select {\n            opacity: 0;\n          }\n        }\n        :deep(i) {\n          font-style: normal;\n          font-weight: normal;\n          background-color: #fff;\n          &.select {\n            opacity: 0;\n          }\n        }\n      }\n    }\n  }\n  .regexp-wrapper {\n    max-width: 400px;\n    position: relative;\n    top: -13px;\n    overflow-y: auto;\n    border: none;\n    margin-left: 20px;\n    :deep(.el-collapse-item__header) {\n      border: none;\n      font-weight: 600;\n      font-size: 14px;\n      color: var(--el-color-primary);\n    }\n    :deep(.el-collapse-item__wrap) {\n      border: none;\n    }\n    :deep(.el-collapse-item__content) {\n      padding-bottom: 0;\n    }\n    .regexp-item {\n      line-height: 1;\n      padding: 5px 0;\n      &:hover {\n        .item-btn {\n          display: block;\n        }\n      }\n      .item-title {\n        height: 30px;\n        font-weight: 600;\n      }\n      .item-content {\n        word-break: break-all;\n        word-wrap: break-word;\n      }\n      .item-btn {\n        width: auto;\n        height: auto;\n        padding: 5px;\n        cursor: pointer;\n        margin-left: 10px;\n        display: none;\n        font-size: 16px;\n        color: var(--el-menu-active-color);\n      }\n    }\n  }\n}\n</style>","<template>\n  <div class=\"app-wrapper flex over-h\">\n    <Nav></Nav>\n    <router-view class=\"flex-1 over-h\" v-slot=\"{ Component }\">\n      <keep-alive>\n        <component :is=\"Component\" />\n      </keep-alive>\n    </router-view>\n    <!-- <router-view v-if=\"!$route.meta.keepAlive\" class=\"flex-1 over-h\" ></router-view> -->\n  </div>\n</template>\n\n<script>\nimport ClipboardJS from 'clipboard'\nimport { ElNotification } from 'element-plus'\nimport Nav from './components/NavComp.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Nav\n  },\n  mounted () {\n    const clipboard = new ClipboardJS('.copy-btn')\n    clipboard.on('success', function (e) {\n      ElNotification({\n        title: '提示',\n        message: '复制成功',\n        type: 'success',\n      })\n      e.clearSelection()\n    })\n    clipboard.on('error', function () {\n      ElNotification({\n        title: '提示',\n        message: '复制失败，请重试',\n        type: 'error',\n      })\n    })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.app-wrapper {\n  position: relative;\n  height: 100%;\n}\n</style>","<template>\n  <el-menu\n    class=\"app-nav\"\n    :default-active=\"activeNav\"\n    :default-openeds=\"['3', '4']\"\n  >\n    <div class=\"avatar\"></div>\n    <template v-for=\"(item, row) in navConfig\" :key=\"row\">\n      <el-sub-menu v-if=\"item.children\" :index=\"`${row + 1}`\">\n        <template #title>\n          <el-icon>\n            <component :is=\"item.icon\"></component>\n          </el-icon>\n          <span>{{ item.title }}</span>\n        </template>\n        <el-menu-item-group>\n          <el-menu-item\n            v-for=\"(child, col) in item.children\"\n            :key=\"`${row + 1}-${col + 1}`\"\n            :index=\"`${row + 1}-${col + 1}`\"\n            @click=\"handleClick(child, `${row + 1}-${col + 1}`)\"\n          >{{ child.title }}</el-menu-item>\n        </el-menu-item-group>\n      </el-sub-menu>\n      <el-menu-item v-else :index=\"`${row + 1}`\" @click=\"handleClick(item, `${row + 1}`)\">\n        <el-icon>\n          <component :is=\"item.icon\"></component>\n        </el-icon>\n        <span>{{ item.title }}</span>\n      </el-menu-item>\n    </template>\n  </el-menu>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\n\nconst navConfig = [\n  {\n    title: '网站导航',\n    icon: 'Link',\n    path: '/'\n  },\n  {\n    title: '插件导航',\n    icon: 'Key',\n    path: '/plugins'\n  },\n  {\n    title: '常用工具',\n    icon: 'SetUp',\n    children: [\n      {\n        title: '代码格式化',\n        path: '/beautify'\n      },\n      {\n        title: '二维码生成',\n        path: '/qrcode'\n      },\n      {\n        title: '二维码解析',\n        path: '/parse-qrcode'\n      },\n      {\n        title: '正则表达式',\n        path: '/regexp'\n      },\n      {\n        title: 'm3u8视频下载',\n        path: '/m3u8'\n      },\n    ]\n  },\n  {\n    title: '其他工具',\n    icon: 'FolderOpened',\n    children: [\n      {\n        title: '转换工具',\n        path: '/transfer'\n      },\n      {\n        title: '图片拼接',\n        path: '/stitch'\n      },\n      {\n        title: 'CSS三角形生成器',\n        path: '/triangle'\n      },\n      {\n        title: 'PS投影转CSS3',\n        path: '/shadow'\n      },\n    ]\n  },\n  {\n    title: '影视资源',\n    icon: 'Film',\n    path: '/movie'\n  },\n]\n\nconst activeNav = ref('1')\nconst route = useRoute()\nconst queryActive = computed(() => (route.query.a || '1'))\nwatch(queryActive, newVal => activeNav.value = newVal)\n\nconst router = useRouter()\nconst handleClick = (opts, index) => {\n  const { url, path } = opts\n  if (url) {\n    window.open(url)\n  } else {\n    router.push({ path, query: { a: index } })\n    activeNav.value = index\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.app-nav {\n  width: 200px;\n  height: 100%;\n  :deep(.el-menu-item) {\n    font-size: 15px;\n  }\n  :deep(.el-sub-menu__title) {\n    font-size: 15px;\n  }\n  .avatar {\n    width: 80px;\n    height: 80px;\n    border-radius: 50%;\n    margin: 30px auto 20px;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-image: url(../assets/avatar.jpg);\n  }\n}\n</style>\n","import script from \"./NavComp.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NavComp.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NavComp.vue?vue&type=style&index=0&id=6b9a49a8&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6b9a49a8\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=3be4d3bc&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3be4d3bc&lang=less&scoped=true\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3be4d3bc\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-home flex flex-wrap\">\n    <el-card\n      class=\"page-card\"\n      v-for=\"(item, index) in webList\"\n      :key=\"index\"\n    >\n      <template #header>\n        <div class=\"card-header flex-v\">\n          <div class=\"flex-1\">{{ item.title }}</div>\n          <el-link icon=\"ArrowRight\" :underline=\"false\" :href=\"item.link\" target=\"_blank\"></el-link>\n        </div>\n      </template>\n      <div>{{ item.description }}</div>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nconst webList = [\n  {\n    title: 'Aconvert',\n    link: 'https://www.aconvert.com/',\n    description: '在线转换各类PDF，文档，电子书，图像，图标，视频，音频和压缩文件'\n  },\n  {\n    title: 'TinyPNG',\n    link: 'https://tinypng.com/',\n    description: '在线智能压缩WebP、PNG和JPEG图片'\n  },\n  {\n    title: 'Waifu2x',\n    link: 'https://waifu2x.udp.jp/',\n    description: '在线无损放大图片'\n  },\n  {\n    title: 'Transfonter',\n    link: 'https://transfonter.org/',\n    description: '将任何TTF、OTF、WOFF、WOFF2或SVG字体在线转换为css @font-face格式'\n  },\n  {\n    title: 'Color Hunt',\n    link: 'https://www.colorhunt.co/',\n    description: '推荐最佳的色系搭配组合'\n  },\n  {\n    title: 'React Login Pages',\n    link: 'https://uiwjs.github.io/react-login-page/',\n    description: '适用于React、提供灵活API的登录页面组件'\n  },\n  {\n    title: 'UIverse',\n    link: 'https://uiverse.io/all',\n    description: '炫酷的UI组件'\n  },\n  {\n    title: 'Tailspark',\n    link: 'https://tailspark.co/',\n    description: '300+免费的CSS组件和模板'\n  },\n  {\n    title: 'Loading',\n    link: 'https://loading.io/',\n    description: '炫酷丰富的loading图标'\n  },\n  {\n    title: 'Cubic-bezier',\n    link: 'https://cubic-bezier.com/',\n    description: '贝塞尔曲线'\n  },\n  {\n    title: 'Get Emoji',\n    link: 'https://getemoji.com/',\n    description: 'Emoji大全'\n  },\n  {\n    title: 'HelloGitHub',\n    link: 'https://hellogithub.com/',\n    description: '一个发现和分享有趣、入门级开源项目的平台'\n  }\n]\n\n// const handleOpen = (href) => {\n//   window.open(href, '_blank')\n// }\n</script>\n\n<style lang=\"less\" scoped>\n.page-home {\n  padding: 10px;\n  align-content: flex-start;\n}\n</style>","import script from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=abf2e38c&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-abf2e38c\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-plugins flex flex-wrap\">\n    <el-card\n      class=\"page-card\"\n      v-for=\"(item, index) in webList\"\n      :key=\"index\"\n    >\n      <template #header>\n        <div class=\"card-header flex-v\">\n          <div class=\"flex-1\">{{ item.title }}</div>\n          <el-link icon=\"ArrowRight\" :underline=\"false\" :href=\"item.link\" target=\"_blank\"></el-link>\n        </div>\n      </template>\n      <div>{{ item.description }}</div>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nconst webList = [\n  {\n    title: 'SheetJS',\n    link: 'https://github.com/SheetJS/sheetjs',\n    description: '操作Excel以及类似的二维表的插件'\n  },\n  {\n    title: 'ClipboardJS',\n    link: 'https://github.com/zenorocha/clipboard.js',\n    description: '复制内容到剪贴板的插件'\n  },\n  {\n    title: 'js-cookie',\n    link: 'https://github.com/js-cookie/js-cookie',\n    description: '用于处理 Cookie 的简单、轻量级的 JavaScript API'\n  },\n  {\n    title: 'Html2canvas',\n    link: 'https://github.com/niklasvh/html2canvas',\n    description: '屏幕截图插件'\n  },\n  {\n    title: 'dom-to-image',\n    link: 'https://github.com/tsayen/dom-to-image',\n    description: '将任意 DOM 节点转换为用 JavaScript 编写的矢量 （SVG） 或光栅（PNG 或 JPEG）图像'\n  },\n  {\n    title: 'SortableJS',\n    link: 'https://github.com/SortableJS/Sortable',\n    description: '可重新排序的拖放列表的 JavaScript 库'\n  },\n  {\n    title: 'Vue.Draggable',\n    link: 'https://github.com/SortableJS/Vue.Draggable',\n    description: '基于Sortable.js实现的vue拖拽插件'\n  },\n  {\n    title: 'MoveableJS',\n    link: 'https://github.com/daybrush/moveable',\n    description: '可拖动的、可调整大小的、可缩放的、可旋转的、可弯曲的、可收缩的、可分组的、可对齐的一个插件'\n  },\n  {\n    title: 'Painter',\n    link: 'https://github.com/Kujiale-Mobile/Painter',\n    description: '小程序绘制图片的插件'\n  },\n  {\n    title: 'QRCodeJS',\n    link: 'https://github.com/davidshimjs/qrcodejs',\n    description: '生成二维码'\n  },\n  {\n    title: 'QRCodeStyling',\n    link: 'https://github.com/kozakdenys/qr-code-styling',\n    description: '风格化二维码'\n  },\n  {\n    title: 'ArtQRCode',\n    link: 'https://github.com/252860883/ArtQRCode',\n    description: '艺术二维码'\n  },\n  {\n    title: 'JsBarcode',\n    link: 'https://github.com/lindell/JsBarcode',\n    description: '生成条形码'\n  },\n  {\n    title: 'HighlightJS',\n    link: 'https://github.com/highlightjs/highlight.js',\n    description: '语法高亮插件'\n  },\n  {\n    title: 'Administrative-divisions-of-China',\n    link: 'https://github.com/modood/Administrative-divisions-of-China',\n    description: '中国省市区插件'\n  },\n  {\n    title: 'DayJS',\n    link: 'https://github.com/iamkun/dayjs',\n    description: '极简的时间日期库'\n  },\n  {\n    title: 'ChromaJS',\n    link: 'https://github.com/gka/chroma.js',\n    description: '轻量的颜色转换库'\n  },\n  {\n    title: 'Heic2anyJS',\n    link: 'https://github.com/alexcorvi/heic2any',\n    description: '将 HEIC/HEIF 图像文件转换为 JPEG、PNG 或 GIF'\n  },\n  {\n    title: 'TrackingJS',\n    link: 'https://github.com/eduardolundgren/tracking.js',\n    description: '人脸识别和图像识别'\n  },\n  {\n    title: 'UuidJS',\n    link: 'https://github.com/uuidjs/uuid',\n    description: '生成随机的UUID'\n  },\n  {\n    title: 'Console-ban',\n    link: 'https://github.com/fz6m/console-ban',\n    description: '禁止F12 / 审查开启控制台，保护站点资源、减少爬虫和攻击的轻量方案，支持重定向、重写、自定义多种策略'\n  },\n  {\n    title: 'Vue-web-extension',\n    link: 'https://github.com/Kocal/vue-web-extension',\n    description: '使用Vue开发浏览器插件'\n  },\n  {\n    title: 'Chrome插件(扩展)开发博客',\n    link: 'https://www.bookstack.cn/read/chrome-plugin-develop',\n    description: 'Chrome插件(扩展)开发全攻略'\n  },\n  {\n    title: 'Vutron',\n    link: 'https://github.com/jooy2/vutron',\n    description: '基于Vue3、用于开发Electron跨平台桌面应用的预配置模板'\n  },\n  {\n    title: 'FullPageJS',\n    link: 'https://github.com/alvarotrigo/fullPage.js',\n    description: '用于创建全屏滚动网站，并且可以在网站的各个部分内添加横向滑块'\n  },\n]\n</script>\n\n<style lang=\"less\" scoped>\n.page-plugins {\n  padding: 10px;\n  align-content: flex-start;\n}\n</style>","import script from \"./PluginsPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PluginsPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PluginsPage.vue?vue&type=style&index=0&id=0ad534dc&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0ad534dc\"]])\n\nexport default __exports__","export function stripNumber(num, precision = 12) {\n  return +parseFloat(num.toPrecision(precision));\n}\n\nexport function download(url, name) {\n  if (typeof url === \"object\" && url instanceof Blob) {\n    url = URL.createObjectURL(url);\n  }\n  let aLink = document.createElement(\"a\");\n  aLink.href = url;\n  aLink.download = name;\n  let event;\n  if (window.MouseEvent) {\n    event = new MouseEvent(\"click\");\n  } else {\n    event = document.createEvent(\"MouseEvents\");\n    event.initMouseEvent(\n      \"click\",\n      true,\n      false,\n      window,\n      0,\n      0,\n      0,\n      0,\n      0,\n      false,\n      false,\n      false,\n      false,\n      0,\n      null\n    );\n  }\n  aLink.dispatchEvent(event);\n}\n\nexport function loadJs(src) {\n  return new Promise((resolve) => {\n    const scripts = document.querySelectorAll(\"body>script\");\n    for (let index = 0; index < scripts.length; index++) {\n      if (scripts[index].getAttribute(\"src\") === src) {\n        resolve(true);\n        return;\n      }\n    }\n\n    let script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    document.body.appendChild(script);\n\n    script.onload = () => {\n      resolve(true);\n    };\n    script.onerror = () => {\n      resolve(false);\n    };\n  });\n}\n","<template>\n  <div class=\"page-wrapper page-triangle flex\">\n    <el-form label-width=\"60px\" :model=\"form\">\n      <el-form-item label=\"方向：\">\n        <div class=\"triangle-box\">\n          <div class=\"box-content\">\n            <div class=\"box-center\"></div>\n            <div\n              class=\"box-top box-item box-inside\"\n              :class=\"[form.direction === 'top' ? 'active' : '']\"\n              @click=\"handleChangeDirection('top')\"\n            ></div>\n            <div\n              class=\"box-bottom box-item box-inside\"\n              :class=\"[form.direction === 'bottom' ? 'active' : '']\"\n              @click=\"handleChangeDirection('bottom')\"\n            ></div>\n            <div\n              class=\"box-left box-item box-inside\"\n              :class=\"[form.direction === 'left' ? 'active' : '']\"\n              @click=\"handleChangeDirection('left')\"\n            ></div>\n            <div\n              class=\"box-right box-item box-inside\"\n              :class=\"[form.direction === 'right' ? 'active' : '']\"\n              @click=\"handleChangeDirection('right')\"\n            ></div>\n            <div\n              class=\"box-top-left box-item\"\n              :class=\"[form.direction === 'top-left' ? 'active' : '']\"\n              @click=\"handleChangeDirection('top-left')\"\n            ></div>\n            <div\n              class=\"box-top-right box-item\"\n              :class=\"[form.direction === 'top-right' ? 'active' : '']\"\n              @click=\"handleChangeDirection('top-right')\"\n            ></div>\n            <div\n              class=\"box-bottom-left box-item\"\n              :class=\"[form.direction === 'bottom-left' ? 'active' : '']\"\n              @click=\"handleChangeDirection('bottom-left')\"\n            ></div>\n            <div\n              class=\"box-bottom-right box-item\"\n              :class=\"[form.direction === 'bottom-right' ? 'active' : '']\"\n              @click=\"handleChangeDirection('bottom-right')\"\n            ></div>\n            <el-radio-group v-model=\"form.direction\">\n              <el-radio class=\"radio-top flex-col-reverse\" label=\"top\">上</el-radio>\n              <el-radio class=\"radio-bottom flex-col\" label=\"bottom\">下</el-radio>\n              <el-radio class=\"radio-left flex-row-reverse\" label=\"left\">左</el-radio>\n              <el-radio class=\"radio-right\" label=\"right\">右</el-radio>\n              <el-radio class=\"radio-top-left flex-row-reverse\" label=\"top-left\">左上</el-radio>\n              <el-radio class=\"radio-top-right\" label=\"top-right\">右上</el-radio>\n              <el-radio class=\"radio-bottom-left flex-row-reverse\" label=\"bottom-left\">左下</el-radio>\n              <el-radio class=\"radio-bottom-right\" label=\"bottom-right\">右下</el-radio>\n            </el-radio-group>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"形状：\">\n        <el-radio-group v-model=\"form.shape\" @change=\"handleChangeShape\">\n          <el-radio label=\"1\">等腰</el-radio>\n          <el-radio label=\"2\" v-if=\"form.direction.indexOf('-') < 0\">等边</el-radio>\n          <el-radio label=\"3\">不等边</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"颜色：\">\n        <el-color-picker v-model=\"form.color\" show-alpha />\n      </el-form-item>\n      <el-form-item class=\"form-item\" label=\"大小：\">\n        <div class=\"form-input-row\">\n          <el-input-number\n            class=\"input-item item1\"\n            v-model=\"form.width\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            :disabled=\"disabledWidth\"\n            :controls=\"!disabledWidth\"\n            @change=\"handleChangeWidth\"\n          />\n          <el-input-number\n            class=\"input-item item2\"\n            v-model=\"form.leftWidth\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            :controls=\"!disabledSideWidth\"\n            :disabled=\"disabledSideWidth\"\n            @change=\"handleChangeSideWidth\"\n          />\n          <el-input-number\n            class=\"input-item item3\"\n            v-model=\"form.rightWidth\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            :controls=\"!disabledSideWidth\"\n            :disabled=\"disabledSideWidth\"\n            @change=\"handleChangeSideWidth\"\n          />\n        </div>\n        <div class=\"form-input-row\">\n          <el-input-number\n            class=\"input-item item4\"\n            v-model=\"form.height\"\n            :disabled=\"disabledHeight\"\n            :controls=\"!disabledHeight\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            @change=\"handleChangeHeight\"\n          />\n          <el-input-number\n            class=\"input-item item5\"\n            v-model=\"form.topHeight\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            :disabled=\"disabledSideHeight\"\n            :controls=\"!disabledSideHeight\"\n            @change=\"handleChangeSideHeight\"\n          />\n          <el-input-number\n            class=\"input-item item6\"\n            v-model=\"form.bottomHeight\"\n            :min=\"0\"\n            :max=\"400\"\n            :step=\"1\"\n            :disabled=\"disabledSideHeight\"\n            :controls=\"!disabledSideHeight\"\n            @change=\"handleChangeSideHeight\"\n          />\n        </div>\n      </el-form-item>\n    </el-form>\n    <div class=\"page-right\">\n      <div class=\"show-wrapper\">\n        <div class=\"show-triangle\" :style=\"triangleStyle\"></div>\n      </div>\n      <div class=\"page-code\">\n        <highlightjs\n          autodetect\n          :code=\"triangleCode\"\n        ></highlightjs>\n        <el-tooltip\n          effect=\"light\"\n          content=\"重置数据\"\n          placement=\"top-end\"\n        >\n          <el-icon class=\"refresh-btn btn\" @click=\"handleResetData\">\n            <component :is=\"'Refresh'\"></component>\n          </el-icon>\n        </el-tooltip>\n        <el-tooltip\n          effect=\"light\"\n          content=\"复制代码\"\n          placement=\"top-end\"\n        >\n          <el-icon class=\"copy-btn btn\" :data-clipboard-text=\"triangleCode\">\n            <component :is=\"'CopyDocument'\"></component>\n          </el-icon>\n        </el-tooltip>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, computed } from 'vue'\nimport { stripNumber } from '../utils/func'\n\nconst initialData = {\n  direction: 'top',\n  shape: '1',\n  color: '#F94C10',\n  width: 200,\n  leftWidth: 100,\n  rightWidth: 100,\n  height: 200,\n  topHeight: 100,\n  bottomHeight: 100\n}\n\nconst form = reactive(JSON.parse(JSON.stringify(initialData)))\n\nconst disabledWidth = computed(() => {\n  return (['left', 'right'].includes(form.direction) && form.shape === '2') || (['top', 'bottom'].includes(form.direction) && form.shape === '3')\n})\n\nconst disabledSideWidth = computed(() => {\n  return ['1', '2'].includes(form.shape) || (!['top', 'bottom'].includes(form.direction) && form.shape === '3')\n})\n\nconst disabledHeight = computed(() => {\n  return (['top', 'bottom'].includes(form.direction) && form.shape === '2') || (['left', 'right'].includes(form.direction) && form.shape === '3')\n})\n\nconst disabledSideHeight = computed(() => {\n  return ['1', '2'].includes(form.shape) || (!['left', 'right'].includes(form.direction) && form.shape === '3')\n})\n\nconst triangleStyle = computed(() => {\n  let borderWidth = '', borderColor = ''\n  const { direction, shape, color, width, leftWidth, rightWidth, height, topHeight, bottomHeight } = form\n  switch (direction) {\n    case 'top':\n      borderColor = `transparent transparent ${color} transparent`\n      if (['1', '3'].includes(shape)) {\n        borderWidth = `0 ${rightWidth}px ${width}px ${leftWidth}px`\n      } else if (shape === '2') {\n        borderWidth = `0 ${rightWidth}px ${(width * Math.sqrt(3) / 2).toFixed(1)}px ${leftWidth}px`\n      }\n      break\n    case 'bottom':\n      borderColor = `${color} transparent transparent transparent`\n      if (['1', '3'].includes(shape)) {\n        borderWidth = `${width}px ${rightWidth}px 0 ${leftWidth}px`\n      } else if (shape === '2') {\n        borderWidth = `${(width * Math.sqrt(3) / 2).toFixed(1)}px ${rightWidth}px 0 ${leftWidth}px`\n      }\n      break\n    case 'left':\n      borderColor = `transparent ${color} transparent transparent`\n      if (['1', '3'].includes(shape)) {\n        borderWidth = `${topHeight}px ${width}px ${bottomHeight}px 0`\n      } else if (shape === '2') {\n        borderWidth = `${topHeight}px ${(height * Math.sqrt(3) / 2).toFixed(1)}px ${bottomHeight}px 0`\n      }\n      break\n    case 'right':\n      borderColor = `transparent transparent transparent ${color}`\n      if (['1', '3'].includes(shape)) {\n        borderWidth = `${topHeight}px 0 ${bottomHeight}px ${width}px`\n      } else if (shape === '2') {\n        borderWidth = `${topHeight}px 0 ${bottomHeight}px ${(height * Math.sqrt(3) / 2).toFixed(1)}px`\n      }\n      break\n    case 'top-left':\n      borderColor = `${color} transparent transparent transparent`\n      borderWidth = `${height}px ${width}px 0 0`\n      break\n    case 'top-right':\n      borderColor = `transparent ${color} transparent transparent`\n      borderWidth = `0 ${width}px ${height}px 0`\n      break\n    case 'bottom-left':\n      borderColor = `transparent transparent transparent ${color}`\n      borderWidth = `${height}px 0 0 ${width}px`\n      break\n    case 'bottom-right':\n      borderColor = `transparent transparent ${color} transparent`\n      borderWidth = `0 0 ${height}px ${width}px`\n      break\n  }\n  return { borderWidth, borderColor }\n})\n\nconst triangleCode = computed(() => {\n  return `width: 0;\\nheight: 0;\\nborder-style: solid;\\nborder-width: ${triangleStyle.value.borderWidth};\\nborder-color: ${triangleStyle.value.borderColor};`\n})\n\nconst handleChangeDirection = (val) => {\n  form.direction = val\n  if (val.indexOf('-') >= 0 && form.shape === '1') {\n    form.height = form.width\n  } else if (val.indexOf('-') >= 0 && form.shape === '2') {\n    form.shape = '1'\n  }\n  if (disabledSideWidth.value) {\n    form.leftWidth = form.rightWidth = stripNumber(form.width / 2)\n  }\n  if (disabledSideHeight.value) {\n    form.topHeight = form.bottomHeight = stripNumber(form.height / 2)\n  }\n}\n\nconst handleChangeShape = (val) => {\n  if (val === '1' && form.direction.indexOf('-') >= 0) {\n    form.height = form.width\n  }\n  if (disabledSideWidth.value) {\n    form.leftWidth = form.rightWidth = stripNumber(form.width / 2)\n  }\n  if (disabledSideHeight.value) {\n    form.topHeight = form.bottomHeight = stripNumber(form.height / 2)\n  }\n}\n\nconst handleChangeWidth = (val) => {\n  form.leftWidth = form.rightWidth = stripNumber(val / 2)\n  if (form.direction.indexOf('-') >= 0 && form.shape === '1') {\n    form.height = val\n    form.topHeight = form.bottomHeight = stripNumber(val / 2)\n  }\n}\n\nconst handleChangeSideWidth = () => {\n  form.width = form.leftWidth + form.rightWidth\n}\n\nconst handleChangeHeight = (val) => {\n  form.topHeight = form.bottomHeight = stripNumber(val / 2)\n  if (form.direction.indexOf('-') >= 0 && form.shape === '1') {\n    form.width = val\n    form.leftWidth = form.rightWidth = stripNumber(val / 2)\n  }\n}\n\nconst handleChangeSideHeight = () => {\n  form.height = form.topHeight + form.bottomHeight\n}\n\nconst handleResetData = () => {\n  for (const key in initialData) {\n    if (Object.hasOwnProperty.call(initialData, key)) {\n      form[key] = initialData[key]\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-triangle {\n  .triangle-box {\n    padding: 150px 120px 130px;\n    .box-content {\n      width: 100px;\n      height: 100px;\n      position: relative;\n    }\n    .box-center {\n      width: 100px;\n      height: 100px;\n      position: absolute;\n      background-color: #fff;\n      z-index: 20;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n    }\n    .box-item {\n      width: 0;\n      height: 0;\n      border-style: solid;\n      position: absolute;\n      cursor: pointer;\n      transition: all 0.15s;\n    }\n    .box-inside {\n      width: 70.7px;\n      height: 70.7px;\n      z-index: 10;\n      border: none;\n      background-color: #6F61C0;\n      &.active {\n        background-color: #8BE8E5;\n      }\n    }\n    .box-top {\n      left: 0;\n      top: 0;\n      transform: rotate(-45deg);\n      transform-origin: left top;\n    }\n    .box-bottom {\n      left: 0;\n      bottom: 0;\n      transform: rotate(45deg);\n      transform-origin: left bottom;\n    }\n    .box-left {\n      left: 0;\n      top: 0;\n      transform: rotate(45deg);\n      transform-origin: left top;\n    }\n    .box-right {\n      top: 0;\n      right: 0;\n      transform: rotate(-45deg);\n      transform-origin: right top;\n    }\n    .box-top-left {\n      border-width: 100px 100px 0 0;\n      border-color: #A084E8 transparent transparent transparent;\n      left: -50px;\n      top: -50px;\n      &.active {\n        border-color: #8BE8E5 transparent transparent transparent;\n      }\n    }\n    .box-top-right {\n      border-width: 0 100px 100px 0;\n      border-color: transparent #A084E8 transparent transparent;\n      right: -50px;\n      top: -50px;\n      &.active {\n        border-color: transparent #8BE8E5 transparent transparent;\n      }\n    }\n    .box-bottom-left {\n      border-width: 100px 0 0 100px;\n      border-color: transparent transparent transparent #A084E8;\n      left: -50px;\n      bottom: -50px;\n      &.active {\n        border-color: transparent transparent transparent #8BE8E5;\n      }\n    }\n    .box-bottom-right {\n      border-width: 0 0 100px 100px;\n      border-color: transparent transparent #A084E8 transparent;\n      right: -50px;\n      bottom: -50px;\n      &.active {\n        border-color: transparent transparent #8BE8E5 transparent;\n      }\n    }\n    .radio-top {\n      position: absolute;\n      top: -100px;\n      left: 50%;\n      transform: translateX(-50%);\n      :deep(.el-radio__label) {\n        margin: 0;\n        padding: 0;\n      }\n    }\n    .radio-bottom {\n      position: absolute;\n      bottom: -100px;\n      left: 50%;\n      transform: translateX(-50%);\n      :deep(.el-radio__label) {\n        margin: 0;\n        padding: 0;\n      }\n    }\n    .radio-left {\n      position: absolute;\n      left: -108px;\n      top: 50%;\n      transform: translateY(-50%);\n      :deep(.el-radio__label) {\n        padding: 0 8px 0 0;\n      }\n    }\n    .radio-right {\n      position: absolute;\n      right: -140px;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n    .radio-top-left {\n      position: absolute;\n      left: -112px;\n      top: -88px;\n      :deep(.el-radio__label) {\n        padding: 0;\n        position: relative;\n        top: -15px;\n        left: 3px;\n        transform: rotate(-45deg);\n      }\n    }\n    .radio-top-right {\n      position: absolute;\n      right: -145px;\n      top: -88px;\n      :deep(.el-radio__label) {\n        padding: 0;\n        position: relative;\n        top: -15px;\n        right: 4px;\n        transform: rotate(45deg);\n      }\n    }\n    .radio-bottom-left {\n      position: absolute;\n      left: -112px;\n      bottom: -88px;\n      :deep(.el-radio__label) {\n        padding: 0;\n        position: relative;\n        bottom: -15px;\n        left: 3px;\n        transform: rotate(-135deg);\n      }\n    }\n    .radio-bottom-right {\n      position: absolute;\n      right: -112px;\n      bottom: -88px;\n      :deep(.el-radio__label) {\n        padding: 0;\n        position: relative;\n        bottom: -15px;\n        right: 3px;\n        transform: rotate(135deg);\n      }\n    }\n  }\n  .form-item {\n    :deep(.el-form-item__content) {\n      flex-direction: column;\n    }\n  }\n  .form-input-row {\n    display: block;\n    margin-bottom: 30px;\n    .input-item {\n      margin-right: 10px;\n      position: relative;\n      &::after {\n        position: absolute;\n        bottom: -28px;\n        left: 50%;\n        transform: translateX(-50%);\n        font-size: 12px;\n        color: var(--el-menu-active-color);\n      }\n      &.item1::after {\n        content: '宽度';\n      }\n      &.item2::after {\n        content: '左';\n      }\n      &.item3::after {\n        content: '右';\n      }\n      &.item4::after {\n        content: '高度';\n      }\n      &.item5::after {\n        content: '上';\n      }\n      &.item6::after {\n        content: '下';\n      }\n    }\n  }\n  .page-right {\n    .show-wrapper {\n      width: 440px;\n      height: 440px;\n      background: url('../assets/transparent.png') 0 0 repeat;\n      position: relative;\n      overflow: hidden;\n      .show-triangle {\n        width: 0;\n        height: 0;\n        border-style: solid;\n        position: absolute;\n        left: 0;\n        top: 0;\n      }\n    }\n    :deep(.hljs) {\n      width: 440px;\n      min-height: 150px;\n      word-break: break-all;\n      overflow: hidden;\n      white-space: break-spaces;\n    }\n  }\n}\n</style>","import script from \"./TrianglePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TrianglePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TrianglePage.vue?vue&type=style&index=0&id=292f3c8f&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-292f3c8f\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-shadow\">\n    <div class=\"flex\">\n      <el-card class=\"box-card ps-card\">\n        <template #header>\n          <div class=\"card-header\">Photoshop投影参数</div>\n        </template>\n        <el-form label-width=\"90px\" :model=\"psForm\">\n          <el-form-item class=\"form-item multi-input\" label=\"颜色：\">\n            <el-input-number\n              class=\"input-item item1\"\n              v-model=\"psForm.colorR\"\n              :min=\"0\"\n              :max=\"400\"\n              :step=\"1\"\n              step-strictly\n            />\n            <el-input-number\n              class=\"input-item item2\"\n              v-model=\"psForm.colorG\"\n              :min=\"0\"\n              :max=\"255\"\n              :step=\"1\"\n              step-strictly\n            />\n            <el-input-number\n              class=\"input-item item3\"\n              v-model=\"psForm.colorB\"\n              :min=\"0\"\n              :max=\"255\"\n              :step=\"1\"\n              step-strictly\n            />\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"不透明度：\">\n            <el-input-number\n              v-model=\"psForm.opacity\"\n              :min=\"0\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">%</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"角度：\">\n            <el-input-number\n              v-model=\"psForm.angle\"\n              :min=\"0\"\n              :max=\"360\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">°</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"距离：\">\n            <el-input-number\n              v-model=\"psForm.distance\"\n              :min=\"0\"\n              :max=\"1000\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"扩展：\">\n            <el-input-number\n              v-model=\"psForm.spread\"\n              :min=\"0\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">%</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"大小：\">\n            <el-input-number\n              v-model=\"psForm.size\"\n              :min=\"0\"\n              :max=\"1000\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n        </el-form>\n      </el-card>\n      <el-card class=\"box-card\">\n        <template #header>\n          <div class=\"card-header\">CSS3参数</div>\n        </template>\n        <el-form label-width=\"100px\" :model=\"cssForm\">\n          <el-form-item class=\"form-item\" label=\"内阴影：\">\n            <el-switch v-model=\"cssForm.inset\" />\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"水平偏移量：\">\n            <el-input-number\n              v-model=\"cssForm.offsetX\"\n              :min=\"0\"\n              :max=\"1000\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"垂直偏移量：\">\n            <el-input-number\n              v-model=\"cssForm.offsetY\"\n              :min=\"0\"\n              :max=\"1000\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"模糊距离：\">\n            <el-input-number\n              v-model=\"cssForm.blurRadius\"\n              :min=\"0\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"阴影尺寸：\">\n            <el-input-number\n              v-model=\"cssForm.spread\"\n              :min=\"0\"\n              :max=\"1000\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">px</span>\n          </el-form-item>\n          <el-form-item class=\"form-item\" label=\"不透明度：\">\n            <el-input-number\n              v-model=\"cssForm.opacity\"\n              :min=\"0\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n            <span class=\"item-text\">%</span>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </div>\n    <div class=\"flex over-h\">\n      <div class=\"page-code\">\n        <highlightjs\n          autodetect\n          :code=\"shadowCode\"\n        ></highlightjs>\n        <el-tooltip\n          effect=\"light\"\n          content=\"重置数据\"\n          placement=\"top-end\"\n        >\n          <el-icon class=\"refresh-btn btn\" @click=\"handleResetData\">\n            <component :is=\"'Refresh'\"></component>\n          </el-icon>\n        </el-tooltip>\n        <el-tooltip\n          effect=\"light\"\n          content=\"复制代码\"\n          placement=\"top-end\"\n        >\n          <el-icon class=\"copy-btn btn\" :data-clipboard-text=\"shadowCode\">\n            <component :is=\"'CopyDocument'\"></component>\n          </el-icon>\n        </el-tooltip>\n      </div>\n      <div class=\"show-wrapper flex-vh\">\n        <div class=\"show-box flex-vh\" :style=\"shadowStyle\">字</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\n\nconst initialData = {\n  colorR: 0,\n  colorG: 0,\n  colorB: 0,\n  opacity: 75,\n  angle: 120,\n  distance: 5,\n  spread: 0,\n  size: 5\n}\n\nconst psForm = ref(JSON.parse(JSON.stringify(initialData)))\n\nconst transToCSS = () => {\n  const _angle = (180 - psForm.value.angle) * 3.14 / 180\n  const offsetY = Math.round(Math.sin(_angle) * psForm.value.distance)\n  const offsetX = Math.round(Math.cos(_angle) * psForm.value.distance)\n  const spread = psForm.value.size * psForm.value.spread / 100\n  const blurRadius = psForm.value.size - spread\n  return { offsetX, offsetY, blurRadius, spread, opacity: psForm.value.opacity }\n}\n\nconst cssForm = ref({\n  inset: false,\n  ...transToCSS()\n})\n\nconst shadowStyle = computed(() => {\n  const { colorR, colorG, colorB } = psForm.value\n  const { inset, offsetX, offsetY, blurRadius, spread, opacity } = cssForm.value\n  return {\n    boxShadow: `${offsetX}px ${offsetY}px ${blurRadius}px ${spread}px rgba(${colorR}, ${colorG}, ${colorB}, ${opacity / 100})${inset ? ' inset' : ''}`,\n    textShadow: `${offsetX}px ${offsetY}px ${blurRadius}px rgba(${colorR}, ${colorG}, ${colorB}, ${opacity / 100})`\n  }\n})\n\nconst shadowCode = computed(() => {\n  return `box-shadow: ${shadowStyle.value.boxShadow};\\ntext-shadow: ${shadowStyle.value.textShadow};`\n})\n\nconst isChanged = ref(false)\n\nwatch(psForm.value, () => {\n  isChanged.value = true\n  cssForm.value = {\n    inset: cssForm.value.inset,\n    ...transToCSS()\n  }\n})\n\nconst handleResetData = () => {\n  for (const key in initialData) {\n    if (Object.hasOwnProperty.call(initialData, key)) {\n      psForm.value[key] = initialData[key]\n    }\n  }\n  if (!isChanged.value) {\n    cssForm.value = {\n      inset: false,\n      ...transToCSS()\n    }\n    isChanged.value = false\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-shadow {\n  .box-card {\n    margin-bottom: 20px;\n    &.ps-card {\n      width: 540px;\n    }\n    &:not(:first-child) {\n      margin-left: 20px;\n    }\n    .card-header {\n      font-size: 15px;\n      font-weight: 600;\n    }\n    .form-item {\n      &.multi-input {\n        margin-bottom: 30px;\n        :deep(.el-form-item__content) {\n          flex-wrap: nowrap;\n        }\n      }\n      .item-text {\n        margin-left: 10px;\n        color: var(--el-menu-active-color);\n      }\n    }\n    .input-item {\n      margin-right: 10px;\n      position: relative;\n      &::after {\n        position: absolute;\n        bottom: -28px;\n        left: 50%;\n        transform: translateX(-50%);\n        font-size: 12px;\n        color: var(--el-menu-active-color);\n      }\n      &.item1::after {\n        content: 'R';\n      }\n      &.item2::after {\n        content: 'G';\n      }\n      &.item3::after {\n        content: 'B';\n      }\n    }\n  }\n  .show-wrapper {\n    width: 310px;\n    overflow: hidden;\n    padding-bottom: 10px;\n    .show-box {\n      width: 100px;\n      height: 100px;\n      font-size: 20px;\n    }\n  }\n  :deep(.hljs) {\n    width: 540px;\n    height: 180px;\n  }\n}\n</style>","import script from \"./ShadowPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ShadowPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ShadowPage.vue?vue&type=style&index=0&id=527d9381&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-527d9381\"]])\n\nexport default __exports__","/**\n * @author villion\n */\n\nvar QRCode;\n\nfunction QR8bitByte(data) {\n  this.mode = QRMode.MODE_8BIT_BYTE;\n  this.data = data;\n  this.parsedData = [];\n\n  // Added to support UTF-8 Characters\n  for (var i = 0, l = this.data.length; i < l; i++) {\n    var byteArray = [];\n    var code = this.data.charCodeAt(i);\n\n    if (code > 0x10000) {\n      byteArray[0] = 0xf0 | ((code & 0x1c0000) >>> 18);\n      byteArray[1] = 0x80 | ((code & 0x3f000) >>> 12);\n      byteArray[2] = 0x80 | ((code & 0xfc0) >>> 6);\n      byteArray[3] = 0x80 | (code & 0x3f);\n    } else if (code > 0x800) {\n      byteArray[0] = 0xe0 | ((code & 0xf000) >>> 12);\n      byteArray[1] = 0x80 | ((code & 0xfc0) >>> 6);\n      byteArray[2] = 0x80 | (code & 0x3f);\n    } else if (code > 0x80) {\n      byteArray[0] = 0xc0 | ((code & 0x7c0) >>> 6);\n      byteArray[1] = 0x80 | (code & 0x3f);\n    } else {\n      byteArray[0] = code;\n    }\n\n    this.parsedData.push(byteArray);\n  }\n\n  this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n  if (this.parsedData.length != this.data.length) {\n    this.parsedData.unshift(191);\n    this.parsedData.unshift(187);\n    this.parsedData.unshift(239);\n  }\n}\n\nQR8bitByte.prototype = {\n  getLength: function (buffer) {\n    return this.parsedData.length;\n  },\n  write: function (buffer) {\n    for (var i = 0, l = this.parsedData.length; i < l; i++) {\n      buffer.put(this.parsedData[i], 8);\n    }\n  },\n};\n\nfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n  this.typeNumber = typeNumber;\n  this.errorCorrectLevel = errorCorrectLevel;\n  this.modules = null;\n  this.moduleCount = 0;\n  this.dataCache = null;\n  this.dataList = [];\n}\n\nQRCodeModel.prototype = {\n  addData: function (data) {\n    var newData = new QR8bitByte(data);\n    this.dataList.push(newData);\n    this.dataCache = null;\n  },\n  //判断该坐标处是否为Dark\n  isDark: function (row, col) {\n    if (\n      row < 0 ||\n      this.moduleCount <= row ||\n      col < 0 ||\n      this.moduleCount <= col\n    ) {\n      throw new Error(row + \",\" + col);\n    }\n\n    return this.modules[row][col];\n  },\n  getModuleCount: function () {\n    return this.moduleCount;\n  },\n  make: function () {\n    this.makeImpl(false, this.getBestMaskPattern());\n  },\n  makeImpl: function (test, maskPattern) {\n    this.moduleCount = this.typeNumber * 4 + 17;\n    this.modules = new Array(this.moduleCount);\n    for (var row = 0; row < this.moduleCount; row++) {\n      this.modules[row] = new Array(this.moduleCount);\n      for (var col = 0; col < this.moduleCount; col++) {\n        this.modules[row][col] = null;\n      }\n    }\n    this.setupPositionProbePattern(0, 0);\n    this.setupPositionProbePattern(this.moduleCount - 7, 0);\n    this.setupPositionProbePattern(0, this.moduleCount - 7);\n    this.setupPositionAdjustPattern();\n    this.setupTimingPattern();\n    this.setupTypeInfo(test, maskPattern);\n    if (this.typeNumber >= 7) {\n      this.setupTypeNumber(test);\n    }\n    if (this.dataCache == null) {\n      this.dataCache = QRCodeModel.createData(\n        this.typeNumber,\n        this.errorCorrectLevel,\n        this.dataList\n      );\n    }\n    this.mapData(this.dataCache, maskPattern);\n  },\n  setupPositionProbePattern: function (row, col) {\n    for (var r = -1; r <= 7; r++) {\n      if (row + r <= -1 || this.moduleCount <= row + r) continue;\n      for (var c = -1; c <= 7; c++) {\n        if (col + c <= -1 || this.moduleCount <= col + c) continue;\n        if (\n          (0 <= r && r <= 6 && (c == 0 || c == 6)) ||\n          (0 <= c && c <= 6 && (r == 0 || r == 6)) ||\n          (2 <= r && r <= 4 && 2 <= c && c <= 4)\n        ) {\n          this.modules[row + r][col + c] = true;\n        } else {\n          this.modules[row + r][col + c] = false;\n        }\n      }\n    }\n  },\n  getBestMaskPattern: function () {\n    var minLostPoint = 0;\n    var pattern = 0;\n    for (var i = 0; i < 8; i++) {\n      this.makeImpl(true, i);\n      var lostPoint = QRUtil.getLostPoint(this);\n      if (i == 0 || minLostPoint > lostPoint) {\n        minLostPoint = lostPoint;\n        pattern = i;\n      }\n    }\n    return pattern;\n  },\n  createMovieClip: function (target_mc, instance_name, depth) {\n    var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n    var cs = 1;\n    this.make();\n    for (var row = 0; row < this.modules.length; row++) {\n      var y = row * cs;\n      for (var col = 0; col < this.modules[row].length; col++) {\n        var x = col * cs;\n        var dark = this.modules[row][col];\n        if (dark) {\n          qr_mc.beginFill(0, 100);\n          qr_mc.moveTo(x, y);\n          qr_mc.lineTo(x + cs, y);\n          qr_mc.lineTo(x + cs, y + cs);\n          qr_mc.lineTo(x, y + cs);\n          qr_mc.endFill();\n        }\n      }\n    }\n    return qr_mc;\n  },\n  setupTimingPattern: function () {\n    for (var r = 8; r < this.moduleCount - 8; r++) {\n      if (this.modules[r][6] != null) {\n        continue;\n      }\n      this.modules[r][6] = r % 2 == 0;\n    }\n    for (var c = 8; c < this.moduleCount - 8; c++) {\n      if (this.modules[6][c] != null) {\n        continue;\n      }\n      this.modules[6][c] = c % 2 == 0;\n    }\n  },\n  setupPositionAdjustPattern: function () {\n    var pos = QRUtil.getPatternPosition(this.typeNumber);\n    for (var i = 0; i < pos.length; i++) {\n      for (var j = 0; j < pos.length; j++) {\n        var row = pos[i];\n        var col = pos[j];\n        if (this.modules[row][col] != null) {\n          continue;\n        }\n        for (var r = -2; r <= 2; r++) {\n          for (var c = -2; c <= 2; c++) {\n            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\n              this.modules[row + r][col + c] = true;\n            } else {\n              this.modules[row + r][col + c] = false;\n            }\n          }\n        }\n      }\n    }\n  },\n  setupTypeNumber: function (test) {\n    var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      this.modules[Math.floor(i / 3)][(i % 3) + this.moduleCount - 8 - 3] = mod;\n    }\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      this.modules[(i % 3) + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n    }\n  },\n  setupTypeInfo: function (test, maskPattern) {\n    var data = (this.errorCorrectLevel << 3) | maskPattern;\n    var bits = QRUtil.getBCHTypeInfo(data);\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      if (i < 6) {\n        this.modules[i][8] = mod;\n      } else if (i < 8) {\n        this.modules[i + 1][8] = mod;\n      } else {\n        this.modules[this.moduleCount - 15 + i][8] = mod;\n      }\n    }\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      if (i < 8) {\n        this.modules[8][this.moduleCount - i - 1] = mod;\n      } else if (i < 9) {\n        this.modules[8][15 - i - 1 + 1] = mod;\n      } else {\n        this.modules[8][15 - i - 1] = mod;\n      }\n    }\n    this.modules[this.moduleCount - 8][8] = !test;\n  },\n  mapData: function (data, maskPattern) {\n    var inc = -1;\n    var row = this.moduleCount - 1;\n    var bitIndex = 7;\n    var byteIndex = 0;\n    for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n      if (col == 6) col--;\n      while (true) {\n        for (var c = 0; c < 2; c++) {\n          if (this.modules[row][col - c] == null) {\n            var dark = false;\n            if (byteIndex < data.length) {\n              dark = ((data[byteIndex] >>> bitIndex) & 1) == 1;\n            }\n            var mask = QRUtil.getMask(maskPattern, row, col - c);\n            if (mask) {\n              dark = !dark;\n            }\n            this.modules[row][col - c] = dark;\n            bitIndex--;\n            if (bitIndex == -1) {\n              byteIndex++;\n              bitIndex = 7;\n            }\n          }\n        }\n        row += inc;\n        if (row < 0 || this.moduleCount <= row) {\n          row -= inc;\n          inc = -inc;\n          break;\n        }\n      }\n    }\n  },\n};\nQRCodeModel.PAD0 = 0xec;\nQRCodeModel.PAD1 = 0x11;\nQRCodeModel.createData = function (typeNumber, errorCorrectLevel, dataList) {\n  var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n  var buffer = new QRBitBuffer();\n  for (var i = 0; i < dataList.length; i++) {\n    var data = dataList[i];\n    buffer.put(data.mode, 4);\n    buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n    data.write(buffer);\n  }\n  var totalDataCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalDataCount += rsBlocks[i].dataCount;\n  }\n  if (buffer.getLengthInBits() > totalDataCount * 8) {\n    throw new Error(\n      \"code length overflow. (\" +\n        buffer.getLengthInBits() +\n        \">\" +\n        totalDataCount * 8 +\n        \")\"\n    );\n  }\n  if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n    buffer.put(0, 4);\n  }\n  while (buffer.getLengthInBits() % 8 != 0) {\n    buffer.putBit(false);\n  }\n  while (true) {\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD0, 8);\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD1, 8);\n  }\n  return QRCodeModel.createBytes(buffer, rsBlocks);\n};\nQRCodeModel.createBytes = function (buffer, rsBlocks) {\n  var offset = 0;\n  var maxDcCount = 0;\n  var maxEcCount = 0;\n  var dcdata = new Array(rsBlocks.length);\n  var ecdata = new Array(rsBlocks.length);\n  for (var r = 0; r < rsBlocks.length; r++) {\n    var dcCount = rsBlocks[r].dataCount;\n    var ecCount = rsBlocks[r].totalCount - dcCount;\n    maxDcCount = Math.max(maxDcCount, dcCount);\n    maxEcCount = Math.max(maxEcCount, ecCount);\n    dcdata[r] = new Array(dcCount);\n    for (var i = 0; i < dcdata[r].length; i++) {\n      dcdata[r][i] = 0xff & buffer.buffer[i + offset];\n    }\n    offset += dcCount;\n    var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n    var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n    var modPoly = rawPoly.mod(rsPoly);\n    ecdata[r] = new Array(rsPoly.getLength() - 1);\n    for (var i = 0; i < ecdata[r].length; i++) {\n      var modIndex = i + modPoly.getLength() - ecdata[r].length;\n      ecdata[r][i] = modIndex >= 0 ? modPoly.get(modIndex) : 0;\n    }\n  }\n  var totalCodeCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalCodeCount += rsBlocks[i].totalCount;\n  }\n  var data = new Array(totalCodeCount);\n  var index = 0;\n  for (var i = 0; i < maxDcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < dcdata[r].length) {\n        data[index++] = dcdata[r][i];\n      }\n    }\n  }\n  for (var i = 0; i < maxEcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < ecdata[r].length) {\n        data[index++] = ecdata[r][i];\n      }\n    }\n  }\n  return data;\n};\nvar QRMode = {\n  MODE_NUMBER: 1 << 0,\n  MODE_ALPHA_NUM: 1 << 1,\n  MODE_8BIT_BYTE: 1 << 2,\n  MODE_KANJI: 1 << 3,\n};\nvar QRErrorCorrectLevel = {\n  L: 1,\n  M: 0,\n  Q: 3,\n  H: 2,\n};\nvar QRMaskPattern = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7,\n};\nvar QRUtil = {\n  PATTERN_POSITION_TABLE: [\n    [],\n    [6, 18],\n    [6, 22],\n    [6, 26],\n    [6, 30],\n    [6, 34],\n    [6, 22, 38],\n    [6, 24, 42],\n    [6, 26, 46],\n    [6, 28, 50],\n    [6, 30, 54],\n    [6, 32, 58],\n    [6, 34, 62],\n    [6, 26, 46, 66],\n    [6, 26, 48, 70],\n    [6, 26, 50, 74],\n    [6, 30, 54, 78],\n    [6, 30, 56, 82],\n    [6, 30, 58, 86],\n    [6, 34, 62, 90],\n    [6, 28, 50, 72, 94],\n    [6, 26, 50, 74, 98],\n    [6, 30, 54, 78, 102],\n    [6, 28, 54, 80, 106],\n    [6, 32, 58, 84, 110],\n    [6, 30, 58, 86, 114],\n    [6, 34, 62, 90, 118],\n    [6, 26, 50, 74, 98, 122],\n    [6, 30, 54, 78, 102, 126],\n    [6, 26, 52, 78, 104, 130],\n    [6, 30, 56, 82, 108, 134],\n    [6, 34, 60, 86, 112, 138],\n    [6, 30, 58, 86, 114, 142],\n    [6, 34, 62, 90, 118, 146],\n    [6, 30, 54, 78, 102, 126, 150],\n    [6, 24, 50, 76, 102, 128, 154],\n    [6, 28, 54, 80, 106, 132, 158],\n    [6, 32, 58, 84, 110, 136, 162],\n    [6, 26, 54, 82, 110, 138, 166],\n    [6, 30, 58, 86, 114, 142, 170],\n  ],\n  G15:\n    (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n  G18:\n    (1 << 12) |\n    (1 << 11) |\n    (1 << 10) |\n    (1 << 9) |\n    (1 << 8) |\n    (1 << 5) |\n    (1 << 2) |\n    (1 << 0),\n  G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\n  getBCHTypeInfo: function (data) {\n    var d = data << 10;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n      d ^=\n        QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15));\n    }\n    return ((data << 10) | d) ^ QRUtil.G15_MASK;\n  },\n  getBCHTypeNumber: function (data) {\n    var d = data << 12;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n      d ^=\n        QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18));\n    }\n    return (data << 12) | d;\n  },\n  getBCHDigit: function (data) {\n    var digit = 0;\n    while (data != 0) {\n      digit++;\n      data >>>= 1;\n    }\n    return digit;\n  },\n  getPatternPosition: function (typeNumber) {\n    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n  },\n  getMask: function (maskPattern, i, j) {\n    switch (maskPattern) {\n      case QRMaskPattern.PATTERN000:\n        return (i + j) % 2 == 0;\n      case QRMaskPattern.PATTERN001:\n        return i % 2 == 0;\n      case QRMaskPattern.PATTERN010:\n        return j % 3 == 0;\n      case QRMaskPattern.PATTERN011:\n        return (i + j) % 3 == 0;\n      case QRMaskPattern.PATTERN100:\n        return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\n      case QRMaskPattern.PATTERN101:\n        return ((i * j) % 2) + ((i * j) % 3) == 0;\n      case QRMaskPattern.PATTERN110:\n        return (((i * j) % 2) + ((i * j) % 3)) % 2 == 0;\n      case QRMaskPattern.PATTERN111:\n        return (((i * j) % 3) + ((i + j) % 2)) % 2 == 0;\n      default:\n        throw new Error(\"bad maskPattern:\" + maskPattern);\n    }\n  },\n  getErrorCorrectPolynomial: function (errorCorrectLength) {\n    var a = new QRPolynomial([1], 0);\n    for (var i = 0; i < errorCorrectLength; i++) {\n      a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\n    }\n    return a;\n  },\n  getLengthInBits: function (mode, type) {\n    if (1 <= type && type < 10) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 10;\n        case QRMode.MODE_ALPHA_NUM:\n          return 9;\n        case QRMode.MODE_8BIT_BYTE:\n          return 8;\n        case QRMode.MODE_KANJI:\n          return 8;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 27) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 12;\n        case QRMode.MODE_ALPHA_NUM:\n          return 11;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 10;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 41) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 14;\n        case QRMode.MODE_ALPHA_NUM:\n          return 13;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 12;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else {\n      throw new Error(\"type:\" + type);\n    }\n  },\n  getLostPoint: function (qrCode) {\n    var moduleCount = qrCode.getModuleCount();\n    var lostPoint = 0;\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount; col++) {\n        var sameCount = 0;\n        var dark = qrCode.isDark(row, col);\n        for (var r = -1; r <= 1; r++) {\n          if (row + r < 0 || moduleCount <= row + r) {\n            continue;\n          }\n          for (var c = -1; c <= 1; c++) {\n            if (col + c < 0 || moduleCount <= col + c) {\n              continue;\n            }\n            if (r == 0 && c == 0) {\n              continue;\n            }\n            if (dark == qrCode.isDark(row + r, col + c)) {\n              sameCount++;\n            }\n          }\n        }\n        if (sameCount > 5) {\n          lostPoint += 3 + sameCount - 5;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount - 1; row++) {\n      for (var col = 0; col < moduleCount - 1; col++) {\n        var count = 0;\n        if (qrCode.isDark(row, col)) count++;\n        if (qrCode.isDark(row + 1, col)) count++;\n        if (qrCode.isDark(row, col + 1)) count++;\n        if (qrCode.isDark(row + 1, col + 1)) count++;\n        if (count == 0 || count == 4) {\n          lostPoint += 3;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount - 6; col++) {\n        if (\n          qrCode.isDark(row, col) &&\n          !qrCode.isDark(row, col + 1) &&\n          qrCode.isDark(row, col + 2) &&\n          qrCode.isDark(row, col + 3) &&\n          qrCode.isDark(row, col + 4) &&\n          !qrCode.isDark(row, col + 5) &&\n          qrCode.isDark(row, col + 6)\n        ) {\n          lostPoint += 40;\n        }\n      }\n    }\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount - 6; row++) {\n        if (\n          qrCode.isDark(row, col) &&\n          !qrCode.isDark(row + 1, col) &&\n          qrCode.isDark(row + 2, col) &&\n          qrCode.isDark(row + 3, col) &&\n          qrCode.isDark(row + 4, col) &&\n          !qrCode.isDark(row + 5, col) &&\n          qrCode.isDark(row + 6, col)\n        ) {\n          lostPoint += 40;\n        }\n      }\n    }\n    var darkCount = 0;\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount; row++) {\n        if (qrCode.isDark(row, col)) {\n          darkCount++;\n        }\n      }\n    }\n    var ratio =\n      Math.abs((100 * darkCount) / moduleCount / moduleCount - 50) / 5;\n    lostPoint += ratio * 10;\n    return lostPoint;\n  },\n};\nvar QRMath = {\n  glog: function (n) {\n    if (n < 1) {\n      throw new Error(\"glog(\" + n + \")\");\n    }\n    return QRMath.LOG_TABLE[n];\n  },\n  gexp: function (n) {\n    while (n < 0) {\n      n += 255;\n    }\n    while (n >= 256) {\n      n -= 255;\n    }\n    return QRMath.EXP_TABLE[n];\n  },\n  EXP_TABLE: new Array(256),\n  LOG_TABLE: new Array(256),\n};\nfor (var i = 0; i < 8; i++) {\n  QRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n  QRMath.EXP_TABLE[i] =\n    QRMath.EXP_TABLE[i - 4] ^\n    QRMath.EXP_TABLE[i - 5] ^\n    QRMath.EXP_TABLE[i - 6] ^\n    QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n  QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\n}\nfunction QRPolynomial(num, shift) {\n  if (num.length == undefined) {\n    throw new Error(num.length + \"/\" + shift);\n  }\n  var offset = 0;\n  while (offset < num.length && num[offset] == 0) {\n    offset++;\n  }\n  this.num = new Array(num.length - offset + shift);\n  for (var i = 0; i < num.length - offset; i++) {\n    this.num[i] = num[i + offset];\n  }\n}\n\nQRPolynomial.prototype = {\n  get: function (index) {\n    return this.num[index];\n  },\n  getLength: function () {\n    return this.num.length;\n  },\n  multiply: function (e) {\n    var num = new Array(this.getLength() + e.getLength() - 1);\n    for (var i = 0; i < this.getLength(); i++) {\n      for (var j = 0; j < e.getLength(); j++) {\n        num[i + j] ^= QRMath.gexp(\n          QRMath.glog(this.get(i)) + QRMath.glog(e.get(j))\n        );\n      }\n    }\n    return new QRPolynomial(num, 0);\n  },\n  mod: function (e) {\n    if (this.getLength() - e.getLength() < 0) {\n      return this;\n    }\n    var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\n    var num = new Array(this.getLength());\n    for (var i = 0; i < this.getLength(); i++) {\n      num[i] = this.get(i);\n    }\n    for (var i = 0; i < e.getLength(); i++) {\n      num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\n    }\n    return new QRPolynomial(num, 0).mod(e);\n  },\n};\nfunction QRRSBlock(totalCount, dataCount) {\n  this.totalCount = totalCount;\n  this.dataCount = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n  [1, 26, 19],\n  [1, 26, 16],\n  [1, 26, 13],\n  [1, 26, 9],\n  [1, 44, 34],\n  [1, 44, 28],\n  [1, 44, 22],\n  [1, 44, 16],\n  [1, 70, 55],\n  [1, 70, 44],\n  [2, 35, 17],\n  [2, 35, 13],\n  [1, 100, 80],\n  [2, 50, 32],\n  [2, 50, 24],\n  [4, 25, 9],\n  [1, 134, 108],\n  [2, 67, 43],\n  [2, 33, 15, 2, 34, 16],\n  [2, 33, 11, 2, 34, 12],\n  [2, 86, 68],\n  [4, 43, 27],\n  [4, 43, 19],\n  [4, 43, 15],\n  [2, 98, 78],\n  [4, 49, 31],\n  [2, 32, 14, 4, 33, 15],\n  [4, 39, 13, 1, 40, 14],\n  [2, 121, 97],\n  [2, 60, 38, 2, 61, 39],\n  [4, 40, 18, 2, 41, 19],\n  [4, 40, 14, 2, 41, 15],\n  [2, 146, 116],\n  [3, 58, 36, 2, 59, 37],\n  [4, 36, 16, 4, 37, 17],\n  [4, 36, 12, 4, 37, 13],\n  [2, 86, 68, 2, 87, 69],\n  [4, 69, 43, 1, 70, 44],\n  [6, 43, 19, 2, 44, 20],\n  [6, 43, 15, 2, 44, 16],\n  [4, 101, 81],\n  [1, 80, 50, 4, 81, 51],\n  [4, 50, 22, 4, 51, 23],\n  [3, 36, 12, 8, 37, 13],\n  [2, 116, 92, 2, 117, 93],\n  [6, 58, 36, 2, 59, 37],\n  [4, 46, 20, 6, 47, 21],\n  [7, 42, 14, 4, 43, 15],\n  [4, 133, 107],\n  [8, 59, 37, 1, 60, 38],\n  [8, 44, 20, 4, 45, 21],\n  [12, 33, 11, 4, 34, 12],\n  [3, 145, 115, 1, 146, 116],\n  [4, 64, 40, 5, 65, 41],\n  [11, 36, 16, 5, 37, 17],\n  [11, 36, 12, 5, 37, 13],\n  [5, 109, 87, 1, 110, 88],\n  [5, 65, 41, 5, 66, 42],\n  [5, 54, 24, 7, 55, 25],\n  [11, 36, 12],\n  [5, 122, 98, 1, 123, 99],\n  [7, 73, 45, 3, 74, 46],\n  [15, 43, 19, 2, 44, 20],\n  [3, 45, 15, 13, 46, 16],\n  [1, 135, 107, 5, 136, 108],\n  [10, 74, 46, 1, 75, 47],\n  [1, 50, 22, 15, 51, 23],\n  [2, 42, 14, 17, 43, 15],\n  [5, 150, 120, 1, 151, 121],\n  [9, 69, 43, 4, 70, 44],\n  [17, 50, 22, 1, 51, 23],\n  [2, 42, 14, 19, 43, 15],\n  [3, 141, 113, 4, 142, 114],\n  [3, 70, 44, 11, 71, 45],\n  [17, 47, 21, 4, 48, 22],\n  [9, 39, 13, 16, 40, 14],\n  [3, 135, 107, 5, 136, 108],\n  [3, 67, 41, 13, 68, 42],\n  [15, 54, 24, 5, 55, 25],\n  [15, 43, 15, 10, 44, 16],\n  [4, 144, 116, 4, 145, 117],\n  [17, 68, 42],\n  [17, 50, 22, 6, 51, 23],\n  [19, 46, 16, 6, 47, 17],\n  [2, 139, 111, 7, 140, 112],\n  [17, 74, 46],\n  [7, 54, 24, 16, 55, 25],\n  [34, 37, 13],\n  [4, 151, 121, 5, 152, 122],\n  [4, 75, 47, 14, 76, 48],\n  [11, 54, 24, 14, 55, 25],\n  [16, 45, 15, 14, 46, 16],\n  [6, 147, 117, 4, 148, 118],\n  [6, 73, 45, 14, 74, 46],\n  [11, 54, 24, 16, 55, 25],\n  [30, 46, 16, 2, 47, 17],\n  [8, 132, 106, 4, 133, 107],\n  [8, 75, 47, 13, 76, 48],\n  [7, 54, 24, 22, 55, 25],\n  [22, 45, 15, 13, 46, 16],\n  [10, 142, 114, 2, 143, 115],\n  [19, 74, 46, 4, 75, 47],\n  [28, 50, 22, 6, 51, 23],\n  [33, 46, 16, 4, 47, 17],\n  [8, 152, 122, 4, 153, 123],\n  [22, 73, 45, 3, 74, 46],\n  [8, 53, 23, 26, 54, 24],\n  [12, 45, 15, 28, 46, 16],\n  [3, 147, 117, 10, 148, 118],\n  [3, 73, 45, 23, 74, 46],\n  [4, 54, 24, 31, 55, 25],\n  [11, 45, 15, 31, 46, 16],\n  [7, 146, 116, 7, 147, 117],\n  [21, 73, 45, 7, 74, 46],\n  [1, 53, 23, 37, 54, 24],\n  [19, 45, 15, 26, 46, 16],\n  [5, 145, 115, 10, 146, 116],\n  [19, 75, 47, 10, 76, 48],\n  [15, 54, 24, 25, 55, 25],\n  [23, 45, 15, 25, 46, 16],\n  [13, 145, 115, 3, 146, 116],\n  [2, 74, 46, 29, 75, 47],\n  [42, 54, 24, 1, 55, 25],\n  [23, 45, 15, 28, 46, 16],\n  [17, 145, 115],\n  [10, 74, 46, 23, 75, 47],\n  [10, 54, 24, 35, 55, 25],\n  [19, 45, 15, 35, 46, 16],\n  [17, 145, 115, 1, 146, 116],\n  [14, 74, 46, 21, 75, 47],\n  [29, 54, 24, 19, 55, 25],\n  [11, 45, 15, 46, 46, 16],\n  [13, 145, 115, 6, 146, 116],\n  [14, 74, 46, 23, 75, 47],\n  [44, 54, 24, 7, 55, 25],\n  [59, 46, 16, 1, 47, 17],\n  [12, 151, 121, 7, 152, 122],\n  [12, 75, 47, 26, 76, 48],\n  [39, 54, 24, 14, 55, 25],\n  [22, 45, 15, 41, 46, 16],\n  [6, 151, 121, 14, 152, 122],\n  [6, 75, 47, 34, 76, 48],\n  [46, 54, 24, 10, 55, 25],\n  [2, 45, 15, 64, 46, 16],\n  [17, 152, 122, 4, 153, 123],\n  [29, 74, 46, 14, 75, 47],\n  [49, 54, 24, 10, 55, 25],\n  [24, 45, 15, 46, 46, 16],\n  [4, 152, 122, 18, 153, 123],\n  [13, 74, 46, 32, 75, 47],\n  [48, 54, 24, 14, 55, 25],\n  [42, 45, 15, 32, 46, 16],\n  [20, 147, 117, 4, 148, 118],\n  [40, 75, 47, 7, 76, 48],\n  [43, 54, 24, 22, 55, 25],\n  [10, 45, 15, 67, 46, 16],\n  [19, 148, 118, 6, 149, 119],\n  [18, 75, 47, 31, 76, 48],\n  [34, 54, 24, 34, 55, 25],\n  [20, 45, 15, 61, 46, 16],\n];\nQRRSBlock.getRSBlocks = function (typeNumber, errorCorrectLevel) {\n  var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n  if (rsBlock == undefined) {\n    throw new Error(\n      \"bad rs block @ typeNumber:\" +\n        typeNumber +\n        \"/errorCorrectLevel:\" +\n        errorCorrectLevel\n    );\n  }\n  var length = rsBlock.length / 3;\n  var list = [];\n  for (var i = 0; i < length; i++) {\n    var count = rsBlock[i * 3 + 0];\n    var totalCount = rsBlock[i * 3 + 1];\n    var dataCount = rsBlock[i * 3 + 2];\n    for (var j = 0; j < count; j++) {\n      list.push(new QRRSBlock(totalCount, dataCount));\n    }\n  }\n  return list;\n};\nQRRSBlock.getRsBlockTable = function (typeNumber, errorCorrectLevel) {\n  switch (errorCorrectLevel) {\n    case QRErrorCorrectLevel.L:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n    case QRErrorCorrectLevel.M:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n    case QRErrorCorrectLevel.Q:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n    case QRErrorCorrectLevel.H:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n    default:\n      return undefined;\n  }\n};\nfunction QRBitBuffer() {\n  this.buffer = [];\n  this.length = 0;\n}\n\nQRBitBuffer.prototype = {\n  get: function (index) {\n    var bufIndex = Math.floor(index / 8);\n    return ((this.buffer[bufIndex] >>> (7 - (index % 8))) & 1) == 1;\n  },\n  put: function (num, length) {\n    for (var i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) == 1);\n    }\n  },\n  getLengthInBits: function () {\n    return this.length;\n  },\n  putBit: function (bit) {\n    var bufIndex = Math.floor(this.length / 8);\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0);\n    }\n    if (bit) {\n      this.buffer[bufIndex] |= 0x80 >>> this.length % 8;\n    }\n    this.length++;\n  },\n};\nvar QRCodeLimitLength = [\n  [17, 14, 11, 7],\n  [32, 26, 20, 14],\n  [53, 42, 32, 24],\n  [78, 62, 46, 34],\n  [106, 84, 60, 44],\n  [134, 106, 74, 58],\n  [154, 122, 86, 64],\n  [192, 152, 108, 84],\n  [230, 180, 130, 98],\n  [271, 213, 151, 119],\n  [321, 251, 177, 137],\n  [367, 287, 203, 155],\n  [425, 331, 241, 177],\n  [458, 362, 258, 194],\n  [520, 412, 292, 220],\n  [586, 450, 322, 250],\n  [644, 504, 364, 280],\n  [718, 560, 394, 310],\n  [792, 624, 442, 338],\n  [858, 666, 482, 382],\n  [929, 711, 509, 403],\n  [1003, 779, 565, 439],\n  [1091, 857, 611, 461],\n  [1171, 911, 661, 511],\n  [1273, 997, 715, 535],\n  [1367, 1059, 751, 593],\n  [1465, 1125, 805, 625],\n  [1528, 1190, 868, 658],\n  [1628, 1264, 908, 698],\n  [1732, 1370, 982, 742],\n  [1840, 1452, 1030, 790],\n  [1952, 1538, 1112, 842],\n  [2068, 1628, 1168, 898],\n  [2188, 1722, 1228, 958],\n  [2303, 1809, 1283, 983],\n  [2431, 1911, 1351, 1051],\n  [2563, 1989, 1423, 1093],\n  [2699, 2099, 1499, 1139],\n  [2809, 2213, 1579, 1219],\n  [2953, 2331, 1663, 1273],\n];\n\n// Drawing in Canvas\nvar Drawing = (function () {\n  function _onMakeImage() {\n    this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n    this._elImage.style.display = \"block\";\n    this._elCanvas.style.display = \"none\";\n  }\n\n  /**\n   * Check whether the user's browser supports Data URI or not\n   *\n   * @private\n   * @param {Function} fSuccess Occurs if it supports Data URI\n   * @param {Function} fFail Occurs if it doesn't support Data URI\n   */\n  function _safeSetDataURI(fSuccess, fFail) {\n    var self = this;\n    self._fFail = fFail;\n    self._fSuccess = fSuccess;\n\n    // Check it just once\n    if (self._bSupportDataURI === null) {\n      var el = document.createElement(\"img\");\n      var fOnError = function () {\n        self._bSupportDataURI = false;\n\n        if (self._fFail) {\n          self._fFail.call(self);\n        }\n      };\n      var fOnSuccess = function () {\n        self._bSupportDataURI = true;\n\n        if (self._fSuccess) {\n          self._fSuccess.call(self);\n        }\n      };\n\n      el.onabort = fOnError;\n      el.onerror = fOnError;\n      el.onload = fOnSuccess;\n      el.src =\n        \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n      return;\n    } else if (self._bSupportDataURI === true && self._fSuccess) {\n      self._fSuccess.call(self);\n    } else if (self._bSupportDataURI === false && self._fFail) {\n      self._fFail.call(self);\n    }\n  }\n\n  /**\n   * get a material to draw\n   *\n   * @private\n   * @param {String | Array} material input the original material\n   *\n   */\n  function _getRealMaterial(material) {\n    if (material instanceof Array) {\n      return material[Math.floor(Math.random() * material.length)];\n    } else {\n      return material;\n    }\n  }\n\n  /**\n   * Drawing QRCode by using canvas\n   *\n   * @constructor\n   *\n   * @param {HTMLElement} el\n   * @param {Object} htOption QRCode Options\n   */\n  var Drawing = function (el, htOption) {\n    this._bIsPainted = false;\n    this._htOption = htOption;\n    this._elCanvas = document.createElement(\"canvas\");\n    this._elCanvas.style.display = \"none\";\n\n    /**\n     * 解决 canvas模糊的问题\n     * 图像放大二倍，在实际dom中再缩小为50%\n     * */\n\n    this._elCanvas.width = htOption.width * 2;\n    this._elCanvas.height = htOption.height * 2;\n    el.appendChild(this._elCanvas);\n    this._el = el;\n    this._oContext = this._elCanvas.getContext(\"2d\");\n    this._oContext.scale(2, 2);\n\n    this._bIsPainted = false;\n    this._elImage = document.createElement(\"img\");\n    this._elImage.alt = \"Scan me!\";\n    this._elImage.style.width = htOption.width + \"px\";\n    this._elImage.style.height = htOption.height + \"px\";\n\n    this._elImage.style.display = \"none\";\n    this._el.appendChild(this._elImage);\n    this._bSupportDataURI = null;\n  };\n\n  /**\n   * Draw the QRCode\n   * @param {QRCode} oQRCode\n   */\n\n  Drawing.prototype.draw = function (oQRCode) {\n    var _elImage = this._elImage;\n    var _oContext = this._oContext;\n    var _htOption = this._htOption;\n\n    var nCount = oQRCode.getModuleCount();\n    var nWidth = _htOption.codeWidth / nCount;\n    var nHeight = _htOption.codeHeight / nCount;\n    var bgWidth = _htOption.width;\n    var bgHeight = _htOption.height;\n    var top = _htOption.top;\n    var left = _htOption.left;\n    var materials = _htOption.materials;\n    var drawModules = JSON.parse(JSON.stringify(oQRCode.modules));\n\n    _elImage.style.display = \"none\";\n    this.clear();\n\n    // draw art-qrcode background\n    _oContext.fillStyle = _htOption.colorLight;\n    materials.border\n      ? _oContext.drawImage(materials.border, 0, 0, bgWidth, bgHeight)\n      : _oContext.fillRect(0, 0, bgWidth, bgHeight);\n\n    /**\n     * judging whether the current unit satisfies this material Rule\n     *\n     * @private\n     * @param {Number} row the current row index\n     * @param {Number} col the current col index\n     * @param {Number} rowRange the row index Range\n     * @param {Number} colRange the col index Range\n     *\n     */\n    function _isSatisfyUnit(row, col, rowRange, colRange) {\n      var isSatisfy = true;\n      if (!(row + rowRange <= nCount) || !(col + colRange <= nCount)) {\n        return false;\n      }\n      for (var i = 0; i < rowRange; i++) {\n        for (var j = 0; j < colRange; j++) {\n          if (!drawModules[row + i][col + j]) {\n            return false;\n          }\n        }\n      }\n      return isSatisfy;\n    }\n\n    /**\n     * When the material is drawn, modify the draw modules\n     *\n     * @private\n     * @param {Number} row the current row index\n     * @param {Number} col the current col index\n     * @param {Number} rowRange the row index Range\n     * @param {Number} colRange the col index Range\n     *\n     */\n    function _updateDrawModules(row, col, rowRange, colRange) {\n      for (var i = 0; i < rowRange; i++) {\n        for (var j = 0; j < colRange; j++) {\n          drawModules[row + i][col + j] = false;\n        }\n      }\n    }\n\n    // draw normal material\n    for (var row = 0; row < nCount; row++) {\n      for (var col = 0; col < nCount; col++) {\n        // var bIsDark = oQRCode.isDark(row, col);\n        var nLeft = col * nWidth + left;\n        var nTop = row * nHeight + top;\n\n        if (drawModules[row][col]) {\n          //draw eye\n          if (\n            materials.eye &&\n            ((row == 0 && col == 0) ||\n              (row + 7 == nCount && col == 0) ||\n              (row == 0 && col + 7 == nCount))\n          ) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.eye),\n              nLeft,\n              nTop,\n              nWidth * 7,\n              nHeight * 7\n            );\n            _updateDrawModules(row, col, 7, 7);\n          }\n          //draw row2col3\n          else if (materials.row2col3 && _isSatisfyUnit(row, col, 2, 3)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row2col3),\n              nLeft,\n              nTop,\n              nWidth * 3,\n              nHeight * 2\n            );\n            _updateDrawModules(row, col, 2, 3);\n          }\n          //draw row3col2\n          else if (materials.row3col2 && _isSatisfyUnit(row, col, 3, 2)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row3col2),\n              nLeft,\n              nTop,\n              nWidth * 2,\n              nHeight * 3\n            );\n            _updateDrawModules(row, col, 3, 2);\n          }\n          //draw row4\n          else if (materials.row4 && _isSatisfyUnit(row, col, 4, 1)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row4),\n              nLeft,\n              nTop,\n              nWidth * 1,\n              nHeight * 4\n            );\n            _updateDrawModules(row, col, 4, 1);\n          }\n          // draw col4\n          else if (materials.col4 && _isSatisfyUnit(row, col, 1, 4)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.col4),\n              nLeft,\n              nTop,\n              nWidth * 4,\n              nHeight\n            );\n            _updateDrawModules(row, col, 1, 4);\n          }\n          //draw row2col2\n          else if (materials.row2col2 && _isSatisfyUnit(row, col, 2, 2)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row2col2),\n              nLeft,\n              nTop,\n              nWidth * 2,\n              nHeight * 2\n            );\n            _updateDrawModules(row, col, 2, 2);\n          }\n          //draw row3\n          else if (materials.row3 && _isSatisfyUnit(row, col, 3, 1)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row3),\n              nLeft,\n              nTop,\n              nWidth,\n              nHeight * 3\n            );\n            _updateDrawModules(row, col, 3, 1);\n          }\n          //draw col3\n          else if (materials.col3 && _isSatisfyUnit(row, col, 1, 3)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.col3),\n              nLeft,\n              nTop,\n              nWidth * 3,\n              nHeight\n            );\n            _updateDrawModules(row, col, 1, 3);\n          }\n          //draw corner\n          else if (\n            materials.corner &&\n            _isSatisfyUnit(row, col, 2, 1) &&\n            _isSatisfyUnit(row, col, 1, 2)\n          ) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.corner),\n              nLeft,\n              nTop,\n              nWidth * 2,\n              nHeight * 2\n            );\n            _updateDrawModules(row, col, 2, 2);\n          }\n          //draw row2\n          else if (materials.row2 && _isSatisfyUnit(row, col, 2, 1)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.row2),\n              nLeft,\n              nTop,\n              nWidth,\n              nHeight * 2\n            );\n            _updateDrawModules(row, col, 2, 1);\n          }\n          //draw col2\n          else if (materials.col2 && _isSatisfyUnit(row, col, 1, 2)) {\n            _oContext.drawImage(\n              _getRealMaterial(materials.col2),\n              nLeft,\n              nTop,\n              nWidth * 2,\n              nHeight\n            );\n            _updateDrawModules(row, col, 1, 2);\n          }\n          //draw single\n          else if (materials.single && drawModules[row][col]) {\n            // console.log(materials.single)\n            _oContext.drawImage(\n              _getRealMaterial(materials.single),\n              nLeft,\n              nTop,\n              nWidth,\n              nHeight\n            );\n            drawModules[row][col] = false;\n          }\n          // none material draw colorDark\n          else {\n            _oContext.fillStyle = _htOption.colorDark;\n            _oContext.fillRect(nLeft, nTop, nWidth, nHeight);\n            drawModules[row][col] = false;\n          }\n        }\n      }\n    }\n\n    this._bIsPainted = true;\n  };\n\n  /**\n   * Make the image from Canvas if the browser supports Data URI.\n   */\n  Drawing.prototype.makeImage = function () {\n    if (this._bIsPainted) {\n      _safeSetDataURI.call(this, _onMakeImage);\n    }\n  };\n\n  /**\n   * Return whether the QRCode is painted or not\n   *\n   * @return {Boolean}\n   */\n  Drawing.prototype.isPainted = function () {\n    return this._bIsPainted;\n  };\n\n  /**\n   * Clear the QRCode\n   */\n  Drawing.prototype.clear = function () {\n    this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n    this._bIsPainted = false;\n  };\n\n  /**\n   * @private\n   * @param {Number} nNumber\n   */\n  Drawing.prototype.round = function (nNumber) {\n    if (!nNumber) {\n      return nNumber;\n    }\n\n    return Math.floor(nNumber * 1000) / 1000;\n  };\n\n  Drawing.prototype.getImgSrc = function () {\n    return this._elCanvas.toDataURL(\"image/png\");\n  };\n\n  return Drawing;\n})();\n\n/**\n * Get the type by string length\n *\n * @private\n * @param {String} sText\n * @param {Number} nCorrectLevel\n * @return {Number} type\n */\nfunction _getTypeNumber(sText, nCorrectLevel) {\n  var nType = 1;\n  var length = _getUTF8Length(sText);\n\n  for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n    var nLimit = 0;\n\n    switch (nCorrectLevel) {\n      case QRErrorCorrectLevel.L:\n        nLimit = QRCodeLimitLength[i][0];\n        break;\n      case QRErrorCorrectLevel.M:\n        nLimit = QRCodeLimitLength[i][1];\n        break;\n      case QRErrorCorrectLevel.Q:\n        nLimit = QRCodeLimitLength[i][2];\n        break;\n      case QRErrorCorrectLevel.H:\n        nLimit = QRCodeLimitLength[i][3];\n        break;\n    }\n\n    if (length <= nLimit) {\n      break;\n    } else {\n      nType++;\n    }\n  }\n\n  if (nType > QRCodeLimitLength.length) {\n    throw new Error(\"Too long data\");\n  }\n\n  return nType;\n}\n\nfunction _getUTF8Length(sText) {\n  var replacedText = encodeURI(sText)\n    .toString()\n    .replace(/\\%[0-9a-fA-F]{2}/g, \"a\");\n  return replacedText.length + (replacedText.length != sText ? 3 : 0);\n}\n\n/**\n * @class QRCode\n * @constructor\n * @example\n * new QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\n *\n * @example\n * var oQRCode = new QRCode(\"test\", {\n *    text : \"http://naver.com\",\n *    width : 128,\n *    height : 128\n * });\n *\n * oQRCode.clear(); // Clear the QRCode.\n * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the QRCode.\n *\n * @param {HTMLElement|String} el target element or 'id' attribute of element.\n * @param {Object|String} vOption\n * @param {String} vOption.text QRCode link data\n * @param {Number} [vOption.width=256]\n * @param {Number} [vOption.height=256]\n * @param {Number} [vOption.bgWidth=350]\n * @param {Number} [vOption.bgHeight=500]\n * @param {String} [vOption.colorDark=\"#000000\"]\n * @param {String} [vOption.colorLight=\"#ffffff\"]\n * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H]\n * @param {Object} [vOption.materials={eye:\"\",row2col3:\"\",row3col2:\"\",row4:\"\",col4:\"\",row3:\"\",col3:\"\",row2col2:\"\",corner:\"\",col2:\"\",row2:\"\",single:\"\"}]\n * @param {Function} callback monitor the progress of drawing\n */\n\nQRCode = function (el, vOption, callback) {\n  this._htOption = {\n    width: 256,\n    height: 256,\n    bgWidth: 256,\n    bgHeight: 256,\n    codeWidth: 256,\n    codeHeight: 256,\n    top: 0,\n    left: 0,\n    typeNumber: 4,\n    colorDark: \"#000000\",\n    colorLight: \"#ffffff\",\n    correctLevel: QRErrorCorrectLevel.L,\n    // material options\n    materials: {\n      eye: \"\",\n      row2col3: \"\",\n      row3col2: \"\",\n      row4: \"\",\n      col4: \"\",\n      row3: \"\",\n      col3: \"\",\n      row2col2: \"\",\n      corner: \"\",\n      col2: \"\",\n      row2: \"\",\n      single: \"\",\n    },\n  };\n  if (typeof vOption === \"string\") {\n    vOption = {\n      text: vOption,\n    };\n  }\n  // Overwrites options\n  if (vOption) {\n    for (var i in vOption) {\n      this._htOption[i] = vOption[i];\n    }\n  }\n  if (!vOption.codeWidth) {\n    this._htOption.codeWidth = this._htOption.width;\n  }\n  if (!vOption.codeHeight) {\n    this._htOption.codeHeight = this._htOption.height;\n  }\n  if (typeof el == \"string\") {\n    el = document.getElementById(el);\n  }\n  if (typeof callback == \"function\") {\n    this._callback = callback;\n  }\n\n  this._el = el;\n  this._oQRCode = null;\n  this._oDrawing = new Drawing(this._el, this._htOption);\n\n  if (this._htOption.text) {\n    this.loadMaterial(this._htOption.text);\n    // this.makeCode(this._htOption.text);\n  }\n};\n\n/**\n *\n * Make the QRCode\n * @param {String} sText link data\n *\n */\n\nQRCode.prototype.makeCode = function (sText) {\n  this._oQRCode = new QRCodeModel(\n    _getTypeNumber(sText, this._htOption.correctLevel),\n    this._htOption.correctLevel\n  );\n  this._oQRCode.addData(sText);\n  this._oQRCode.make();\n  this._el.title = sText;\n  this._oDrawing.draw(this._oQRCode);\n  this.makeImage();\n  this._callback && this._callback.call(null, \"success\");\n};\n\n/**\n * load all materials\n */\nQRCode.prototype.loadMaterial = function (sText) {\n  var self = this;\n  var count = 0;\n  var materials = Object.getOwnPropertyNames(this._htOption.materials);\n  var materialsLength = materials.length;\n\n  function materialsLoaded() {\n    count++;\n    if (count === materialsLength) {\n      // material all loaded then draw\n      self._callback && self._callback.call(null, \"loaded\");\n      setTimeout(function () {\n        self.makeCode(sText);\n      }, 500);\n    }\n  }\n\n  for (var i = 0; i < materialsLength; i++) {\n    var prop = materials[i];\n    var src = this._htOption.materials[prop];\n\n    if (!src) {\n      materialsLoaded();\n    } else if (typeof src == \"string\") {\n      this._htOption.materials[prop] = new Image();\n      this._htOption.materials[prop].src = src;\n      this._htOption.materials[prop].setAttribute(\"crossOrigin\", \"anonymous\");\n      this._htOption.materials[prop].onload = materialsLoaded.bind(this);\n    } else if (src instanceof Array) {\n      for (var j = 0; j < src.length; j++) {\n        j && materialsLength++;\n        var childSrc = this._htOption.materials[prop][j];\n        this._htOption.materials[prop][j] = new Image();\n        this._htOption.materials[prop][j].src = childSrc;\n        this._htOption.materials[prop][j].setAttribute(\n          \"crossOrigin\",\n          \"anonymous\"\n        );\n        this._htOption.materials[prop][j].onload = materialsLoaded.bind(this);\n      }\n    }\n  }\n};\n\n/**\n * Make the Image from Canvas element\n * - It occurs automatically\n * - Android below 3 doesn't support Data-URI spec.\n *\n * @private\n */\nQRCode.prototype.makeImage = function () {\n  if (typeof this._oDrawing.makeImage == \"function\") {\n    this._oDrawing.makeImage();\n  }\n};\n\n/**\n * Clear the QRCode\n */\nQRCode.prototype.clear = function () {\n  this._oDrawing.clear();\n};\n\n/**\n *\n * return the QRCode URL\n */\nQRCode.prototype.getImgUrl = function () {\n  return this._oDrawing.getImgSrc();\n};\n\n/**\n * @name QRCode.CorrectLevel\n */\nQRCode.CorrectLevel = QRErrorCorrectLevel;\n\nexport default QRCode;\n","<template>\n  <div class=\"page-wrapper page-qrcode flex\">\n    <el-form class=\"form-wrapper\" label-width=\"100px\" :model=\"form\">\n      <el-form-item label=\"类型：\">\n        <el-radio-group v-model=\"form.type\">\n          <el-radio-button label=\"qrcode\">二维码</el-radio-button>\n          <el-radio-button label=\"barcode\">条形码</el-radio-button>\n          <el-radio-button label=\"artcode\">艺术码</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"内容：\">\n        <el-input v-model=\"form.text\" type=\"textarea\" resize=\"none\" />\n      </el-form-item>\n      <template v-if=\"form.type === 'qrcode'\">\n        <el-form-item label=\"大小：\">\n          <el-input-number\n            v-model=\"form.qrcode.width\"\n            :min=\"100\"\n            :max=\"1000\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"边距：\">\n          <el-input-number\n            v-model=\"form.qrcode.margin\"\n            :min=\"0\"\n            :max=\"10\"\n            :step=\"0.1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"质量：\">\n          <el-input-number\n            v-model=\"form.qrcode.quality\"\n            :min=\"0\"\n            :max=\"1\"\n            :step=\"0.01\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"颜色：\">\n          <el-color-picker v-model=\"form.qrcode.colorDark\" />\n        </el-form-item>\n        <el-form-item label=\"背景：\">\n          <el-color-picker v-model=\"form.qrcode.colorLight\" />\n        </el-form-item>\n        <el-form-item label=\"纠错级别：\">\n          <el-radio-group v-model=\"form.qrcode.errorCorrectionLevel\">\n            <el-radio label=\"L\"></el-radio>\n            <el-radio label=\"M\"></el-radio>\n            <el-radio label=\"Q\"></el-radio>\n            <el-radio label=\"H\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"图片类型：\">\n          <el-radio-group v-model=\"form.qrcode.type\">\n            <el-radio label=\"image/png\">png</el-radio>\n            <el-radio label=\"image/jpeg\">jpeg</el-radio>\n            <el-radio label=\"image/webp\">webp</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </template>\n      <template v-else-if=\"form.type === 'barcode'\">\n        <el-form-item label=\"条码类型：\">\n          <el-select v-model=\"form.barcode.format\">\n            <el-option\n              v-for=\"item in barcodeFormatOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"条形宽度：\">\n          <el-input-number\n            v-model=\"form.barcode.width\"\n            :min=\"1\"\n            :max=\"10\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"高度：\">\n          <el-input-number\n            v-model=\"form.barcode.height\"\n            :min=\"20\"\n            :max=\"1000\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"边距：\">\n          <el-input-number\n            v-model=\"form.barcode.margin\"\n            :min=\"0\"\n            :max=\"100\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"颜色：\">\n          <el-color-picker v-model=\"form.barcode.lineColor\" />\n        </el-form-item>\n        <el-form-item label=\"背景：\">\n          <el-color-picker v-model=\"form.barcode.background\" />\n        </el-form-item>\n        <el-form-item label=\"是否展示文字：\">\n          <el-switch v-model=\"form.barcode.displayValue\" />\n        </el-form-item>\n        <template v-if=\"form.barcode.displayValue\">\n          <el-form-item label=\"文字：\">\n            <el-input v-model=\"form.barcode.text\" placeholder=\"不填则默认条码内容\" />\n          </el-form-item>\n          <el-form-item label=\"文字样式：\">\n            <el-select v-model=\"form.barcode.fontOptions\">\n              <el-option label=\"默认\" value=\"\" />\n              <el-option label=\"加粗\" value=\"bold\" />\n              <el-option label=\"斜体\" value=\"italic\" />\n              <el-option label=\"斜体加粗\" value=\"bold italic\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"文字对齐：\">\n            <el-radio-group v-model=\"form.barcode.textAlign\">\n              <el-radio-button label=\"left\">靠左</el-radio-button>\n              <el-radio-button label=\"center\">居中</el-radio-button>\n              <el-radio-button label=\"right\">靠右</el-radio-button>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"文字位置：\">\n            <el-radio-group v-model=\"form.barcode.textPosition\">\n              <el-radio-button label=\"top\">上</el-radio-button>\n              <el-radio-button label=\"bottom\">下</el-radio-button>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"文字大小：\">\n            <el-input-number\n              v-model=\"form.barcode.fontSize\"\n              :min=\"10\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n          </el-form-item>\n          <el-form-item label=\"文字条码间隔：\">\n            <el-input-number\n              v-model=\"form.barcode.textMargin\"\n              :min=\"0\"\n              :max=\"100\"\n              :step=\"1\"\n              step-strictly\n            />\n          </el-form-item>\n        </template>\n      </template>\n      <template v-else-if=\"form.type === 'artcode'\">\n        <el-form-item label=\"宽度：\">\n          <el-input-number\n            v-model=\"form.artcode.width\"\n            :min=\"102\"\n            :max=\"1000\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"边框：\">\n          <el-switch v-model=\"form.artcode.border\" />\n        </el-form-item>\n        <el-form-item label=\"边距：\" v-if=\"!form.artcode.border\">\n          <el-input-number\n            v-model=\"form.artcode.margin\"\n            :min=\"0\"\n            :max=\"(form.artcode.width - 100) / 2\"\n            :step=\"1\"\n            step-strictly\n          />\n        </el-form-item>\n        <el-form-item label=\"主题：\">\n          <el-radio-group v-model=\"form.artcode.theme\">\n            <el-radio label=\"electron\">电子元件</el-radio>\n            <el-radio label=\"cookie\">饼干</el-radio>\n            <el-radio label=\"pink\">公主粉</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </template>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleUpdate\" :loading=\"loading\">生成</el-button>\n        <el-button @click=\"handleReset\">重置</el-button>\n      </el-form-item>\n    </el-form>\n    <div class=\"show-wrapper\">\n      <div class=\"show-box qrcode\" v-show=\"!loading && form.type === 'qrcode' && qrcode.src\">\n        <img :src=\"qrcode.src\" alt=\"二维码\">\n        <div class=\"box-options flex-vh\">\n          <div>大小：{{ qrcode.size }} x {{ qrcode.size }}</div>\n          <el-link class=\"download-btn flex-vh\" :underline=\"false\" :href=\"qrcode.src\" download=\"qrcode\">\n            <el-icon>\n              <component :is=\"'Download'\"></component>\n            </el-icon>\n          </el-link>\n        </div>\n      </div>\n      <div class=\"show-box barcode\" v-show=\"!loading && form.type === 'barcode' && barcode.success\">\n        <img id=\"barcode\" />\n        <div class=\"box-options flex-vh\">\n          <div>高度：{{ barcode.size }}</div>\n          <el-link class=\"download-btn flex-vh\" :underline=\"false\" @click=\"handleDownloadBarcode\">\n            <el-icon>\n              <component :is=\"'Download'\"></component>\n            </el-icon>\n          </el-link>\n        </div>\n      </div>\n      <div class=\"show-box artcode\" v-show=\"!loading && form.type === 'artcode' && artcode.success\">\n        <div class=\"box-content\" id=\"artcode\"></div>\n        <div class=\"box-options flex-vh\">\n          <div>大小：{{ artcode.width }} x {{ artcode.height }}</div>\n          <el-link class=\"download-btn flex-vh\" :underline=\"false\" @click=\"handleDownloadArtcode\">\n            <el-icon>\n              <component :is=\"'Download'\"></component>\n            </el-icon>\n          </el-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive } from 'vue'\nimport { ElNotification } from 'element-plus'\nimport QRCode from 'qrcode'\nimport JsBarcode from 'jsbarcode'\nimport { download } from '../utils/func'\nimport ArtQrcode from '../utils/artqrcode'\n\nimport electronBorder from '../assets/qrcode/electron/border.png'\nimport electronEye from '../assets/qrcode/electron/eye.png'\nimport electronSingle from '../assets/qrcode/electron/single.png'\nimport electronSingle_2 from '../assets/qrcode/electron/single_2.png'\nimport electronRow4 from '../assets/qrcode/electron/row4.png'\nimport electronCol3 from '../assets/qrcode/electron/col3.png'\nimport electronCol2 from '../assets/qrcode/electron/col2.png'\nimport electronCol3_2 from '../assets/qrcode/electron/col3_2.png'\nimport electronCorner from '../assets/qrcode/electron/corner.png'\nimport electronRow2 from '../assets/qrcode/electron/row2.png'\nimport electronRow2_2 from '../assets/qrcode/electron/row2_2.png'\nimport electronRow2Col2 from '../assets/qrcode/electron/row2col2.png'\nimport electronRow2Col3 from '../assets/qrcode/electron/row2col3.png'\n// import electronRow3 from '../assets/qrcode/electron/row3.png'\nimport electronRow3Col2 from '../assets/qrcode/electron/row3col2.png'\nimport cookieBorder from '../assets/qrcode/cookie/border.png'\nimport cookieCol2 from '../assets/qrcode/cookie/col2.png'\nimport cookieCorner from '../assets/qrcode/cookie/corner.png'\nimport cookieEye from '../assets/qrcode/cookie/eye.png'\nimport cookieRow2Col2 from '../assets/qrcode/cookie/row2col2.png'\nimport cookieRow3 from '../assets/qrcode/cookie/row3.png'\nimport cookieRow4 from '../assets/qrcode/cookie/row4.png'\nimport cookieSingle from '../assets/qrcode/cookie/single.png'\nimport pinkBorder from '../assets/qrcode/pinkgirl/border.jpg'\nimport pinkCol2 from '../assets/qrcode/pinkgirl/col2.png'\nimport pinkCorner from '../assets/qrcode/pinkgirl/corner.png'\nimport pinkEye from '../assets/qrcode/pinkgirl/eye.png'\nimport pinkRow2Col2 from '../assets/qrcode/pinkgirl/row2col2.png'\nimport pinkRow2Col3 from '../assets/qrcode/pinkgirl/row2col3.png'\nimport pinkRow3 from '../assets/qrcode/pinkgirl/row3.png'\nimport pinkRow3Col2 from '../assets/qrcode/pinkgirl/row3col2.png'\nimport pinkRow4 from '../assets/qrcode/pinkgirl/row4.png'\nimport pinkSingle from '../assets/qrcode/pinkgirl/single.png'\n\nconst barcodeFormatOptions = [\n  { label: 'CODE128', value: 'CODE128' },\n  { label: 'CODE128A', value: 'CODE128A' },\n  { label: 'CODE128B', value: 'CODE128B' },\n  { label: 'CODE128C', value: 'CODE128C' },\n  { label: 'EAN13', value: 'EAN13' },\n  { label: 'EAN8', value: 'EAN8' },\n  { label: 'EAN5', value: 'EAN5' },\n  { label: 'EAN2', value: 'EAN2' },\n  { label: 'UPC', value: 'UPC' },\n  { label: 'CODE39', value: 'CODE39' },\n  { label: 'ITF-14', value: 'ITF-14' },\n  { label: 'MSI', value: 'MSI' },\n  { label: 'MSI10', value: 'MSI10' },\n  { label: 'MSI11', value: 'MSI11' },\n  { label: 'MSI1010', value: 'MSI1010' },\n  { label: 'MSI1110', value: 'MSI1110' },\n  { label: 'Pharmacode', value: 'Pharmacode' },\n  { label: 'Codabar', value: 'Codabar' }\n]\n\nconst initialData = {\n  text: '',\n  type: 'qrcode',\n  qrcode: {\n    width: 200,\n    margin: 1,\n    quality: 0.92,\n    colorDark: '#000000',\n    colorLight: '#ffffff',\n    errorCorrectionLevel: 'H',\n    type: 'image/png'\n  },\n  barcode: {\n    format: 'CODE128',\n    width: 2,\n    height: 100,\n    displayValue: true,\n    text: '',\n    fontOptions: '',\n    textAlign: 'center',\n    textPosition: 'bottom',\n    textMargin: 2,\n    fontSize: 14,\n    background: '#ffffff',\n    lineColor: '#000000',\n    margin: 10\n  },\n  artcode: {\n    width: 200,\n    border: true,\n    margin: 0,\n    theme: 'electron'\n  }\n}\n\nconst form = reactive(JSON.parse(JSON.stringify(initialData)))\n\nconst qrcode = ref({ src: '', size: 0 })\nconst barcode = ref({ size: 0, success: false })\nconst artcode = ref({ width: 0, height: 0, success: false })\nconst loading = ref(false)\n\nconst createQrcode = () => {\n  if (form.text === '') {\n    ElNotification({\n      title: '提示',\n      message: '请输入二维码内容',\n      type: 'error',\n    })\n    return\n  }\n  loading.value = true\n  const { width, margin, quality, colorDark, colorLight, errorCorrectionLevel, type } = form.qrcode\n  QRCode.toDataURL(form.text, {\n    width,\n    margin,\n    quality,\n    color: {\n      dark: colorDark,\n      light: colorLight\n    },\n    errorCorrectionLevel,\n    type\n  }, (err, src) => {\n    setTimeout(() => {\n      loading.value = false\n    }, 1000)\n    if (err) {\n      ElNotification({\n        title: '提示',\n        message: '生成二维码失败',\n        type: 'error',\n      })\n      return\n    }\n    qrcode.value = { src, size: width }\n  })\n}\n\nconst createBarcode = () => {\n  if (form.text === '') {\n    ElNotification({\n      title: '提示',\n      message: '请输入条形码内容',\n      type: 'error',\n    })\n    return\n  }\n  loading.value = true\n  JsBarcode('#barcode', form.text, {\n    ...form.barcode,\n    valid: (valid) => {\n      barcode.value = { success: valid, size: form.barcode.height }\n      setTimeout(() => {\n        loading.value = false\n      }, 1000)\n      if (!valid) {\n        ElNotification({\n          title: '提示',\n          message: '生成条形码失败，请填写正确的条码内容',\n          type: 'error',\n        })\n        return\n      }\n    }\n  })\n}\n\nconst createArtcode = () => {\n  if (form.text === '') {\n    ElNotification({\n      title: '提示',\n      message: '请输入二维码内容',\n      type: 'error',\n    })\n    return\n  }\n  loading.value = true\n  const { width, border, margin, theme } = form.artcode\n  let materials = {}, height = 0, codeWidth = 0, top = 0, left = 0\n  if (theme === 'electron') {\n    height = width\n    codeWidth = border ? parseInt(width * 320 / 500) : width - margin * 2\n    top = border ? parseInt(width * 85 / 500) : margin\n    left = border ? parseInt(width * 80 / 500) : margin\n    materials = {\n      eye: electronEye,\n      row4: electronRow4,\n      col4: electronCol3,\n      row2col3: electronRow2Col3,\n      row3col2: electronRow3Col2,\n      col3: [electronCol3, electronCol3_2],\n      row2col2: electronRow2Col2,\n      corner: electronCorner,\n      row2: [electronRow2, electronRow2_2],\n      col2: electronCol2,\n      single: [electronSingle, electronSingle_2],\n    }\n    if (border) materials.border = electronBorder\n  } else if (theme === 'cookie') {\n    height = border ? parseInt(width * 10 / 7) : width\n    codeWidth = border ? parseInt(width * 280 / 500) : width - margin * 2\n    top = border ? parseInt(width * 110 / 500) : margin\n    left = top\n    materials = {\n      eye: cookieEye,\n      row4: cookieRow4,\n      // col4: cookieCol2,\n      // row2col3: cookieRow2Col2,\n      // row3col2: cookieRow2Col2,\n      // col3: [cookieCol2],\n      row2col2: cookieRow2Col2,\n      corner: cookieCorner,\n      row2: [cookieRow3],\n      col2: cookieCol2,\n      single: [cookieSingle],\n    }\n    if (border) materials.border = cookieBorder\n  } else if (theme === 'pink') {\n    height = border ? parseInt(width * 10 / 7) : width\n    codeWidth = border ? parseInt(width * 280 / 500) : width - margin * 2\n    top = border ? parseInt(width * 110 / 500) : margin\n    left = top\n    materials = {\n      eye: pinkEye,\n      row4: pinkRow4,\n      // col4: pinkCol2,\n      row2col3: pinkRow2Col3,\n      row3col2: pinkRow3Col2,\n      // col3: [pinkCol2],\n      row2col2: pinkRow2Col2,\n      corner: pinkCorner,\n      row2: [pinkRow3],\n      col2: pinkCol2,\n      single: [pinkSingle],\n    }\n    if (border) materials.border = pinkBorder\n  }\n  document.getElementById('artcode').innerHTML = ''\n  new ArtQrcode(document.getElementById('artcode'), {\n    text: form.text,\n    width: width,\n    height,\n    codeWidth,\n    codeHeight: codeWidth,\n    top,\n    left,\n    materials\n  }, (valid) => {\n    artcode.value = { success: valid, width, height }\n    setTimeout(() => {\n      loading.value = false\n    }, 1000)\n    if (!valid) {\n      ElNotification({\n        title: '提示',\n        message: '生成艺术码失败',\n        type: 'error',\n      })\n    }\n  })\n}\n\nconst handleDownloadBarcode = () => {\n  if (document.getElementById('barcode')) {\n    download(document.getElementById('barcode').getAttribute('src'), 'barcode')\n  }\n}\n\nconst handleDownloadArtcode = () => {\n  if (document.querySelector('#artcode img')) {\n    download(document.querySelector('#artcode img').getAttribute('src'), 'artcode')\n  }\n}\n\nconst handleUpdate = () => {\n  if (loading.value) return\n  if (form.type === 'qrcode') {\n    createQrcode()\n  } else if (form.type === 'barcode') {\n    createBarcode()\n  } else if (form.type === 'artcode') {\n    createArtcode()\n  }\n}\n\nconst handleReset = () => {\n  form.text = ''\n  if (form.type === 'qrcode') {\n    form.qrcode = JSON.parse(JSON.stringify(initialData.qrcode))\n  } else if (form.type === 'barcode') {\n    form.barcode = JSON.parse(JSON.stringify(initialData.barcode))\n  } else if (form.type === 'artcode') {\n    form.artcode = JSON.parse(JSON.stringify(initialData.artcode))\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-qrcode {\n  .form-wrapper {\n    :deep(.el-textarea__inner) {\n      height: 100px;\n    }\n  }\n  .show-wrapper {\n    margin: 10px 0 0 100px;\n    .show-box {\n      position: relative;\n      &.qrcode {\n        width: 250px;\n        height: 250px;\n        img {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n        }\n      }\n      &.barcode img {\n        height: 200px;\n      }\n      &.artcode {\n        width: 250px;\n        .box-content {\n          width: 100%;\n        }\n        :deep(img) {\n          width: 100% !important;\n          height: auto !important;\n        }\n      }\n      .box-options {\n        position: absolute;\n        width: 100%;\n        left: 0;\n        bottom: 0;\n        transform: translateY(100%);\n      }\n      .download-btn {\n        height: 40px;\n        padding: 0 10px;\n        position: relative;\n        left: 10px;\n      }\n    }\n  }\n}\n</style>","import script from \"./QrcodePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./QrcodePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./QrcodePage.vue?vue&type=style&index=0&id=2f0fe47e&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2f0fe47e\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-beautify flex\">\n    <el-input class=\"code-input flex-1\" v-model=\"form.code\" type=\"textarea\" placeholder=\"请输入代码\" resize=\"none\" />\n    <div class=\"code-wrapper flex-1\">\n      <highlightjs\n        autodetect\n        :code=\"beautifyCode\"\n      ></highlightjs>\n    </div>\n    <el-form class=\"form-wrapper\" label-position=\"top\" :model=\"form.options\">\n      <el-form-item>\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"handleStart\">美化</el-button>\n        <el-button class=\"copy-btn\" type=\"success\" text bg :data-clipboard-text=\"form.beautify\">复制</el-button>\n        <el-button type=\"warning\" text bg @click=\"handleClear\">清空</el-button>\n        <el-button type=\"danger\" text bg @click=\"handleReset\">重置</el-button>\n      </el-form-item>\n      <el-form-item label=\"代码类型：\">\n        <el-select v-model=\"form.options.parser\">\n          <el-option\n            v-for=\"item in codeParserOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"单行长度：\">\n        <el-input-number\n          v-model=\"form.options.printWidth\"\n          :min=\"1\"\n          :max=\"1000\"\n          :step=\"1\"\n          step-strictly\n        />\n      </el-form-item>\n      <el-form-item label=\"缩进空格：\">\n        <el-input-number\n          v-model=\"form.options.tabWidth\"\n          :min=\"1\"\n          :max=\"4\"\n          :step=\"1\"\n          step-strictly\n        />\n      </el-form-item>\n      <el-form-item label=\"句末使用分号：\">\n        <el-switch v-model=\"form.options.semi\" />\n      </el-form-item>\n      <el-form-item label=\"使用单引号：\">\n        <el-switch v-model=\"form.options.singleQuote\" />\n      </el-form-item>\n      <el-form-item label=\"对象前后添加空格：\">\n        <el-switch v-model=\"form.options.bracketSpacing\" />\n      </el-form-item>\n      <el-form-item label=\"多属性HTML标签的>折行放置：\">\n        <el-switch v-model=\"form.options.bracketSameLine\" />\n      </el-form-item>\n      <el-form-item label=\"箭头函数参数包裹括号：\">\n        <el-radio-group v-model=\"form.options.arrowParens\">\n          <el-radio label=\"always\">css</el-radio>\n          <el-radio label=\"avoid\">avoid</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-collapse>\n        <el-collapse-item title=\"其他设置\">\n          <el-form-item label=\"JSX中使用单引号：\">\n            <el-switch v-model=\"form.options.jsxSingleQuote\" />\n          </el-form-item>\n          <el-form-item label=\"JSX中的多属性HTML标签的>折行放置：\">\n            <el-switch v-model=\"form.options.jsxBracketSameLine\" />\n          </el-form-item>\n          <el-form-item label=\"对HTML全局空白的敏感度：\">\n            <el-radio-group v-model=\"form.options.htmlWhitespaceSensitivity\">\n              <el-radio label=\"css\">css</el-radio>\n              <el-radio label=\"strict\">strict</el-radio>\n              <el-radio label=\"ignore\">ignore</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"对Vue文件中的script、style标签缩进：\">\n            <el-switch v-model=\"form.options.vueIndentScriptAndStyle\" />\n          </el-form-item>\n          <el-form-item label=\"在HTML、Vue和JSX文件中强制每行单一属性：\">\n            <el-switch v-model=\"form.options.singleAttributePerLine\" />\n          </el-form-item>\n        </el-collapse-item>\n      </el-collapse>\n    </el-form>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, computed } from 'vue'\nimport { ElNotification } from 'element-plus'\nimport { loadJs } from '../utils/func'\n\nconst codeParserOptions = [\n  { label: '默认', value: 'babel' },\n  { label: 'typescript', value: 'typescript' },\n  { label: 'html', value: 'html' },\n  { label: 'vue', value: 'vue' },\n  { label: 'angular', value: 'angular' },\n  { label: 'css', value: 'css' },\n  { label: 'scss', value: 'scss' },\n  { label: 'less', value: 'less' },\n  { label: 'json', value: 'json' },\n  { label: 'json5', value: 'json5' },\n  { label: 'json-stringify', value: 'json-stringify' },\n  { label: 'markdown', value: 'markdown' },\n]\n\nconst initialData = {\n  code: '',\n  beautify: '',\n  options: {\n    parser: 'babel',\n    printWidth: 80,\n    tabWidth: 2,\n    semi: false,\n    singleQuote: true,\n    jsxSingleQuote: true,\n    bracketSpacing: true,\n    bracketSameLine: true,\n    jsxBracketSameLine: true,\n    arrowParens: 'always',\n    htmlWhitespaceSensitivity: 'css',\n    vueIndentScriptAndStyle: false,\n    singleAttributePerLine: false\n  }\n}\n\nconst form = reactive(JSON.parse(JSON.stringify(initialData)))\n\nconst loading = ref(false)\n\nconst beautifyCode = computed(() => {\n  return `/** 格式化代码 */\\n\\n${form.beautify}`\n})\n\nconst handleStart = async () => {\n  const { code, options } = form\n  if (code === '') return\n\n  loading.value = true\n  form.beautify = ''\n\n  const { parser } = options\n  let scripts = ['standalone', 'plugins/babel', 'plugins/estree']\n  if (['html', 'vue'].includes(parser)) {\n    scripts = [ ...scripts, 'plugins/html' ]\n  } else if (['css', 'scss', 'less'].includes(parser)) {\n    scripts = [ ...scripts, 'plugins/postcss' ]\n  } else if (parser === 'angular') {\n    scripts = [ ...scripts, 'plugins/html', 'plugins/angular' ]\n  } else if (parser === 'typescript') {\n    scripts = [ ...scripts, 'plugins/typescript' ]\n  } else if (parser === 'markdown') {\n    scripts = [ ...scripts, 'plugins/markdown' ]\n  }\n  for (let index = 0; index < scripts.length; index++) {\n    const res = await loadJs(`https://unpkg.com/prettier@3.0.1/${scripts[index]}.js`)\n    if (!res)  {\n      ElNotification({\n        title: '提示',\n        message: '加载Prettier插件失败，请刷新重试',\n        type: 'error',\n      })\n      loading.value = false\n      return\n    }\n  }\n  prettier.format(code, {\n    ...options,\n    plugins: prettierPlugins,\n  }).then((res) => {\n    form.beautify = res\n    loading.value = false\n  }).catch((err) => {\n    console.log(err)\n    ElNotification({\n      title: '提示',\n      message: '格式化失败，请检查代码类型',\n      type: 'error',\n    })\n    loading.value = false\n  })\n  \n}\n\nconst handleClear = () => {\n  form.code = ''\n  form.beautify = ''\n}\n\nconst handleReset = () => {\n  form.options = JSON.parse(JSON.stringify(initialData.options))\n  form.code = ''\n  form.beautify = ''\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-beautify {\n  padding: 0;\n  .form-wrapper {\n    width: 340px;\n    max-height: 100%;\n    overflow-y: auto;\n    padding-top: 20px;\n    :deep(.el-collapse-item__header) {\n      border-bottom: none;\n      font-weight: 600;\n      color: var(--el-menu-active-color);\n      font-size: var(--el-form-label-font-size);\n    }\n    :deep(.el-collapse-item__wrap) {\n      border-bottom: none;\n    }\n  }\n  .code-input {\n    background-color: rgba(64, 158, 255, .1);\n    :deep(.el-textarea__inner) {\n      height: 100%;\n      border: none;\n      box-shadow: none;\n      background-color: transparent;\n    }\n  }\n  .code-wrapper {\n    margin-right: 20px;\n    :deep(pre) {\n      height: 100%;\n    }\n    :deep(.hljs) {\n      width: 100%;\n      height: 100%;\n      overflow-x: hidden;\n      word-break: break-all;\n      white-space: break-spaces;\n    }\n  }\n}\n</style>","import script from \"./BeautifyPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BeautifyPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BeautifyPage.vue?vue&type=style&index=0&id=0f28f147&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0f28f147\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-parse-qrcode\">\n    <canvas class=\"code-canvas\" id=\"qrcode\"></canvas>\n    <el-form class=\"form-wrapper\" label-position=\"top\">\n      <el-form-item label=\"上传图片\">\n        <el-upload\n          class=\"uploader-wrapper\"\n          action=\"#\"\n          :auto-upload=\"false\"\n          :limit=\"1\"\n          :show-file-list=\"false\"\n          :on-change=\"handleUpload\"\n          ref=\"uploadEle\"\n        >\n          <img v-if=\"path\" :src=\"path\" class=\"uploader-image\" />\n          <el-icon v-else class=\"uploader-icon\">\n            <component :is=\"'Plus'\"></component>\n          </el-icon>\n        </el-upload>\n      </el-form-item>\n      <el-form-item label=\"识别结果\">\n        <el-input v-model=\"result\" type=\"textarea\" resize=\"none\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleStart\">开始</el-button>\n        <el-button class=\"copy-btn\" :data-clipboard-text=\"result\">复制</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from 'vue'\nimport { ElNotification } from 'element-plus'\n\nvar CV = null\nvar qrcodeDetector = null\n\nconst uploadEle = ref(null)\nconst path = ref('')\nconst result = ref('')\n\nconst handleUpload = (file) => {\n  result.value = ''\n  path.value = URL.createObjectURL(file.raw)\n  let img = new Image()\n  img.crossOrigin = 'anonymous'\n  img.onload = () => {\n    const { width, height } = img\n    let canvas = document.getElementById('qrcode')\n    const ctx = canvas.getContext('2d')\n    canvas.width = width\n    canvas.height = height\n    ctx.drawImage(img, 0, 0, width, height)\n  }\n  img.src = path.value\n  uploadEle.value.clearFiles()\n}\n\nconst handleStart = () => {\n  const inputImage = CV.imread('qrcode', CV.IMREAD_GRAYSCALE)\n  const points_vec = new CV.MatVector()\n  const res = qrcodeDetector.detectAndDecode(inputImage, points_vec)\n  if (res.size() === 0) {\n    ElNotification({\n      title: '提示',\n      message: '解析失败',\n      type: 'error',\n    })\n  } else {\n    result.value = res.get(0)\n  }\n}\n\nconst fetchModelsData = async (name) => {\n  const response = await fetch(`/Fee-notes/models/${name}`, { method: 'GET' })\n  const data = await response.arrayBuffer()\n  return new Uint8Array(data)\n}\n\nconst createDataFile = async (name) => {\n  try {\n    const data = await fetchModelsData(name)\n    CV.FS_createDataFile('/', name, data, true, false, false)\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nonMounted(async () => {\n  if (cv) {\n    CV = await cv\n    await createDataFile('detect.prototxt')\n    await createDataFile('detect.caffemodel')\n    await createDataFile('sr.prototxt')\n    await createDataFile('sr.caffemodel')\n    qrcodeDetector = new CV.wechat_qrcode_WeChatQRCode(\n      'detect.prototxt',\n      'detect.caffemodel',\n      'sr.prototxt',\n      'sr.caffemodel'\n    )\n  }\n})\n</script>\n\n<style lang=\"less\" scoped>\n.page-parse-qrcode {\n  .code-canvas {\n    position: absolute;\n    left: -10000px;\n    top: -10000px;\n    opacity: 0;\n    z-index: -100;\n  }\n  .form-wrapper {\n    width: 400px;\n    :deep(.el-textarea__inner) {\n      height: 100px;\n    }\n  }\n  .uploader-wrapper {\n    :deep(.el-upload) {\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n      background-color: var(--el-input-bg-color,var(--el-fill-color-blank));\n      box-shadow: 0 0 0 1px var(--el-input-border-color,var(--el-border-color)) inset;\n      border-radius: var(--el-input-border-radius,var(--el-border-radius-base));\n      transition: var(--el-transition-box-shadow);\n      &:hover {\n        box-shadow: 0 0 0 1px var(--el-border-color-hover) inset;\n      }\n      &:focus {\n        box-shadow: 0 0 0 1px var(--el-color-primary) inset;\n      }\n    }\n    .uploader-image {\n      height: 200px;\n      width: auto;\n    }\n    .uploader-icon {\n      width: 200px;\n      height: 200px;\n      font-size: 28px;\n      color: #8c939d;\n      text-align: center;\n    }\n  }\n  .image-wrapper {\n    width: 200px;\n    height: 200px;\n    margin-top: 10px;\n    .image-slot {\n      width: 100%;\n      height: 100%;\n      background: var(--el-fill-color-light);\n      color: var(--el-text-color-secondary);\n      font-size: 30px;\n    }\n  }\n}\n</style>","import script from \"./ParseQrcode.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ParseQrcode.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ParseQrcode.vue?vue&type=style&index=0&id=8c036c3e&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8c036c3e\"]])\n\nexport default __exports__","import script from \"./RegexpPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RegexpPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RegexpPage.vue?vue&type=style&index=0&id=1002ae3c&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1002ae3c\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-transfer flex\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">时间转换</div>\n      </template>\n      <el-form label-width=\"60px\" :model=\"timeForm\">\n        <el-form-item label=\"现在\">{{ timeForm.now }}</el-form-item>\n        <el-form-item label=\"时间\">\n          <el-input v-model=\"timeForm.input\" @input=\"handleInputTime\" />\n        </el-form-item>\n        <el-form-item label=\"格式\">\n          <el-radio-group v-model=\"timeForm.type\" @change=\"handleInputTime\">\n            <el-radio label=\"timestampH\">时间戳(毫秒)</el-radio>\n            <el-radio label=\"timestamp\">时间戳(秒)</el-radio>\n            <el-radio label=\"\">自定义</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"自定义\" v-if=\"timeForm.type === ''\">\n          <el-input v-model=\"timeForm.format\" @input=\"handleInputTime\" />\n        </el-form-item>\n        <el-form-item label=\"结果\">\n          <el-input v-model=\"timeForm.result\" disabled />\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"copy-btn\" type=\"primary\" :data-clipboard-text=\"timeForm.result\">复制</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">颜色转换</div>\n      </template>\n      <el-form label-width=\"60px\" :model=\"timeForm\">\n        <el-form-item label=\"输入\">\n          <el-input v-model=\"colorForm.input\" @input=\"handleInputColor\" />\n        </el-form-item>\n        <el-form-item label=\"颜色\">\n          <el-color-picker v-model=\"colorForm.color\" show-alpha />\n        </el-form-item>\n        <el-form-item label=\"格式\">\n          <el-radio-group v-model=\"colorForm.format\" @change=\"handleInputColor\">\n            <el-radio label=\"hex\" />\n            <el-radio label=\"rgb\" />\n            <el-radio label=\"rgba\" />\n            <el-radio label=\"hsl\" />\n            <el-radio label=\"hsla\" />\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"结果\">\n          <el-input v-model=\"colorForm.result\" disabled />\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"copy-btn\" type=\"primary\" :data-clipboard-text=\"colorForm.result\">复制</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport chroma from 'chroma-js'\nimport dayjs from 'dayjs'\nimport 'dayjs/locale/zh-cn'\n\nconst timeForm = ref({\n  now: dayjs().locale('zh-cn').format('YYYY-MM-DD HH:mm:ss dddd'),\n  input: '',\n  type: 'timestampH',\n  format: 'YYYY-MM-DD HH:mm:ss dddd',\n  result: ''\n})\n\nconst colorForm = ref({\n  input: '',\n  color: '#ffffff',\n  format: 'hex',\n  result: ''\n})\n\nconst handleInputTime = () => {\n  const { input, type, format } = timeForm.value\n  let res = ''\n  if (dayjs(input).isValid()) {\n    if (type === 'timestampH') {\n      res = dayjs(input).valueOf()\n    } else if (type === 'timestamp') {\n      res = dayjs(input).unix()\n    } else {\n      res = dayjs(input).locale('zh-cn').format(format)\n    }\n  } else {\n    res = ''\n  }\n  timeForm.value.result = res\n}\n\nconst handleInputColor = () => {\n  const { input, format } = colorForm.value\n  const valid = chroma.valid(input)\n  if (valid) {\n    colorForm.value.color = input\n    if (format === 'hex') {\n      colorForm.value.result = chroma(input).hex()\n    } else if (format === 'rgb') {\n      colorForm.value.result = `rgb(${chroma(input).rgb()})`\n    } else if (format === 'rgba') {\n      colorForm.value.result = `rgba(${chroma(input).rgba()})`\n    } else if (format === 'hsl') {\n      const hsl = chroma(input).hsl()\n      colorForm.value.result = `hsl(${hsl[0] ? `${parseFloat(hsl[0].toFixed(3))}` : hsl[0]}, ${parseFloat((hsl[1] * 100).toFixed(3))}%, ${parseFloat((hsl[2] * 100).toFixed(3))}%)`\n    } else if (format === 'hsla') {\n      const hsl = chroma(input).hsl()\n      colorForm.value.result = `hsl(${hsl[0] ? `${parseFloat(hsl[0].toFixed(3))}` : hsl[0]}, ${parseFloat((hsl[1] * 100).toFixed(3))}%, ${parseFloat((hsl[2] * 100).toFixed(3))}%, ${hsl[3]})`\n    }\n  } else {\n    colorForm.value.color = '#ffffff'\n    colorForm.value.result = ''\n  }\n}\n\nonMounted(() => {\n  setInterval(() => {\n    timeForm.value.now = dayjs().locale('zh-cn').format('YYYY-MM-DD HH:mm:ss dddd')\n  }, 1000)\n})\n</script>\n\n<style lang=\"less\" scoped>\n.page-transfer {\n  .box-card {\n    // width: 500px;\n    height: 500px;\n    &:not(:first-child) {\n      margin-left: 20px;\n    }\n    .card-header {\n      font-size: 15px;\n      font-weight: 600;\n    }\n  }\n}\n</style>","import script from \"./TransferPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TransferPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TransferPage.vue?vue&type=style&index=0&id=11998f02&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11998f02\"]])\n\nexport default __exports__","<template>\n  <div class=\"page-wrapper page-movie\" id=\"page-movie\">\n    <iframe\n      class=\"movie-iframe\"\n      :class=\"[loaded ? 'show' : '']\"\n      id=\"movie-iframe\"\n      src=\"https://fee-ing.github.io/Fee-web/#/\"\n      frameborder=\"0\"\n    ></iframe>\n  </div>\n</template>\n\n<script setup>\nimport { onActivated, ref } from 'vue'\nimport { ElLoading } from 'element-plus'\n\nconst loaded = ref(false)\n\nonActivated(() => {\n  loaded.value = false\n  const loading = ElLoading.service({\n    lock: true,\n    text: '加载中~',\n    background: 'rgba(255, 255, 255, 0.7)',\n    target: document.getElementById('page-movie')\n  })\n  document.getElementById('movie-iframe').onload = () => {\n    loaded.value = true\n    loading.close()\n  }\n})\n</script>\n\n<style lang=\"less\" scoped>\n.page-movie {\n  padding: 0;\n  .movie-iframe {\n    height: 100%;\n    width: 100%;\n    opacity: 0;\n    &.show {\n      opacity: 1;\n    }\n  }\n}\n</style>","import script from \"./MoviePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MoviePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MoviePage.vue?vue&type=style&index=0&id=17ba0114&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-17ba0114\"]])\n\nexport default __exports__","var util = newUtil();\nvar inliner = newInliner();\nvar fontFaces = newFontFaces();\nvar images = newImages();\n\n// Default impl options\nvar defaultOptions = {\n    // Default is to fail on error, no placeholder\n    imagePlaceholder: undefined,\n    // Default cache bust is false, it will use the cache\n    cacheBust: false\n};\n\nvar domtoimage = {\n    toSvg: toSvg,\n    toPng: toPng,\n    toJpeg: toJpeg,\n    toBlob: toBlob,\n    toPixelData: toPixelData,\n    impl: {\n        fontFaces: fontFaces,\n        images: images,\n        util: util,\n        inliner: inliner,\n        options: {}\n    }\n};\n\n/**\n * @param {Node} node - The DOM Node object to render\n * @param {Object} options - Rendering options\n * @param {Function} options.filter - Should return true if passed node should be included in the output\n *          (excluding node means excluding it's children as well). Not called on the root node.\n * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n * @param {Number} options.width - width to be applied to node before rendering.\n * @param {Number} options.height - height to be applied to node before rendering.\n * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n            defaults to 1.0.\n    * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n    * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n    * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n    * */\nfunction toSvg(node, options) {\n    options = options || {};\n    copyOptions(options);\n    return Promise.resolve(node)\n        .then(function (node) {\n            return cloneNode(node, options.filter, true);\n        })\n        .then(embedFonts)\n        .then(inlineImages)\n        .then(applyOptions)\n        .then(function (clone) {\n            return makeSvgDataUri(clone,\n                options.width || util.width(node),\n                options.height || util.height(node)\n            );\n        });\n\n    function applyOptions(clone) {\n        if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n        if (options.width) clone.style.width = options.width + 'px';\n        if (options.height) clone.style.height = options.height + 'px';\n\n        if (options.style)\n            Object.keys(options.style).forEach(function (property) {\n                clone.style[property] = options.style[property];\n            });\n\n        return clone;\n    }\n}\n\n/**\n * @param {Node} node - The DOM Node object to render\n * @param {Object} options - Rendering options, @see {@link toSvg}\n * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n * */\nfunction toPixelData(node, options) {\n    return draw(node, options || {})\n        .then(function (canvas) {\n            return canvas.getContext('2d').getImageData(\n                0,\n                0,\n                util.width(node),\n                util.height(node)\n            ).data;\n        });\n}\n\n/**\n * @param {Node} node - The DOM Node object to render\n * @param {Object} options - Rendering options, @see {@link toSvg}\n * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n * */\nfunction toPng(node, options) {\n    return draw(node, options || {})\n        .then(function (canvas) {\n            return canvas.toDataURL();\n        });\n}\n\n/**\n * @param {Node} node - The DOM Node object to render\n * @param {Object} options - Rendering options, @see {@link toSvg}\n * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n * */\nfunction toJpeg(node, options) {\n    options = options || {};\n    return draw(node, options)\n        .then(function (canvas) {\n            return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n        });\n}\n\n/**\n * @param {Node} node - The DOM Node object to render\n * @param {Object} options - Rendering options, @see {@link toSvg}\n * @return {Promise} - A promise that is fulfilled with a PNG image blob\n * */\nfunction toBlob(node, options) {\n    return draw(node, options || {})\n        .then(util.canvasToBlob);\n}\n\nfunction copyOptions(options) {\n    // Copy options to impl options for use in impl\n    if (typeof (options.imagePlaceholder) === 'undefined') {\n        domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n    } else {\n        domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n    }\n\n    if (typeof (options.cacheBust) === 'undefined') {\n        domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n    } else {\n        domtoimage.impl.options.cacheBust = options.cacheBust;\n    }\n}\n\nfunction draw(domNode, options) {\n    return toSvg(domNode, options)\n        .then(util.makeImage)\n        .then(util.delay(100))\n        .then(function (image) {\n            var canvas = newCanvas(domNode);\n            canvas.getContext('2d').drawImage(image, 0, 0);\n            return canvas;\n        });\n\n    function newCanvas(domNode) {\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n\n        var scale = options.scale || 1;\n        canvas.width = (options.width || util.width(domNode)) * scale;\n        canvas.height = (options.height || util.height(domNode) * scale);\n        ctx.scale(scale, scale);\n\n        if (options.bgcolor) {\n            ctx.fillStyle = options.bgcolor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n\n        return canvas;\n    }\n}\n\nfunction cloneNode(node, filter, root) {\n    if (!root && filter && !filter(node)) return Promise.resolve();\n\n    return Promise.resolve(node)\n        .then(makeNodeCopy)\n        .then(function (clone) {\n            return cloneChildren(node, clone, filter);\n        })\n        .then(function (clone) {\n            return processClone(node, clone);\n        });\n\n    function makeNodeCopy(node) {\n        if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n        return node.cloneNode(false);\n    }\n\n    function cloneChildren(original, clone, filter) {\n        var children = original.childNodes;\n        if (children.length === 0) return Promise.resolve(clone);\n\n        return cloneChildrenInOrder(clone, util.asArray(children), filter)\n            .then(function () {\n                return clone;\n            });\n\n        function cloneChildrenInOrder(parent, children, filter) {\n            var done = Promise.resolve();\n            children.forEach(function (child) {\n                done = done\n                    .then(function () {\n                        return cloneNode(child, filter);\n                    })\n                    .then(function (childClone) {\n                        if (childClone) parent.appendChild(childClone);\n                    });\n            });\n            return done;\n        }\n    }\n\n    function processClone(original, clone) {\n        if (!(clone instanceof Element)) return clone;\n\n        return Promise.resolve()\n            .then(cloneStyle)\n            .then(clonePseudoElements)\n            .then(copyUserInput)\n            .then(fixSvg)\n            .then(function () {\n                return clone;\n            });\n\n        function cloneStyle() {\n            copyStyle(window.getComputedStyle(original), clone.style);\n\n            function copyStyle(source, target) {\n                if (source.cssText) target.cssText = source.cssText;\n                else copyProperties(source, target);\n\n                function copyProperties(source, target) {\n                    util.asArray(source).forEach(function (name) {\n                        target.setProperty(\n                            name,\n                            source.getPropertyValue(name),\n                            source.getPropertyPriority(name)\n                        );\n                    });\n                }\n            }\n        }\n\n        function clonePseudoElements() {\n            [':before', ':after'].forEach(function (element) {\n                clonePseudoElement(element);\n            });\n\n            function clonePseudoElement(element) {\n                var style = window.getComputedStyle(original, element);\n                var content = style.getPropertyValue('content');\n\n                if (content === '' || content === 'none') return;\n\n                var className = util.uid();\n                clone.className = clone.className + ' ' + className;\n                var styleElement = document.createElement('style');\n                styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                clone.appendChild(styleElement);\n\n                function formatPseudoElementStyle(className, element, style) {\n                    var selector = '.' + className + ':' + element;\n                    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                    return document.createTextNode(selector + '{' + cssText + '}');\n\n                    function formatCssText(style) {\n                        var content = style.getPropertyValue('content');\n                        return style.cssText + ' content: ' + content + ';';\n                    }\n\n                    function formatCssProperties(style) {\n\n                        return util.asArray(style)\n                            .map(formatProperty)\n                            .join('; ') + ';';\n\n                        function formatProperty(name) {\n                            return name + ': ' +\n                                style.getPropertyValue(name) +\n                                (style.getPropertyPriority(name) ? ' !important' : '');\n                        }\n                    }\n                }\n            }\n        }\n\n        function copyUserInput() {\n            if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n            if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n        }\n\n        function fixSvg() {\n            if (!(clone instanceof SVGElement)) return;\n            clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n            if (!(clone instanceof SVGRectElement)) return;\n            ['width', 'height'].forEach(function (attribute) {\n                var value = clone.getAttribute(attribute);\n                if (!value) return;\n\n                clone.style.setProperty(attribute, value);\n            });\n        }\n    }\n}\n\nfunction embedFonts(node) {\n    return fontFaces.resolveAll()\n        .then(function (cssText) {\n            var styleNode = document.createElement('style');\n            node.appendChild(styleNode);\n            styleNode.appendChild(document.createTextNode(cssText));\n            return node;\n        });\n}\n\nfunction inlineImages(node) {\n    return images.inlineAll(node)\n        .then(function () {\n            return node;\n        });\n}\n\nfunction makeSvgDataUri(node, width, height) {\n    return Promise.resolve(node)\n        .then(function (node) {\n            node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n            return new XMLSerializer().serializeToString(node);\n        })\n        .then(util.escapeXhtml)\n        .then(function (xhtml) {\n            return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n        })\n        .then(function (foreignObject) {\n            return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                foreignObject + '</svg>';\n        })\n        .then(function (svg) {\n            return 'data:image/svg+xml;charset=utf-8,' + svg;\n        });\n}\n\nfunction newUtil() {\n    return {\n        escape: escape,\n        parseExtension: parseExtension,\n        mimeType: mimeType,\n        dataAsUrl: dataAsUrl,\n        isDataUrl: isDataUrl,\n        canvasToBlob: canvasToBlob,\n        resolveUrl: resolveUrl,\n        getAndEncode: getAndEncode,\n        uid: uid(),\n        delay: delay,\n        asArray: asArray,\n        escapeXhtml: escapeXhtml,\n        makeImage: makeImage,\n        width: width,\n        height: height\n    };\n\n    function mimes() {\n        /*\n            * Only WOFF and EOT mime types for fonts are 'real'\n            * see http://www.iana.org/assignments/media-types/media-types.xhtml\n            */\n        var WOFF = 'application/font-woff';\n        var JPEG = 'image/jpeg';\n\n        return {\n            'woff': WOFF,\n            'woff2': WOFF,\n            'ttf': 'application/font-truetype',\n            'eot': 'application/vnd.ms-fontobject',\n            'png': 'image/png',\n            'jpg': JPEG,\n            'jpeg': JPEG,\n            'gif': 'image/gif',\n            'tiff': 'image/tiff',\n            'svg': 'image/svg+xml'\n        };\n    }\n\n    function parseExtension(url) {\n        var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n        if (match) return match[1];\n        else return '';\n    }\n\n    function mimeType(url) {\n        var extension = parseExtension(url).toLowerCase();\n        return mimes()[extension] || '';\n    }\n\n    function isDataUrl(url) {\n        return url.search(/^(data:)/) !== -1;\n    }\n\n    function toBlob(canvas) {\n        return new Promise(function (resolve) {\n            var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n            var length = binaryString.length;\n            var binaryArray = new Uint8Array(length);\n\n            for (var i = 0; i < length; i++)\n                binaryArray[i] = binaryString.charCodeAt(i);\n\n            resolve(new Blob([binaryArray], {\n                type: 'image/png'\n            }));\n        });\n    }\n\n    function canvasToBlob(canvas) {\n        if (canvas.toBlob)\n            return new Promise(function (resolve) {\n                canvas.toBlob(resolve);\n            });\n\n        return toBlob(canvas);\n    }\n\n    function resolveUrl(url, baseUrl) {\n        var doc = document.implementation.createHTMLDocument();\n        var base = doc.createElement('base');\n        doc.head.appendChild(base);\n        var a = doc.createElement('a');\n        doc.body.appendChild(a);\n        base.href = baseUrl;\n        a.href = url;\n        return a.href;\n    }\n\n    function uid() {\n        var index = 0;\n\n        return function () {\n            return 'u' + fourRandomChars() + index++;\n\n            function fourRandomChars() {\n                /* see http://stackoverflow.com/a/6248722/2519373 */\n                return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n            }\n        };\n    }\n\n    function makeImage(uri) {\n        return new Promise(function (resolve, reject) {\n            var image = new Image();\n            image.onload = function () {\n                resolve(image);\n            };\n            image.onerror = reject;\n            image.src = uri;\n        });\n    }\n\n    function getAndEncode(url) {\n        var TIMEOUT = 30000;\n        if (domtoimage.impl.options.cacheBust) {\n            // Cache bypass so we dont have CORS issues with cached images\n            // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n            url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n        }\n\n        return new Promise(function (resolve) {\n            var request = new XMLHttpRequest();\n\n            request.onreadystatechange = done;\n            request.ontimeout = timeout;\n            request.responseType = 'blob';\n            request.timeout = TIMEOUT;\n            request.open('GET', url, true);\n            request.send();\n\n            var placeholder;\n            if (domtoimage.impl.options.imagePlaceholder) {\n                var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                if (split && split[1]) {\n                    placeholder = split[1];\n                }\n            }\n\n            function done() {\n                if (request.readyState !== 4) return;\n\n                if (request.status !== 200) {\n                    if (placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                    }\n\n                    return;\n                }\n\n                var encoder = new FileReader();\n                encoder.onloadend = function () {\n                    var content = encoder.result.split(/,/)[1];\n                    resolve(content);\n                };\n                encoder.readAsDataURL(request.response);\n            }\n\n            function timeout() {\n                if (placeholder) {\n                    resolve(placeholder);\n                } else {\n                    fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                }\n            }\n\n            function fail(message) {\n                console.error(message);\n                resolve('');\n            }\n        });\n    }\n\n    function dataAsUrl(content, type) {\n        return 'data:' + type + ';base64,' + content;\n    }\n\n    function escape(string) {\n        return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    }\n\n    function delay(ms) {\n        return function (arg) {\n            return new Promise(function (resolve) {\n                setTimeout(function () {\n                    resolve(arg);\n                }, ms);\n            });\n        };\n    }\n\n    function asArray(arrayLike) {\n        var array = [];\n        var length = arrayLike.length;\n        for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n        return array;\n    }\n\n    function escapeXhtml(string) {\n        return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n    }\n\n    function width(node) {\n        var leftBorder = px(node, 'border-left-width');\n        var rightBorder = px(node, 'border-right-width');\n        return node.scrollWidth + leftBorder + rightBorder;\n    }\n\n    function height(node) {\n        var topBorder = px(node, 'border-top-width');\n        var bottomBorder = px(node, 'border-bottom-width');\n        return node.scrollHeight + topBorder + bottomBorder;\n    }\n\n    function px(node, styleProperty) {\n        var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n        return parseFloat(value.replace('px', ''));\n    }\n}\n\nfunction newInliner() {\n    var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n    return {\n        inlineAll: inlineAll,\n        shouldProcess: shouldProcess,\n        impl: {\n            readUrls: readUrls,\n            inline: inline\n        }\n    };\n\n    function shouldProcess(string) {\n        return string.search(URL_REGEX) !== -1;\n    }\n\n    function readUrls(string) {\n        var result = [];\n        var match;\n        while ((match = URL_REGEX.exec(string)) !== null) {\n            result.push(match[1]);\n        }\n        return result.filter(function (url) {\n            return !util.isDataUrl(url);\n        });\n    }\n\n    function inline(string, url, baseUrl, get) {\n        return Promise.resolve(url)\n            .then(function (url) {\n                return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n            })\n            .then(get || util.getAndEncode)\n            .then(function (data) {\n                return util.dataAsUrl(data, util.mimeType(url));\n            })\n            .then(function (dataUrl) {\n                return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n            });\n\n        function urlAsRegex(url) {\n            return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n        }\n    }\n\n    function inlineAll(string, baseUrl, get) {\n        if (nothingToInline()) return Promise.resolve(string);\n\n        return Promise.resolve(string)\n            .then(readUrls)\n            .then(function (urls) {\n                var done = Promise.resolve(string);\n                urls.forEach(function (url) {\n                    done = done.then(function (string) {\n                        return inline(string, url, baseUrl, get);\n                    });\n                });\n                return done;\n            });\n\n        function nothingToInline() {\n            return !shouldProcess(string);\n        }\n    }\n}\n\nfunction newFontFaces() {\n    return {\n        resolveAll: resolveAll,\n        impl: {\n            readAll: readAll\n        }\n    };\n\n    function resolveAll() {\n        return readAll(document)\n            .then(function (webFonts) {\n                return Promise.all(\n                    webFonts.map(function (webFont) {\n                        return webFont.resolve();\n                    })\n                );\n            })\n            .then(function (cssStrings) {\n                return cssStrings.join('\\n');\n            });\n    }\n\n    function readAll() {\n        return Promise.resolve(util.asArray(document.styleSheets))\n            .then(getCssRules)\n            .then(selectWebFontRules)\n            .then(function (rules) {\n                return rules.map(newWebFont);\n            });\n\n        function selectWebFontRules(cssRules) {\n            return cssRules\n                .filter(function (rule) {\n                    return rule.type === CSSRule.FONT_FACE_RULE;\n                })\n                .filter(function (rule) {\n                    return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                });\n        }\n\n        function getCssRules(styleSheets) {\n            var cssRules = [];\n            styleSheets.forEach(function (sheet) {\n                try {\n                    util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                } catch (e) {\n                    console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                }\n            });\n            return cssRules;\n        }\n\n        function newWebFont(webFontRule) {\n            return {\n                resolve: function resolve() {\n                    var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                    return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                },\n                src: function () {\n                    return webFontRule.style.getPropertyValue('src');\n                }\n            };\n        }\n    }\n}\n\nfunction newImages() {\n    return {\n        inlineAll: inlineAll,\n        impl: {\n            newImage: newImage\n        }\n    };\n\n    function newImage(element) {\n        return {\n            inline: inline\n        };\n\n        function inline(get) {\n            if (util.isDataUrl(element.src)) return Promise.resolve();\n\n            return Promise.resolve(element.src)\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(element.src));\n                })\n                .then(function (dataUrl) {\n                    return new Promise(function (resolve, reject) {\n                        element.onload = resolve;\n                        element.onerror = reject;\n                        element.src = dataUrl;\n                    });\n                });\n        }\n    }\n\n    function inlineAll(node) {\n        if (!(node instanceof Element)) return Promise.resolve(node);\n\n        return inlineBackground(node)\n            .then(function () {\n                if (node instanceof HTMLImageElement)\n                    return newImage(node).inline();\n                else\n                    return Promise.all(\n                        util.asArray(node.childNodes).map(function (child) {\n                            return inlineAll(child);\n                        })\n                    );\n            });\n\n        function inlineBackground(node) {\n            var background = node.style.getPropertyValue('background');\n\n            if (!background) return Promise.resolve(node);\n\n            return inliner.inlineAll(background)\n                .then(function (inlined) {\n                    node.style.setProperty(\n                        'background',\n                        inlined,\n                        node.style.getPropertyPriority('background')\n                    );\n                })\n                .then(function () {\n                    return node;\n                });\n        }\n    }\n}\n\nexport default domtoimage;\n","<template>\n  <div class=\"page-wrapper page-stitch\" id=\"page-stitch\">\n    <el-tooltip :content=\"direction === '1' ? '横向' : '竖向'\" placement=\"right\">\n      <el-switch\n        v-model=\"direction\"\n        class=\"stitch-radio\"\n        style=\"--el-switch-off-color: #ff4949\"\n        size=\"large\"\n        :active-action-icon=\"Right\"\n        :inactive-action-icon=\"Bottom\"\n        active-value=\"1\"\n        inactive-value=\"2\"\n      />\n    </el-tooltip>\n    <el-upload\n      ref=\"upload\"\n      action=\"\"\n      multiple\n      accept=\"image/png,image/jpeg,image/webp\"\n      style=\"position: absolute;\"\n      :show-file-list=\"false\"\n      :auto-upload=\"false\"\n      :on-change=\"handleUpload\"\n    >\n      <el-tooltip content=\"上传图片\" placement=\"left\">\n        <el-icon class=\"stitch-icon add\"><UploadFilled /></el-icon>\n      </el-tooltip>\n    </el-upload>\n    <el-tooltip content=\"清空\" placement=\"bottom\">\n      <el-icon class=\"stitch-icon delete\" @click.stop=\"handleDelete\"><Refresh /></el-icon>\n    </el-tooltip>\n    <el-tooltip content=\"下载\" placement=\"bottom\">\n      <el-icon class=\"stitch-icon download\" @click.stop=\"handleDownload\"><Download /></el-icon>\n    </el-tooltip>\n    <VueDraggableNext\n      class=\"stitch-delete\"\n      :class=\"drag ? 'delete' : ''\"\n      v-bind=\"{ group: 'delete' }\"\n      v-model=\"deletes\"\n    >\n      <span v-if=\"drag\">拖进此区域删除</span>\n    </VueDraggableNext>\n    <div\n      class=\"stitch-content\"\n      :class=\"[direction === '1' ? 'horizontal' : 'vertical', images.length === 0 ? 'center' : '']\"\n    >\n      <VueDraggableNext\n        v-if=\"images.length > 0\"\n        class=\"stitch-draggable\"\n        id=\"stitch-canvas\"\n        v-model=\"images\"\n        draggable=\".image\"\n        v-bind=\"{ group: 'delete' }\"\n        @start=\"drag = true\"\n        @end=\"handleDragEnd\"\n      >\n        <div class=\"image\" v-for=\"(item, index) in images\" :key=\"index\">\n          <img :src=\"item\" alt=\"\">\n        </div>\n      </VueDraggableNext>\n      <el-upload\n        v-else\n        ref=\"uploadCenter\"\n        action=\"\"\n        multiple\n        accept=\"image/png,image/jpeg,image/webp\"\n        :show-file-list=\"false\"\n        :auto-upload=\"false\"\n        :on-change=\"handleUpload\"\n      >\n        <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n        <div>点击上传图片</div>\n      </el-upload>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { ElLoading, ElNotification } from 'element-plus'\nimport { Right, Bottom } from '@element-plus/icons-vue'\nimport { VueDraggableNext } from 'vue-draggable-next'\nimport domtoimage from '../utils/dom-to-image'\n\nconst direction = ref('1')\n\nconst images = ref([])\nconst deletes = ref([])\n\nconst upload = ref()\nconst uploadCenter = ref()\n\nconst drag = ref(false)\n\nconst handleDragEnd = () => {\n  deletes.value = []\n  setTimeout(() => {\n    drag.value = false\n  }, 150)\n}\n\nconst handleDelete = () => {\n  images.value = []\n  deletes.value = []\n}\n\nconst handleUpload = (file) => {\n  const url = URL.createObjectURL(file.raw)\n  images.value.push(url)\n  upload.value?.clearFiles?.()\n  uploadCenter.value?.clearFiles?.()\n}\n\nconst downloadFile = (href, fileName = '图片') => {\n  const downloadElement = document.createElement('a')\n  downloadElement.href = href\n  downloadElement.download = `${fileName}.png`\n  document.body.appendChild(downloadElement)\n  downloadElement.click()\n  document.body.removeChild(downloadElement)\n  window.URL.revokeObjectURL(href)\n}\n\nconst handleDownload = () => {\n  if (images.value.length === 0) {\n    ElNotification({\n      title: '提示',\n      message: '请先上传图片',\n      type: 'error',\n    })\n    return\n  }\n  const loadingInstance = ElLoading.service({\n    fullscreen: true,\n    lock: true,\n    target: document.getElementById('page-stitch'),\n    text: '生成中...'\n  })\n  domtoimage.toPng(document.getElementById('stitch-canvas'), { scale: 2 })\n    .then(function (url) {\n      downloadFile(url)\n      setTimeout(() => {\n        loadingInstance.close()\n      }, 200)\n    })\n    .catch(function () {\n      setTimeout(() => {\n        loadingInstance.close()\n        ElNotification({\n          title: '提示',\n          message: '生成图片失败',\n          type: 'error',\n        })\n      }, 200)\n    })\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-stitch {\n  position: relative;\n  padding: 0 !important;\n  .stitch-delete {\n    position: fixed;\n    width: calc(100% - 200px);\n    height: 70px;\n    left: 200px;\n    top: 0;\n    overflow: hidden;\n    &.delete {\n      z-index: 20;\n      transition: background-color 0.15s;\n      background-color: var(--el-color-danger-light-9);\n      span {\n        position: absolute;\n        font-size: 16px;\n        font-weight: 700;\n        color: var(--el-color-danger);\n        left: 50%;\n        top: 50%;\n        line-height: 1;\n        transform: translate(-50%, -50%);\n      }\n    }\n    .image {\n      opacity: 0;\n    }\n  }\n  .stitch-radio {\n    position: fixed;\n    left: 220px;\n    top: 10px;\n    z-index: 10;\n  }\n  .stitch-icon {\n    position: fixed;\n    right: 30px;\n    top: 20px;\n    z-index: 10;\n    color: var(--el-color-primary);\n    font-size: 28px;\n    cursor: pointer;\n    &.add {\n      right: 130px;\n    }\n    &.delete {\n      right: 80px;\n    }\n  }\n  .stitch-content {\n    display: flex;\n    height: calc(100% - 70px);\n    margin-top: 70px;\n    overflow: hidden;\n    &.horizontal {\n      align-items: center;\n      overflow-x: auto;\n      overflow-y: hidden;\n      .stitch-draggable {\n        height: 60%;\n        white-space: nowrap;\n      }\n      .image {\n        display: inline-block;\n        height: 100%;\n        img {\n          height: 100%;\n          width: auto;\n        }\n      }\n    }\n    &.vertical {\n      width: 100%;\n      justify-content: center;\n      overflow-x: hidden;\n      overflow-y: auto;\n      .stitch-draggable {\n        width: 50%;\n      }\n      img {\n        display: block;\n        width: 100%;\n      }\n    }\n    &.center {\n      overflow: hidden;\n      align-items: center;\n      justify-content: center;\n      :deep(.el-upload) {\n        flex-direction: column;\n        color: var(--el-text-color-placeholder);\n        .el-icon {\n          font-size: 80px;\n        }\n      }\n    }\n  }\n  .image {\n    position: relative;\n    overflow: hidden;\n    cursor: pointer;\n    &::after {\n      transition: background-color 0.15s;\n    }\n    &:hover {\n      &::after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        left: 0;\n        top: 0;\n        background-color: rgba(255, 255, 255, 0.15);\n      }\n    }\n  }\n}\n</style>","import script from \"./StitchPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StitchPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./StitchPage.vue?vue&type=style&index=0&id=5ef4c37f&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5ef4c37f\"]])\n\nexport default __exports__","// 代码来至 hls.js  https://github.com/video-dev/hls.js\n\nfunction removePadding(buffer) {\n  const outputBytes = buffer.byteLength;\n  const paddingBytes =\n    outputBytes && new DataView(buffer).getUint8(outputBytes - 1);\n  if (paddingBytes) {\n    return buffer.slice(0, outputBytes - paddingBytes);\n  } else {\n    return buffer;\n  }\n}\n\nexport default function AESDecryptor() {\n  return {\n    constructor() {\n      this.rcon = [0x0, 0x1, 0x2, 0x4, 0x8, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n      this.subMix = [\n        new Uint32Array(256),\n        new Uint32Array(256),\n        new Uint32Array(256),\n        new Uint32Array(256),\n      ];\n      this.invSubMix = [\n        new Uint32Array(256),\n        new Uint32Array(256),\n        new Uint32Array(256),\n        new Uint32Array(256),\n      ];\n      this.sBox = new Uint32Array(256);\n      this.invSBox = new Uint32Array(256);\n\n      // Changes during runtime\n      this.key = new Uint32Array(0);\n\n      this.initTable();\n    },\n\n    // Using view.getUint32() also swaps the byte order.\n    uint8ArrayToUint32Array_(arrayBuffer) {\n      let view = new DataView(arrayBuffer);\n      let newArray = new Uint32Array(4);\n      for (let i = 0; i < 4; i++) {\n        newArray[i] = view.getUint32(i * 4);\n      }\n\n      return newArray;\n    },\n\n    initTable() {\n      let sBox = this.sBox;\n      let invSBox = this.invSBox;\n      let subMix = this.subMix;\n      let subMix0 = subMix[0];\n      let subMix1 = subMix[1];\n      let subMix2 = subMix[2];\n      let subMix3 = subMix[3];\n      let invSubMix = this.invSubMix;\n      let invSubMix0 = invSubMix[0];\n      let invSubMix1 = invSubMix[1];\n      let invSubMix2 = invSubMix[2];\n      let invSubMix3 = invSubMix[3];\n\n      let d = new Uint32Array(256);\n      let x = 0;\n      let xi = 0;\n      let i = 0;\n      for (i = 0; i < 256; i++) {\n        if (i < 128) {\n          d[i] = i << 1;\n        } else {\n          d[i] = (i << 1) ^ 0x11b;\n        }\n      }\n\n      for (i = 0; i < 256; i++) {\n        let sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n        sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n        sBox[x] = sx;\n        invSBox[sx] = x;\n\n        // Compute multiplication\n        let x2 = d[x];\n        let x4 = d[x2];\n        let x8 = d[x4];\n\n        // Compute sub/invSub bytes, mix columns tables\n        let t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n        subMix0[x] = (t << 24) | (t >>> 8);\n        subMix1[x] = (t << 16) | (t >>> 16);\n        subMix2[x] = (t << 8) | (t >>> 24);\n        subMix3[x] = t;\n\n        // Compute inv sub bytes, inv mix columns tables\n        t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n        invSubMix0[sx] = (t << 24) | (t >>> 8);\n        invSubMix1[sx] = (t << 16) | (t >>> 16);\n        invSubMix2[sx] = (t << 8) | (t >>> 24);\n        invSubMix3[sx] = t;\n\n        // Compute next counter\n        if (!x) {\n          x = xi = 1;\n        } else {\n          x = x2 ^ d[d[d[x8 ^ x2]]];\n          xi ^= d[d[xi]];\n        }\n      }\n    },\n\n    expandKey(keyBuffer) {\n      // convert keyBuffer to Uint32Array\n      let key = this.uint8ArrayToUint32Array_(keyBuffer);\n      let sameKey = true;\n      let offset = 0;\n\n      while (offset < key.length && sameKey) {\n        sameKey = key[offset] === this.key[offset];\n        offset++;\n      }\n\n      if (sameKey) {\n        return;\n      }\n\n      this.key = key;\n      let keySize = (this.keySize = key.length);\n\n      if (keySize !== 4 && keySize !== 6 && keySize !== 8) {\n        throw new Error(\"Invalid aes key size=\" + keySize);\n      }\n\n      let ksRows = (this.ksRows = (keySize + 6 + 1) * 4);\n      let ksRow;\n      let invKsRow;\n\n      let keySchedule = (this.keySchedule = new Uint32Array(ksRows));\n      let invKeySchedule = (this.invKeySchedule = new Uint32Array(ksRows));\n      let sbox = this.sBox;\n      let rcon = this.rcon;\n\n      let invSubMix = this.invSubMix;\n      let invSubMix0 = invSubMix[0];\n      let invSubMix1 = invSubMix[1];\n      let invSubMix2 = invSubMix[2];\n      let invSubMix3 = invSubMix[3];\n\n      let prev;\n      let t;\n\n      for (ksRow = 0; ksRow < ksRows; ksRow++) {\n        if (ksRow < keySize) {\n          prev = keySchedule[ksRow] = key[ksRow];\n          continue;\n        }\n        t = prev;\n\n        if (ksRow % keySize === 0) {\n          // Rot word\n          t = (t << 8) | (t >>> 24);\n\n          // Sub word\n          t =\n            (sbox[t >>> 24] << 24) |\n            (sbox[(t >>> 16) & 0xff] << 16) |\n            (sbox[(t >>> 8) & 0xff] << 8) |\n            sbox[t & 0xff];\n\n          // Mix Rcon\n          t ^= rcon[(ksRow / keySize) | 0] << 24;\n        } else if (keySize > 6 && ksRow % keySize === 4) {\n          // Sub word\n          t =\n            (sbox[t >>> 24] << 24) |\n            (sbox[(t >>> 16) & 0xff] << 16) |\n            (sbox[(t >>> 8) & 0xff] << 8) |\n            sbox[t & 0xff];\n        }\n\n        keySchedule[ksRow] = prev = (keySchedule[ksRow - keySize] ^ t) >>> 0;\n      }\n\n      for (invKsRow = 0; invKsRow < ksRows; invKsRow++) {\n        ksRow = ksRows - invKsRow;\n        if (invKsRow & 3) {\n          t = keySchedule[ksRow];\n        } else {\n          t = keySchedule[ksRow - 4];\n        }\n\n        if (invKsRow < 4 || ksRow <= 4) {\n          invKeySchedule[invKsRow] = t;\n        } else {\n          invKeySchedule[invKsRow] =\n            invSubMix0[sbox[t >>> 24]] ^\n            invSubMix1[sbox[(t >>> 16) & 0xff]] ^\n            invSubMix2[sbox[(t >>> 8) & 0xff]] ^\n            invSubMix3[sbox[t & 0xff]];\n        }\n\n        invKeySchedule[invKsRow] = invKeySchedule[invKsRow] >>> 0;\n      }\n    },\n\n    // Adding this as a method greatly improves performance.\n    networkToHostOrderSwap(word) {\n      return (\n        (word << 24) |\n        ((word & 0xff00) << 8) |\n        ((word & 0xff0000) >> 8) |\n        (word >>> 24)\n      );\n    },\n\n    decrypt(inputArrayBuffer, offset, aesIV, removePKCS7Padding) {\n      let nRounds = this.keySize + 6;\n      let invKeySchedule = this.invKeySchedule;\n      let invSBOX = this.invSBox;\n\n      let invSubMix = this.invSubMix;\n      let invSubMix0 = invSubMix[0];\n      let invSubMix1 = invSubMix[1];\n      let invSubMix2 = invSubMix[2];\n      let invSubMix3 = invSubMix[3];\n\n      let initVector = this.uint8ArrayToUint32Array_(aesIV);\n      let initVector0 = initVector[0];\n      let initVector1 = initVector[1];\n      let initVector2 = initVector[2];\n      let initVector3 = initVector[3];\n\n      let inputInt32 = new Int32Array(inputArrayBuffer);\n      let outputInt32 = new Int32Array(inputInt32.length);\n\n      let t0, t1, t2, t3;\n      let s0, s1, s2, s3;\n      let inputWords0, inputWords1, inputWords2, inputWords3;\n\n      let ksRow, i;\n      let swapWord = this.networkToHostOrderSwap;\n\n      while (offset < inputInt32.length) {\n        inputWords0 = swapWord(inputInt32[offset]);\n        inputWords1 = swapWord(inputInt32[offset + 1]);\n        inputWords2 = swapWord(inputInt32[offset + 2]);\n        inputWords3 = swapWord(inputInt32[offset + 3]);\n\n        s0 = inputWords0 ^ invKeySchedule[0];\n        s1 = inputWords3 ^ invKeySchedule[1];\n        s2 = inputWords2 ^ invKeySchedule[2];\n        s3 = inputWords1 ^ invKeySchedule[3];\n\n        ksRow = 4;\n\n        // Iterate through the rounds of decryption\n        for (i = 1; i < nRounds; i++) {\n          t0 =\n            invSubMix0[s0 >>> 24] ^\n            invSubMix1[(s1 >> 16) & 0xff] ^\n            invSubMix2[(s2 >> 8) & 0xff] ^\n            invSubMix3[s3 & 0xff] ^\n            invKeySchedule[ksRow];\n          t1 =\n            invSubMix0[s1 >>> 24] ^\n            invSubMix1[(s2 >> 16) & 0xff] ^\n            invSubMix2[(s3 >> 8) & 0xff] ^\n            invSubMix3[s0 & 0xff] ^\n            invKeySchedule[ksRow + 1];\n          t2 =\n            invSubMix0[s2 >>> 24] ^\n            invSubMix1[(s3 >> 16) & 0xff] ^\n            invSubMix2[(s0 >> 8) & 0xff] ^\n            invSubMix3[s1 & 0xff] ^\n            invKeySchedule[ksRow + 2];\n          t3 =\n            invSubMix0[s3 >>> 24] ^\n            invSubMix1[(s0 >> 16) & 0xff] ^\n            invSubMix2[(s1 >> 8) & 0xff] ^\n            invSubMix3[s2 & 0xff] ^\n            invKeySchedule[ksRow + 3];\n          // Update state\n          s0 = t0;\n          s1 = t1;\n          s2 = t2;\n          s3 = t3;\n\n          ksRow = ksRow + 4;\n        }\n\n        // Shift rows, sub bytes, add round key\n        t0 =\n          (invSBOX[s0 >>> 24] << 24) ^\n          (invSBOX[(s1 >> 16) & 0xff] << 16) ^\n          (invSBOX[(s2 >> 8) & 0xff] << 8) ^\n          invSBOX[s3 & 0xff] ^\n          invKeySchedule[ksRow];\n        t1 =\n          (invSBOX[s1 >>> 24] << 24) ^\n          (invSBOX[(s2 >> 16) & 0xff] << 16) ^\n          (invSBOX[(s3 >> 8) & 0xff] << 8) ^\n          invSBOX[s0 & 0xff] ^\n          invKeySchedule[ksRow + 1];\n        t2 =\n          (invSBOX[s2 >>> 24] << 24) ^\n          (invSBOX[(s3 >> 16) & 0xff] << 16) ^\n          (invSBOX[(s0 >> 8) & 0xff] << 8) ^\n          invSBOX[s1 & 0xff] ^\n          invKeySchedule[ksRow + 2];\n        t3 =\n          (invSBOX[s3 >>> 24] << 24) ^\n          (invSBOX[(s0 >> 16) & 0xff] << 16) ^\n          (invSBOX[(s1 >> 8) & 0xff] << 8) ^\n          invSBOX[s2 & 0xff] ^\n          invKeySchedule[ksRow + 3];\n        ksRow = ksRow + 3;\n\n        // Write\n        outputInt32[offset] = swapWord(t0 ^ initVector0);\n        outputInt32[offset + 1] = swapWord(t3 ^ initVector1);\n        outputInt32[offset + 2] = swapWord(t2 ^ initVector2);\n        outputInt32[offset + 3] = swapWord(t1 ^ initVector3);\n\n        // reset initVector to last 4 unsigned int\n        initVector0 = inputWords0;\n        initVector1 = inputWords1;\n        initVector2 = inputWords2;\n        initVector3 = inputWords3;\n\n        offset = offset + 4;\n      }\n\n      return removePKCS7Padding\n        ? removePadding(outputInt32.buffer)\n        : outputInt32.buffer;\n    },\n\n    destroy() {\n      this.key = undefined;\n      this.keySize = undefined;\n      this.ksRows = undefined;\n\n      this.sBox = undefined;\n      this.invSBox = undefined;\n      this.subMix = undefined;\n      this.invSubMix = undefined;\n      this.keySchedule = undefined;\n      this.invKeySchedule = undefined;\n\n      this.rcon = undefined;\n    },\n  };\n}\n","<template>\n  <div class=\"page-wrapper page-m3u8\">\n    <el-input\n      v-model=\"url\"\n      style=\"max-width: 600px\"\n      placeholder=\"请输入.m3u8格式的链接\"\n      class=\"input-with-select\"\n    >\n      <template #prepend>\n        <el-select v-model=\"model\" placeholder=\"请选择\" style=\"width: 115px\">\n          <el-option label=\"原格式\" value=\"1\" />\n          <el-option label=\"MP4\" value=\"2\" />\n        </el-select>\n      </template>\n      <template #append>\n        <el-button type=\"primary\" @click=\"handleStart\" :loading=\"downloadLoading\">下载</el-button>\n      </template>\n    </el-input>\n    <el-progress\n      :text-inside=\"true\"\n      :stroke-width=\"20\"\n      :percentage=\"percentage\"\n      style=\"max-width: 600px;margin-top: 50px;\"\n    />\n    <el-timeline style=\"max-width: 600px;margin-top: 50px;\">\n      <el-timeline-item\n        v-for=\"(item, index) in log\"\n        :key=\"index\"\n        :timestamp=\"item.timestamp\"\n        :hollow=\"index === 0\"\n        :type=\"index === 0 ? 'primary' : ''\"\n        :color=\"item.color\"\n      >\n        {{ item.content }}\n      </el-timeline-item>\n    </el-timeline>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { ElNotification } from 'element-plus'\nimport dayjs from 'dayjs'\nimport AESDecryptor from '@/utils/aes-decryptor'\nimport muxjs from '@/utils/mux-mp4'\n\nconst url = ref('')\nconst model = ref('1')\nconst downloadLoading = ref(false)\nconst downloadIndex = ref(0)\nconst startSegment = ref(1)\nconst endSegment = ref(1)\nconst targetSegment = ref(0)\nconst tsUrlList = ref([])\nconst finishList = ref([])\nconst mediaFileList = ref([])\nconst finishNum = ref(0)\nconst errorNum = ref(0)\nconst durationSecond = ref(0)\n// AES 视频解密配置\nconst aesConf = ref({\n  method: '', // 加密算法\n  uri: '', // key 所在文件路径\n  iv: '', // 偏移值\n  key: '', // 秘钥\n  decryptor: null, // 解码器对象\n  stringToBuffer: function (str) {\n    return new TextEncoder().encode(str)\n  },\n})\nconst log = ref([])\n\nconst percentage = computed(() => {\n  if (endSegment.value - startSegment.value === 0) return 0 \n  return parseInt((downloadIndex.value - 1) / (endSegment.value - startSegment.value) * 100)\n})\n\nconst ajax = (options = {}) => {\n  return new Promise(resolve => {\n    let xhr = new XMLHttpRequest()\n    if (options.type === 'file') {\n      xhr.responseType = 'arraybuffer'\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        let status = xhr.status\n        if (status >= 200 && status < 300) {\n          resolve(xhr.response)\n        } else {\n          resolve(null)\n        }\n      }\n    }\n\n    xhr.open('GET', options.url, true)\n    xhr.send(null)\n  })\n}\n\n// 合成URL\nconst applyURL = (targetURL, baseURL) => {\n  baseURL = baseURL || location.href\n  if (targetURL.indexOf('http') === 0) {\n    // 当前页面使用 https 协议时，强制使 ts 资源也使用 https 协议获取\n    if(location.href.indexOf('https') === 0){\n      return targetURL.replace('http://','https://')\n    }\n    return targetURL\n  } else if (targetURL[0] === '/') {\n    let domain = baseURL.split('/')\n    return domain[0] + '//' + domain[2] + targetURL\n  } else {\n    let domain = baseURL.split('/')\n    domain.pop()\n    return domain.join('/') + '/' + targetURL\n  }\n}\n\n// ts 片段的 AES 解码\nconst aesDecrypt = (data, index) => {\n  const iv = aesConf.value.iv || new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, index])\n  return aesConf.value.decryptor.decrypt(data, 0, iv.buffer || iv, true)\n}\n\nconst conversionMp4 = (data, index) => {\n  return new Promise(resolve => {\n    if (model.value === '1') {\n      resolve(data)\n    } else if (model.value === '2') {\n      const transmuxer = new muxjs.Transmuxer({\n        keepOriginalTimestamps: true,\n        duration: parseInt(durationSecond.value),\n      })\n      transmuxer.on('data', segment => {\n        if (index === startSegment.value - 1) {\n          let data = new Uint8Array(segment.initSegment.byteLength + segment.data.byteLength)\n          data.set(segment.initSegment, 0)\n          data.set(segment.data, segment.initSegment.byteLength)\n          resolve(data.buffer)\n        } else {\n          resolve(segment.data)\n        }\n      })\n      transmuxer.push(new Uint8Array(data))\n      transmuxer.flush()\n    }\n  })\n}\n\nconst downloadFile = (fileDataList, fileName) => {\n  let fileBlob = null\n  let a = document.createElement('a')\n  if (model.value === '2') {\n    fileBlob = new Blob(fileDataList, { type: 'video/mp4' }) // 创建一个Blob对象，并设置文件的 MIME 类型\n    a.download = fileName + '.mp4'\n  } else {\n    fileBlob = new Blob(fileDataList, { type: 'video/MP2T' }) // 创建一个Blob对象，并设置文件的 MIME 类型\n    a.download = fileName + '.ts'\n  }\n  a.href = URL.createObjectURL(fileBlob)\n  a.style.display = 'none'\n  document.body.appendChild(a)\n  a.click()\n  a.remove()\n  downloadLoading.value = false\n}\n\n// 下载分片\nconst downloadTS = () => {\n  const download = async () => {\n    const index = downloadIndex.value\n    if (index >= endSegment.value) return\n    downloadIndex.value++\n    // log.value.unshift({\n    //   content: `下载第${downloadIndex.value}个视频片段`,\n    //   timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n    // })\n    if (finishList.value[index].status === '') {\n      finishList.value[index].status = 'downloading'\n      const file = await ajax({ url: tsUrlList.value[index], type: 'file' })\n      if (file) {\n        const data = aesConf.value.uri ? aesDecrypt(file, index) : file\n        // 若下载mp4须另外处理\n        const afterData = await conversionMp4(data, index)\n        mediaFileList.value[index - startSegment.value + 1] = afterData // 判断文件是否需要解密\n        finishList.value[index].status = 'finish'\n        finishNum.value++\n\n        if (finishNum.value === targetSegment.value) {\n          const title = new URL(url.value).searchParams.get('title') || dayjs(new Date()).format('YYYY_MM_DD_hh_mm_ss')\n          downloadFile(mediaFileList.value, title)\n          log.value.unshift({\n            content: '全部下载完成',\n            timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n          })\n          return\n        }\n        if (downloadIndex.value < endSegment.value) {\n          download()\n        }\n      } else {\n        errorNum.value++\n        finishList.value[index].status = 'error'\n        if (downloadIndex.value < endSegment.value) {\n          download()\n        }\n      }\n    } else if (downloadIndex.value < endSegment.value) {\n      download()\n    }\n  }\n  for (let i = 0; i < Math.min(6, targetSegment.value - finishNum.value); i++) {\n    download()\n  }\n}\n\nconst getM3U8 = async (link) => {\n  log.value.unshift({\n    content: '开始提取视频片段地址',\n    timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n  })\n  const m3u8Str = await ajax({ url: link })\n  if (!m3u8Str) {\n    ElNotification({\n      title: '提示',\n      message: '提取视频片段地址失败',\n      type: 'error',\n    })\n    log.value.unshift({\n      content: '提取视频片段地址失败',\n      timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS'),\n      color: '#F56C6C'\n    })\n    return\n  }\n  downloadLoading.value = true\n  tsUrlList.value = []\n  finishList.value = []\n  m3u8Str.split('\\n').forEach((item) => {\n    if (/^[^#]/.test(item)) {\n      tsUrlList.value.push(applyURL(item, link))\n      finishList.value.push({ title: item, status: '' })\n    }\n  })\n  log.value.unshift({\n    content: '提取视频片段地址成功',\n    timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n  })\n  startSegment.value = 1\n  endSegment.value = tsUrlList.value.length\n  targetSegment.value = endSegment.value - startSegment.value + 1\n  downloadIndex.value = startSegment.value - 1\n  finishNum.value = 0\n  errorNum.value = 0\n\n  // 获取需要下载的 MP4 视频长度\n  if (model.value === '2') {\n    log.value.unshift({\n      content: '获取需要下载的 MP4 视频长度',\n      timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n    })\n    let infoIndex = 0\n    m3u8Str.split('\\n').forEach(item => {\n      if (item.toUpperCase().indexOf('#EXTINF:') > -1) {\n        // 计算视频总时长，设置 mp4 信息时使用\n        infoIndex++\n        if (startSegment.value <= infoIndex && infoIndex <= endSegment.value) {\n          durationSecond.value += parseFloat(item.split('#EXTINF:')[1])\n        }\n      }\n    })\n  }\n\n  log.value.unshift({\n    content: '检测视频 AES 加密',\n    timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n  })\n  // 检测视频 AES 加密\n  if (m3u8Str.indexOf('#EXT-X-KEY') > -1) {\n    aesConf.value.method = (m3u8Str.match(/(.*METHOD=([^,\\s]+))/) || ['', '', ''])[2]\n    aesConf.value.uri = (m3u8Str.match(/(.*URI=\"([^\"]+))\"/) || ['', '', ''])[2]\n    aesConf.value.iv = (m3u8Str.match(/(.*IV=([^,\\s]+))/) || ['', '', ''])[2]\n    aesConf.value.iv = aesConf.value.iv ? aesConf.value.stringToBuffer(aesConf.value.iv) : ''\n\n    log.value.unshift({\n      content: '获取 AES 配置',\n      timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n    })\n    // 获取AES配置\n    aesConf.value.uri = applyURL(aesConf.value.uri, link)\n    const key = await ajax({ url: aesConf.value.uri, type: 'file' })\n    if (!key) {\n      ElNotification({\n        title: '提示',\n        message: '解密失败',\n        type: 'error',\n      })\n      downloadLoading.value = false\n      log.value.unshift({\n        content: '解密失败',\n        timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS'),\n        color: '#F56C6C'\n      })\n      return\n    }\n    aesConf.value.key = key\n    aesConf.value.decryptor = new AESDecryptor()\n    aesConf.value.decryptor.constructor()\n    aesConf.value.decryptor.expandKey(aesConf.value.key)\n    downloadTS()\n  } else if (tsUrlList.value.length > 0) {\n    // 如果视频没加密，则直接下载片段，否则先下载秘钥\n    log.value.unshift({\n      content: '无加密，直接开始下载',\n      timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n    })\n    downloadTS()\n  } else {\n    ElNotification({\n      title: '提示',\n      message: '资源为空，请查看链接是否有效',\n      type: 'error',\n    })\n    downloadLoading.value = false\n    log.value.unshift({\n      content: '资源为空，请查看链接是否有效',\n      timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS'),\n      color: '#F56C6C'\n    })\n  }\n}\n\nconst handleStart = () => {\n  if (url.value.toLocaleLowerCase().indexOf('.m3u8') < 0) {\n    ElNotification({\n      title: '提示',\n      message: '请输入正确的链接',\n      type: 'error',\n    })\n    return\n  }\n  log.value = []\n  log.value.unshift({\n    content: '开始下载',\n    timestamp: dayjs(new Date()).format('YYYY-MM-DD hh:mm:ss:SSS')\n  })\n  getM3U8(url.value)\n}\n\n</script>\n\n<style lang=\"less\" scoped>\n.page-m3u8 {\n  \n}\n</style>","import script from \"./M3u8Page.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./M3u8Page.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./M3u8Page.vue?vue&type=style&index=0&id=6e72f200&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6e72f200\"]])\n\nexport default __exports__","import Home from '@/pages/HomePage.vue'\nimport Plugins from '@/pages/PluginsPage.vue'\nimport Triangle from '@/pages/TrianglePage.vue'\nimport Shadow from '@/pages/ShadowPage.vue'\nimport Qrcode from '@/pages/QrcodePage.vue'\nimport Beautify from '@/pages/BeautifyPage.vue'\nimport ParseQrcode from '@/pages/ParseQrcode.vue'\nimport Regexp from '@/pages/RegexpPage.vue'\nimport Transfer from '@/pages/TransferPage.vue'\nimport Movie from '@/pages/MoviePage.vue'\nimport Stitch from '@/pages/StitchPage.vue'\nimport M3u8 from '@/pages/M3u8Page.vue'\n\nconst routes = [\n  {\n    path: '/',\n    component: Home,\n    meta: {\n      title: '网站导航'\n    }\n  },\n  {\n    path: '/plugins',\n    component: Plugins,\n    meta: {\n      title: '插件导航'\n    }\n  },\n  {\n    path: '/triangle',\n    component: Triangle,\n    meta: {\n      title: 'CSS三角形生成器'\n    }\n  },\n  {\n    path: '/shadow',\n    component: Shadow,\n    meta: {\n      title: 'Photoshop投影转CSS3'\n    }\n  },\n  {\n    path: '/qrcode',\n    component: Qrcode,\n    meta: {\n      title: '二维码在线生成'\n    }\n  },\n  {\n    path: '/beautify',\n    component: Beautify,\n    meta: {\n      title: '代码格式化'\n    }\n  },\n  {\n    path: '/parse-qrcode',\n    component: ParseQrcode,\n    meta: {\n      title: '解析二维码',\n      keepAlive: true\n    }\n  },\n  {\n    path: '/regexp',\n    component: Regexp,\n    meta: {\n      title: '正则表达式'\n    }\n  },\n  {\n    path: '/transfer',\n    component: Transfer,\n    meta: {\n      title: '转换工具'\n    }\n  },\n  {\n    path: '/movie',\n    component: Movie,\n    meta: {\n      title: '影视资源'\n    }\n  },\n  {\n    path: '/stitch',\n    component: Stitch,\n    meta: {\n      title: '拼接图片'\n    }\n  },\n  {\n    path: '/m3u8',\n    component: M3u8,\n    meta: {\n      title: 'm3u8视频下载'\n    }\n  }\n]\n\nexport default routes","import { createApp, createVNode } from 'vue'\nimport { createRouter, createWebHashHistory } from 'vue-router'\n\nimport hljs from 'highlight.js/lib/core'\nimport hljsVuePlugin from '@highlightjs/vue-plugin'\nimport javascript from 'highlight.js/lib/languages/javascript'\nimport typescript from 'highlight.js/lib/languages/typescript'\nimport json from 'highlight.js/lib/languages/json'\nimport css from 'highlight.js/lib/languages/css'\nimport less from 'highlight.js/lib/languages/less'\nimport scss from 'highlight.js/lib/languages/scss'\nimport xml from 'highlight.js/lib/languages/xml'\nimport markdown from 'highlight.js/lib/languages/markdown'\nimport 'highlight.js/styles/tomorrow-night-blue.css'\nimport 'highlight.js/lib/common'\n\nimport ElementPlus from 'element-plus'\nimport * as Icons from '@element-plus/icons-vue'\nimport 'element-plus/dist/index.css'\n\nimport App from './App.vue'\nimport routes from './router'\nimport './styles/main.less'\nimport './styles/flex.less'\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n\nrouter.beforeEach((to) => {\n  document.title = to.meta?.title || '前端笔记'\n})\n\nhljs.registerLanguage('javascript', javascript)\nhljs.registerLanguage('typescript', typescript)\nhljs.registerLanguage('json', json)\nhljs.registerLanguage('css', css)\nhljs.registerLanguage('less', less)\nhljs.registerLanguage('scss', scss)\nhljs.registerLanguage('xml', xml)\nhljs.registerLanguage('markdown', markdown)\n\nconst app = createApp(App)\n\napp.use(router)\napp.use(ElementPlus)\napp.use(hljsVuePlugin)\n\nconst Icon = (props) => {\n  const { icon } = props\n  return createVNode(Icons[icon])\n}\nObject.keys(Icons).forEach((key) => {\n  app.component(key, Icons[key])\n})\napp.component('IconComp', Icon)\n\napp.mount('#app')\n","/*! @name mux.js @version 6.3.0 @license Apache-2.0 */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('global/window')) :\n  typeof define === 'function' && define.amd ? define(['global/window'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.muxjs = factory(global.window));\n}(this, (function (window) { 'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var window__default = /*#__PURE__*/_interopDefaultLegacy(window);\n\n  var MAX_UINT32$1 = Math.pow(2, 32);\n\n  var getUint64$3 = function getUint64(uint8) {\n    var dv = new DataView(uint8.buffer, uint8.byteOffset, uint8.byteLength);\n    var value;\n\n    if (dv.getBigUint64) {\n      value = dv.getBigUint64(0);\n\n      if (value < Number.MAX_SAFE_INTEGER) {\n        return Number(value);\n      }\n\n      return value;\n    }\n\n    return dv.getUint32(0) * MAX_UINT32$1 + dv.getUint32(4);\n  };\n\n  var numbers = {\n    getUint64: getUint64$3,\n    MAX_UINT32: MAX_UINT32$1\n  };\n\n  var MAX_UINT32 = numbers.MAX_UINT32;\n  var box, dinf, esds, ftyp, mdat, mfhd, minf, moof, moov, mvex, mvhd, trak, tkhd, mdia, mdhd, hdlr, sdtp, stbl, stsd, traf, trex, trun$1, types, MAJOR_BRAND, MINOR_VERSION, AVC1_BRAND, VIDEO_HDLR, AUDIO_HDLR, HDLR_TYPES, VMHD, SMHD, DREF, STCO, STSC, STSZ, STTS; // pre-calculate constants\n  var customDuration = 0xffffffff;\n\n  (function () {\n    var i;\n    types = {\n      avc1: [],\n      // codingname\n      avcC: [],\n      btrt: [],\n      dinf: [],\n      dref: [],\n      esds: [],\n      ftyp: [],\n      hdlr: [],\n      mdat: [],\n      mdhd: [],\n      mdia: [],\n      mfhd: [],\n      minf: [],\n      moof: [],\n      moov: [],\n      mp4a: [],\n      // codingname\n      mvex: [],\n      mvhd: [],\n      pasp: [],\n      sdtp: [],\n      smhd: [],\n      stbl: [],\n      stco: [],\n      stsc: [],\n      stsd: [],\n      stsz: [],\n      stts: [],\n      styp: [],\n      tfdt: [],\n      tfhd: [],\n      traf: [],\n      trak: [],\n      trun: [],\n      trex: [],\n      tkhd: [],\n      vmhd: []\n    }; // In environments where Uint8Array is undefined (e.g., IE8), skip set up so that we\n    // don't throw an error\n\n    if (typeof Uint8Array === 'undefined') {\n      return;\n    }\n\n    for (i in types) {\n      if (types.hasOwnProperty(i)) {\n        types[i] = [i.charCodeAt(0), i.charCodeAt(1), i.charCodeAt(2), i.charCodeAt(3)];\n      }\n    }\n\n    MAJOR_BRAND = new Uint8Array(['i'.charCodeAt(0), 's'.charCodeAt(0), 'o'.charCodeAt(0), 'm'.charCodeAt(0)]);\n    AVC1_BRAND = new Uint8Array(['a'.charCodeAt(0), 'v'.charCodeAt(0), 'c'.charCodeAt(0), '1'.charCodeAt(0)]);\n    MINOR_VERSION = new Uint8Array([0, 0, 0, 1]);\n    VIDEO_HDLR = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65, 0x6f, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n    ]);\n    AUDIO_HDLR = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x53, 0x6f, 0x75, 0x6e, 0x64, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\n    ]);\n    HDLR_TYPES = {\n      video: VIDEO_HDLR,\n      audio: AUDIO_HDLR\n    };\n    DREF = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n    ]);\n    SMHD = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, // balance, 0 means centered\n    0x00, 0x00 // reserved\n    ]);\n    STCO = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    STSC = STCO;\n    STSZ = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00 // sample_count\n    ]);\n    STTS = STCO;\n    VMHD = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // opcolor\n    ]);\n  })();\n\n  box = function box(type) {\n    var payload = [],\n        size = 0,\n        i,\n        result,\n        view;\n\n    for (i = 1; i < arguments.length; i++) {\n      payload.push(arguments[i]);\n    }\n\n    i = payload.length; // calculate the total size we need to allocate\n\n    while (i--) {\n      size += payload[i].byteLength;\n    }\n\n    result = new Uint8Array(size + 8);\n    view = new DataView(result.buffer, result.byteOffset, result.byteLength);\n    view.setUint32(0, result.byteLength);\n    result.set(type, 4); // copy the payload into the result\n\n    for (i = 0, size = 8; i < payload.length; i++) {\n      result.set(payload[i], size);\n      size += payload[i].byteLength;\n    }\n\n    return result;\n  };\n\n  dinf = function dinf() {\n    return box(types.dinf, box(types.dref, DREF));\n  };\n\n  esds = function esds(track) {\n    return box(types.esds, new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    // ES_Descriptor\n    0x03, // tag, ES_DescrTag\n    0x19, // length\n    0x00, 0x00, // ES_ID\n    0x00, // streamDependenceFlag, URL_flag, reserved, streamPriority\n    // DecoderConfigDescriptor\n    0x04, // tag, DecoderConfigDescrTag\n    0x11, // length\n    0x40, // object type\n    0x15, // streamType\n    0x00, 0x06, 0x00, // bufferSizeDB\n    0x00, 0x00, 0xda, 0xc0, // maxBitrate\n    0x00, 0x00, 0xda, 0xc0, // avgBitrate\n    // DecoderSpecificInfo\n    0x05, // tag, DecoderSpecificInfoTag\n    0x02, // length\n    // ISO/IEC 14496-3, AudioSpecificConfig\n    // for samplingFrequencyIndex see ISO/IEC 13818-7:2006, 8.1.3.2.2, Table 35\n    track.audioobjecttype << 3 | track.samplingfrequencyindex >>> 1, track.samplingfrequencyindex << 7 | track.channelcount << 3, 0x06, 0x01, 0x02 // GASpecificConfig\n    ]));\n  };\n\n  ftyp = function ftyp() {\n    return box(types.ftyp, MAJOR_BRAND, MINOR_VERSION, MAJOR_BRAND, AVC1_BRAND);\n  };\n\n  hdlr = function hdlr(type) {\n    return box(types.hdlr, HDLR_TYPES[type]);\n  };\n\n  mdat = function mdat(data) {\n    return box(types.mdat, data);\n  };\n\n  mdhd = function mdhd(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x02, // creation_time\n    0x00, 0x00, 0x00, 0x03, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n    track.duration >>> 24 & 0xFF, track.duration >>> 16 & 0xFF, track.duration >>> 8 & 0xFF, track.duration & 0xFF, // duration\n    0x55, 0xc4, // 'und' language (undetermined)\n    0x00, 0x00]); // Use the sample rate from the track metadata, when it is\n    // defined. The sample rate can be parsed out of an ADTS header, for\n    // instance.\n\n    if (track.samplerate) {\n      result[12] = track.samplerate >>> 24 & 0xFF;\n      result[13] = track.samplerate >>> 16 & 0xFF;\n      result[14] = track.samplerate >>> 8 & 0xFF;\n      result[15] = track.samplerate & 0xFF;\n      //重置该轨道长度\n      track.duration = track.duration / 90000 * track.samplerate;\n      result[16] = (track.duration >>> 24) & 0xFF;\n      result[17] = (track.duration >>> 16) & 0xFF;\n      result[18] = (track.duration >>> 8) & 0xFF;\n      result[19] = track.duration & 0xFF;\n    }\n\n    return box(types.mdhd, result);\n  };\n\n  mdia = function mdia(track) {\n    return box(types.mdia, mdhd(track), hdlr(track.type), minf(track));\n  };\n\n  mfhd = function mfhd(sequenceNumber) {\n    return box(types.mfhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // flags\n    (sequenceNumber & 0xFF000000) >> 24, (sequenceNumber & 0xFF0000) >> 16, (sequenceNumber & 0xFF00) >> 8, sequenceNumber & 0xFF // sequence_number\n    ]));\n  };\n\n  minf = function minf(track) {\n    return box(types.minf, track.type === 'video' ? box(types.vmhd, VMHD) : box(types.smhd, SMHD), dinf(), stbl(track));\n  };\n\n  moof = function moof(sequenceNumber, tracks) {\n    var trackFragments = [],\n        i = tracks.length; // build traf boxes for each track fragment\n\n    while (i--) {\n      trackFragments[i] = traf(tracks[i]);\n    }\n\n    return box.apply(null, [types.moof, mfhd(sequenceNumber)].concat(trackFragments));\n  };\n  /**\n   * Returns a movie box.\n   * @param tracks {array} the tracks associated with this movie\n   * @see ISO/IEC 14496-12:2012(E), section 8.2.1\n   */\n\n\n  moov = function moov(tracks) {\n    var i = tracks.length,\n        boxes = [];\n\n    while (i--) {\n      boxes[i] = trak(tracks[i]);\n    }\n\n    return box.apply(null, [types.moov, mvhd(customDuration)].concat(boxes).concat(mvex(tracks)));\n  };\n\n  mvex = function mvex(tracks) {\n    var i = tracks.length,\n        boxes = [];\n\n    while (i--) {\n      boxes[i] = trex(tracks[i]);\n    }\n\n    return box.apply(null, [types.mvex].concat(boxes));\n  };\n\n  mvhd = function mvhd(duration) {\n    var bytes = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // creation_time\n    0x00, 0x00, 0x00, 0x02, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n    (duration & 0xFF000000) >> 24, (duration & 0xFF0000) >> 16, (duration & 0xFF00) >> 8, duration & 0xFF, // duration\n    0x00, 0x01, 0x00, 0x00, // 1.0 rate\n    0x01, 0x00, // 1.0 volume\n    0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n    0xff, 0xff, 0xff, 0xff // next_track_ID\n    ]);\n    return box(types.mvhd, bytes);\n  };\n\n  sdtp = function sdtp(track) {\n    var samples = track.samples || [],\n        bytes = new Uint8Array(4 + samples.length),\n        flags,\n        i; // leave the full box header (4 bytes) all zero\n    // write the sample table\n\n    for (i = 0; i < samples.length; i++) {\n      flags = samples[i].flags;\n      bytes[i + 4] = flags.dependsOn << 4 | flags.isDependedOn << 2 | flags.hasRedundancy;\n    }\n\n    return box(types.sdtp, bytes);\n  };\n\n  stbl = function stbl(track) {\n    return box(types.stbl, stsd(track), box(types.stts, STTS), box(types.stsc, STSC), box(types.stsz, STSZ), box(types.stco, STCO));\n  };\n\n  (function () {\n    var videoSample, audioSample;\n\n    stsd = function stsd(track) {\n      return box(types.stsd, new Uint8Array([0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01]), track.type === 'video' ? videoSample(track) : audioSample(track));\n    };\n\n    videoSample = function videoSample(track) {\n      var sps = track.sps || [],\n          pps = track.pps || [],\n          sequenceParameterSets = [],\n          pictureParameterSets = [],\n          i,\n          avc1Box; // assemble the SPSs\n\n      for (i = 0; i < sps.length; i++) {\n        sequenceParameterSets.push((sps[i].byteLength & 0xFF00) >>> 8);\n        sequenceParameterSets.push(sps[i].byteLength & 0xFF); // sequenceParameterSetLength\n\n        sequenceParameterSets = sequenceParameterSets.concat(Array.prototype.slice.call(sps[i])); // SPS\n      } // assemble the PPSs\n\n\n      for (i = 0; i < pps.length; i++) {\n        pictureParameterSets.push((pps[i].byteLength & 0xFF00) >>> 8);\n        pictureParameterSets.push(pps[i].byteLength & 0xFF);\n        pictureParameterSets = pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));\n      }\n\n      avc1Box = [types.avc1, new Uint8Array([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n      (track.width & 0xff00) >> 8, track.width & 0xff, // width\n      (track.height & 0xff00) >> 8, track.height & 0xff, // height\n      0x00, 0x48, 0x00, 0x00, // horizresolution\n      0x00, 0x48, 0x00, 0x00, // vertresolution\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // frame_count\n      0x13, 0x76, 0x69, 0x64, 0x65, 0x6f, 0x6a, 0x73, 0x2d, 0x63, 0x6f, 0x6e, 0x74, 0x72, 0x69, 0x62, 0x2d, 0x68, 0x6c, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // compressorname\n      0x00, 0x18, // depth = 24\n      0x11, 0x11 // pre_defined = -1\n      ]), box(types.avcC, new Uint8Array([0x01, // configurationVersion\n      track.profileIdc, // AVCProfileIndication\n      track.profileCompatibility, // profile_compatibility\n      track.levelIdc, // AVCLevelIndication\n      0xff // lengthSizeMinusOne, hard-coded to 4 bytes\n      ].concat([sps.length], // numOfSequenceParameterSets\n      sequenceParameterSets, // \"SPS\"\n      [pps.length], // numOfPictureParameterSets\n      pictureParameterSets // \"PPS\"\n      ))), box(types.btrt, new Uint8Array([0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n      0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n      0x00, 0x2d, 0xc6, 0xc0 // avgBitrate\n      ]))];\n\n      if (track.sarRatio) {\n        var hSpacing = track.sarRatio[0],\n            vSpacing = track.sarRatio[1];\n        avc1Box.push(box(types.pasp, new Uint8Array([(hSpacing & 0xFF000000) >> 24, (hSpacing & 0xFF0000) >> 16, (hSpacing & 0xFF00) >> 8, hSpacing & 0xFF, (vSpacing & 0xFF000000) >> 24, (vSpacing & 0xFF0000) >> 16, (vSpacing & 0xFF00) >> 8, vSpacing & 0xFF])));\n      }\n\n      return box.apply(null, avc1Box);\n    };\n\n    audioSample = function audioSample(track) {\n      return box(types.mp4a, new Uint8Array([// SampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      // AudioSampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      (track.channelcount & 0xff00) >> 8, track.channelcount & 0xff, // channelcount\n      (track.samplesize & 0xff00) >> 8, track.samplesize & 0xff, // samplesize\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      (track.samplerate & 0xff00) >> 8, track.samplerate & 0xff, 0x00, 0x00 // samplerate, 16.16\n      // MP4AudioSampleEntry, ISO/IEC 14496-14\n      ]), esds(track));\n    };\n  })();\n\n  tkhd = function tkhd(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x07, // flags\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x00, // reserved\n    (track.duration & 0xFF000000) >> 24, (track.duration & 0xFF0000) >> 16, (track.duration & 0xFF00) >> 8, track.duration & 0xFF, // duration\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, // layer\n    0x00, 0x00, // alternate_group\n    0x01, 0x00, // non-audio track volume\n    0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    (track.width & 0xFF00) >> 8, track.width & 0xFF, 0x00, 0x00, // width\n    (track.height & 0xFF00) >> 8, track.height & 0xFF, 0x00, 0x00 // height\n    ]);\n    return box(types.tkhd, result);\n  };\n  /**\n   * Generate a track fragment (traf) box. A traf box collects metadata\n   * about tracks in a movie fragment (moof) box.\n   */\n\n\n  traf = function traf(track) {\n    var trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun, sampleDependencyTable, dataOffset, upperWordBaseMediaDecodeTime, lowerWordBaseMediaDecodeTime;\n    trackFragmentHeader = box(types.tfhd, new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x3a, // flags\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x01, // sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x00, 0x00, 0x00 // default_sample_flags\n    ]));\n    upperWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime / MAX_UINT32);\n    lowerWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime % MAX_UINT32);\n    trackFragmentDecodeTime = box(types.tfdt, new Uint8Array([0x01, // version 1\n    0x00, 0x00, 0x00, // flags\n    // baseMediaDecodeTime\n    upperWordBaseMediaDecodeTime >>> 24 & 0xFF, upperWordBaseMediaDecodeTime >>> 16 & 0xFF, upperWordBaseMediaDecodeTime >>> 8 & 0xFF, upperWordBaseMediaDecodeTime & 0xFF, lowerWordBaseMediaDecodeTime >>> 24 & 0xFF, lowerWordBaseMediaDecodeTime >>> 16 & 0xFF, lowerWordBaseMediaDecodeTime >>> 8 & 0xFF, lowerWordBaseMediaDecodeTime & 0xFF])); // the data offset specifies the number of bytes from the start of\n    // the containing moof to the first payload byte of the associated\n    // mdat\n\n    dataOffset = 32 + // tfhd\n    20 + // tfdt\n    8 + // traf header\n    16 + // mfhd\n    8 + // moof header\n    8; // mdat header\n    // audio tracks require less metadata\n\n    if (track.type === 'audio') {\n      trackFragmentRun = trun$1(track, dataOffset);\n      return box(types.traf, trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun);\n    } // video tracks should contain an independent and disposable samples\n    // box (sdtp)\n    // generate one and adjust offsets to match\n\n\n    sampleDependencyTable = sdtp(track);\n    trackFragmentRun = trun$1(track, sampleDependencyTable.length + dataOffset);\n    return box(types.traf, trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun, sampleDependencyTable);\n  };\n  /**\n   * Generate a track box.\n   * @param track {object} a track definition\n   * @return {Uint8Array} the track box\n   */\n\n\n  trak = function trak(track) {\n    track.duration = track.duration || customDuration;\n    return box(types.trak, tkhd(track), mdia(track));\n  };\n\n  trex = function trex(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n    ]); // the last two bytes of default_sample_flags is the sample\n    // degradation priority, a hint about the importance of this sample\n    // relative to others. Lower the degradation priority for all sample\n    // types other than video.\n\n    if (track.type !== 'video') {\n      result[result.length - 1] = 0x00;\n    }\n\n    return box(types.trex, result);\n  };\n\n  (function () {\n    var audioTrun, videoTrun, trunHeader; // This method assumes all samples are uniform. That is, if a\n    // duration is present for the first sample, it will be present for\n    // all subsequent samples.\n    // see ISO/IEC 14496-12:2012, Section 8.8.8.1\n\n    trunHeader = function trunHeader(samples, offset) {\n      var durationPresent = 0,\n          sizePresent = 0,\n          flagsPresent = 0,\n          compositionTimeOffset = 0; // trun flag constants\n\n      if (samples.length) {\n        if (samples[0].duration !== undefined) {\n          durationPresent = 0x1;\n        }\n\n        if (samples[0].size !== undefined) {\n          sizePresent = 0x2;\n        }\n\n        if (samples[0].flags !== undefined) {\n          flagsPresent = 0x4;\n        }\n\n        if (samples[0].compositionTimeOffset !== undefined) {\n          compositionTimeOffset = 0x8;\n        }\n      }\n\n      return [0x00, // version 0\n      0x00, durationPresent | sizePresent | flagsPresent | compositionTimeOffset, 0x01, // flags\n      (samples.length & 0xFF000000) >>> 24, (samples.length & 0xFF0000) >>> 16, (samples.length & 0xFF00) >>> 8, samples.length & 0xFF, // sample_count\n      (offset & 0xFF000000) >>> 24, (offset & 0xFF0000) >>> 16, (offset & 0xFF00) >>> 8, offset & 0xFF // data_offset\n      ];\n    };\n\n    videoTrun = function videoTrun(track, offset) {\n      var bytesOffest, bytes, header, samples, sample, i;\n      samples = track.samples || [];\n      offset += 8 + 12 + 16 * samples.length;\n      header = trunHeader(samples, offset);\n      bytes = new Uint8Array(header.length + samples.length * 16);\n      bytes.set(header);\n      bytesOffest = header.length;\n\n      for (i = 0; i < samples.length; i++) {\n        sample = samples[i];\n        bytes[bytesOffest++] = (sample.duration & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.duration & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.duration & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.duration & 0xFF; // sample_duration\n\n        bytes[bytesOffest++] = (sample.size & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.size & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.size & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.size & 0xFF; // sample_size\n\n        bytes[bytesOffest++] = sample.flags.isLeading << 2 | sample.flags.dependsOn;\n        bytes[bytesOffest++] = sample.flags.isDependedOn << 6 | sample.flags.hasRedundancy << 4 | sample.flags.paddingValue << 1 | sample.flags.isNonSyncSample;\n        bytes[bytesOffest++] = sample.flags.degradationPriority & 0xF0 << 8;\n        bytes[bytesOffest++] = sample.flags.degradationPriority & 0x0F; // sample_flags\n\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.compositionTimeOffset & 0xFF; // sample_composition_time_offset\n      }\n\n      return box(types.trun, bytes);\n    };\n\n    audioTrun = function audioTrun(track, offset) {\n      var bytes, bytesOffest, header, samples, sample, i;\n      samples = track.samples || [];\n      offset += 8 + 12 + 8 * samples.length;\n      header = trunHeader(samples, offset);\n      bytes = new Uint8Array(header.length + samples.length * 8);\n      bytes.set(header);\n      bytesOffest = header.length;\n\n      for (i = 0; i < samples.length; i++) {\n        sample = samples[i];\n        bytes[bytesOffest++] = (sample.duration & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.duration & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.duration & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.duration & 0xFF; // sample_duration\n\n        bytes[bytesOffest++] = (sample.size & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.size & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.size & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.size & 0xFF; // sample_size\n      }\n\n      return box(types.trun, bytes);\n    };\n\n    trun$1 = function trun(track, offset) {\n      if (track.type === 'audio') {\n        return audioTrun(track, offset);\n      }\n\n      return videoTrun(track, offset);\n    };\n  })();\n\n  var mp4Generator = {\n    ftyp: ftyp,\n    mdat: mdat,\n    moof: moof,\n    moov: moov,\n    initSegment: function initSegment(tracks) {\n      var fileType = ftyp(),\n          movie = moov(tracks),\n          result;\n      result = new Uint8Array(fileType.byteLength + movie.byteLength);\n      result.set(fileType);\n      result.set(movie, fileType.byteLength);\n      return result;\n    }\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n  var toUnsigned$3 = function toUnsigned(value) {\n    return value >>> 0;\n  };\n\n  var toHexString$1 = function toHexString(value) {\n    return ('00' + value.toString(16)).slice(-2);\n  };\n\n  var bin = {\n    toUnsigned: toUnsigned$3,\n    toHexString: toHexString$1\n  };\n\n  var parseType$1 = function parseType(buffer) {\n    var result = '';\n    result += String.fromCharCode(buffer[0]);\n    result += String.fromCharCode(buffer[1]);\n    result += String.fromCharCode(buffer[2]);\n    result += String.fromCharCode(buffer[3]);\n    return result;\n  };\n\n  var parseType_1 = parseType$1;\n\n  var toUnsigned$2 = bin.toUnsigned;\n\n  var findBox = function findBox(data, path) {\n    var results = [],\n        i,\n        size,\n        type,\n        end,\n        subresults;\n\n    if (!path.length) {\n      // short-circuit the search for empty paths\n      return null;\n    }\n\n    for (i = 0; i < data.byteLength;) {\n      size = toUnsigned$2(data[i] << 24 | data[i + 1] << 16 | data[i + 2] << 8 | data[i + 3]);\n      type = parseType_1(data.subarray(i + 4, i + 8));\n      end = size > 1 ? i + size : data.byteLength;\n\n      if (type === path[0]) {\n        if (path.length === 1) {\n          // this is the end of the path and we've found the box we were\n          // looking for\n          results.push(data.subarray(i + 8, end));\n        } else {\n          // recursively search for the next box along the path\n          subresults = findBox(data.subarray(i + 8, end), path.slice(1));\n\n          if (subresults.length) {\n            results = results.concat(subresults);\n          }\n        }\n      }\n\n      i = end;\n    } // we've finished searching all of data\n\n\n    return results;\n  };\n\n  var findBox_1 = findBox;\n\n  /**\n   * Returns the first string in the data array ending with a null char '\\0'\n   * @param {UInt8} data \n   * @returns the string with the null char\n   */\n  var uint8ToCString$1 = function uint8ToCString(data) {\n    var index = 0;\n    var curChar = String.fromCharCode(data[index]);\n    var retString = '';\n\n    while (curChar !== '\\0') {\n      retString += curChar;\n      index++;\n      curChar = String.fromCharCode(data[index]);\n    } // Add nullChar\n\n\n    retString += curChar;\n    return retString;\n  };\n\n  var string = {\n    uint8ToCString: uint8ToCString$1\n  };\n\n  var uint8ToCString = string.uint8ToCString;\n  var getUint64$2 = numbers.getUint64;\n  /**\n   * Based on: ISO/IEC 23009 Section: 5.10.3.3\n   * References:\n   * https://dashif-documents.azurewebsites.net/Events/master/event.html#emsg-format\n   * https://aomediacodec.github.io/id3-emsg/\n   * \n   * Takes emsg box data as a uint8 array and returns a emsg box object\n   * @param {UInt8Array} boxData data from emsg box\n   * @returns A parsed emsg box object\n   */\n\n  var parseEmsgBox = function parseEmsgBox(boxData) {\n    // version + flags\n    var offset = 4;\n    var version = boxData[0];\n    var scheme_id_uri, value, timescale, presentation_time, presentation_time_delta, event_duration, id, message_data;\n\n    if (version === 0) {\n      scheme_id_uri = uint8ToCString(boxData.subarray(offset));\n      offset += scheme_id_uri.length;\n      value = uint8ToCString(boxData.subarray(offset));\n      offset += value.length;\n      var dv = new DataView(boxData.buffer);\n      timescale = dv.getUint32(offset);\n      offset += 4;\n      presentation_time_delta = dv.getUint32(offset);\n      offset += 4;\n      event_duration = dv.getUint32(offset);\n      offset += 4;\n      id = dv.getUint32(offset);\n      offset += 4;\n    } else if (version === 1) {\n      var dv = new DataView(boxData.buffer);\n      timescale = dv.getUint32(offset);\n      offset += 4;\n      presentation_time = getUint64$2(boxData.subarray(offset));\n      offset += 8;\n      event_duration = dv.getUint32(offset);\n      offset += 4;\n      id = dv.getUint32(offset);\n      offset += 4;\n      scheme_id_uri = uint8ToCString(boxData.subarray(offset));\n      offset += scheme_id_uri.length;\n      value = uint8ToCString(boxData.subarray(offset));\n      offset += value.length;\n    }\n\n    message_data = new Uint8Array(boxData.subarray(offset, boxData.byteLength));\n    var emsgBox = {\n      scheme_id_uri: scheme_id_uri,\n      value: value,\n      // if timescale is undefined or 0 set to 1 \n      timescale: timescale ? timescale : 1,\n      presentation_time: presentation_time,\n      presentation_time_delta: presentation_time_delta,\n      event_duration: event_duration,\n      id: id,\n      message_data: message_data\n    };\n    return isValidEmsgBox(version, emsgBox) ? emsgBox : undefined;\n  };\n  /**\n   * Scales a presentation time or time delta with an offset with a provided timescale\n   * @param {number} presentationTime \n   * @param {number} timescale \n   * @param {number} timeDelta \n   * @param {number} offset \n   * @returns the scaled time as a number\n   */\n\n\n  var scaleTime = function scaleTime(presentationTime, timescale, timeDelta, offset) {\n    return presentationTime || presentationTime === 0 ? presentationTime / timescale : offset + timeDelta / timescale;\n  };\n  /**\n   * Checks the emsg box data for validity based on the version\n   * @param {number} version of the emsg box to validate\n   * @param {Object} emsg the emsg data to validate\n   * @returns if the box is valid as a boolean\n   */\n\n\n  var isValidEmsgBox = function isValidEmsgBox(version, emsg) {\n    var hasScheme = emsg.scheme_id_uri !== '\\0';\n    var isValidV0Box = version === 0 && isDefined(emsg.presentation_time_delta) && hasScheme;\n    var isValidV1Box = version === 1 && isDefined(emsg.presentation_time) && hasScheme; // Only valid versions of emsg are 0 and 1\n\n    return !(version > 1) && isValidV0Box || isValidV1Box;\n  }; // Utility function to check if an object is defined\n\n\n  var isDefined = function isDefined(data) {\n    return data !== undefined || data !== null;\n  };\n\n  var emsg = {\n    parseEmsgBox: parseEmsgBox,\n    scaleTime: scaleTime\n  };\n\n  var tfhd = function tfhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      trackId: view.getUint32(4)\n    },\n        baseDataOffsetPresent = result.flags[2] & 0x01,\n        sampleDescriptionIndexPresent = result.flags[2] & 0x02,\n        defaultSampleDurationPresent = result.flags[2] & 0x08,\n        defaultSampleSizePresent = result.flags[2] & 0x10,\n        defaultSampleFlagsPresent = result.flags[2] & 0x20,\n        durationIsEmpty = result.flags[0] & 0x010000,\n        defaultBaseIsMoof = result.flags[0] & 0x020000,\n        i;\n    i = 8;\n\n    if (baseDataOffsetPresent) {\n      i += 4; // truncate top 4 bytes\n      // FIXME: should we read the full 64 bits?\n\n      result.baseDataOffset = view.getUint32(12);\n      i += 4;\n    }\n\n    if (sampleDescriptionIndexPresent) {\n      result.sampleDescriptionIndex = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleDurationPresent) {\n      result.defaultSampleDuration = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleSizePresent) {\n      result.defaultSampleSize = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleFlagsPresent) {\n      result.defaultSampleFlags = view.getUint32(i);\n    }\n\n    if (durationIsEmpty) {\n      result.durationIsEmpty = true;\n    }\n\n    if (!baseDataOffsetPresent && defaultBaseIsMoof) {\n      result.baseDataOffsetIsMoof = true;\n    }\n\n    return result;\n  };\n\n  var parseTfhd = tfhd;\n\n  var parseSampleFlags = function parseSampleFlags(flags) {\n    return {\n      isLeading: (flags[0] & 0x0c) >>> 2,\n      dependsOn: flags[0] & 0x03,\n      isDependedOn: (flags[1] & 0xc0) >>> 6,\n      hasRedundancy: (flags[1] & 0x30) >>> 4,\n      paddingValue: (flags[1] & 0x0e) >>> 1,\n      isNonSyncSample: flags[1] & 0x01,\n      degradationPriority: flags[2] << 8 | flags[3]\n    };\n  };\n\n  var parseSampleFlags_1 = parseSampleFlags;\n\n  var trun = function trun(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      samples: []\n    },\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        // Flag interpretation\n    dataOffsetPresent = result.flags[2] & 0x01,\n        // compare with 2nd byte of 0x1\n    firstSampleFlagsPresent = result.flags[2] & 0x04,\n        // compare with 2nd byte of 0x4\n    sampleDurationPresent = result.flags[1] & 0x01,\n        // compare with 2nd byte of 0x100\n    sampleSizePresent = result.flags[1] & 0x02,\n        // compare with 2nd byte of 0x200\n    sampleFlagsPresent = result.flags[1] & 0x04,\n        // compare with 2nd byte of 0x400\n    sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n        // compare with 2nd byte of 0x800\n    sampleCount = view.getUint32(4),\n        offset = 8,\n        sample;\n\n    if (dataOffsetPresent) {\n      // 32 bit signed integer\n      result.dataOffset = view.getInt32(offset);\n      offset += 4;\n    } // Overrides the flags for the first sample only. The order of\n    // optional values will be: duration, size, compositionTimeOffset\n\n\n    if (firstSampleFlagsPresent && sampleCount) {\n      sample = {\n        flags: parseSampleFlags_1(data.subarray(offset, offset + 4))\n      };\n      offset += 4;\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        if (result.version === 1) {\n          sample.compositionTimeOffset = view.getInt32(offset);\n        } else {\n          sample.compositionTimeOffset = view.getUint32(offset);\n        }\n\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n      sampleCount--;\n    }\n\n    while (sampleCount--) {\n      sample = {};\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleFlagsPresent) {\n        sample.flags = parseSampleFlags_1(data.subarray(offset, offset + 4));\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        if (result.version === 1) {\n          sample.compositionTimeOffset = view.getInt32(offset);\n        } else {\n          sample.compositionTimeOffset = view.getUint32(offset);\n        }\n\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n    }\n\n    return result;\n  };\n\n  var parseTrun = trun;\n\n  var toUnsigned$1 = bin.toUnsigned;\n  var getUint64$1 = numbers.getUint64;\n\n  var tfdt = function tfdt(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4))\n    };\n\n    if (result.version === 1) {\n      result.baseMediaDecodeTime = getUint64$1(data.subarray(4));\n    } else {\n      result.baseMediaDecodeTime = toUnsigned$1(data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7]);\n    }\n\n    return result;\n  };\n\n  var parseTfdt = tfdt;\n\n  // IE11 doesn't support indexOf for TypedArrays.\n  // Once IE11 support is dropped, this function should be removed.\n  var typedArrayIndexOf$1 = function typedArrayIndexOf(typedArray, element, fromIndex) {\n    if (!typedArray) {\n      return -1;\n    }\n\n    var currentIndex = fromIndex;\n\n    for (; currentIndex < typedArray.length; currentIndex++) {\n      if (typedArray[currentIndex] === element) {\n        return currentIndex;\n      }\n    }\n\n    return -1;\n  };\n\n  var typedArray = {\n    typedArrayIndexOf: typedArrayIndexOf$1\n  };\n\n  var typedArrayIndexOf = typedArray.typedArrayIndexOf,\n      // Frames that allow different types of text encoding contain a text\n  // encoding description byte [ID3v2.4.0 section 4.]\n  textEncodingDescriptionByte = {\n    Iso88591: 0x00,\n    // ISO-8859-1, terminated with \\0.\n    Utf16: 0x01,\n    // UTF-16 encoded Unicode BOM, terminated with \\0\\0\n    Utf16be: 0x02,\n    // UTF-16BE encoded Unicode, without BOM, terminated with \\0\\0\n    Utf8: 0x03 // UTF-8 encoded Unicode, terminated with \\0\n\n  },\n      // return a percent-encoded representation of the specified byte range\n  // @see http://en.wikipedia.org/wiki/Percent-encoding \n  percentEncode$1 = function percentEncode(bytes, start, end) {\n    var i,\n        result = '';\n\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n\n    return result;\n  },\n      // return the string representation of the specified byte range,\n  // interpreted as UTf-8.\n  parseUtf8 = function parseUtf8(bytes, start, end) {\n    return decodeURIComponent(percentEncode$1(bytes, start, end));\n  },\n      // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n  parseIso88591$1 = function parseIso88591(bytes, start, end) {\n    return unescape(percentEncode$1(bytes, start, end)); // jshint ignore:line\n  },\n      parseSyncSafeInteger$1 = function parseSyncSafeInteger(data) {\n    return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n  },\n      frameParsers = {\n    'APIC': function APIC(frame) {\n      var i = 1,\n          mimeTypeEndIndex,\n          descriptionEndIndex,\n          LINK_MIME_TYPE = '-->';\n\n      if (frame.data[0] !== textEncodingDescriptionByte.Utf8) {\n        // ignore frames with unrecognized character encodings\n        return;\n      } // parsing fields [ID3v2.4.0 section 4.14.]\n\n\n      mimeTypeEndIndex = typedArrayIndexOf(frame.data, 0, i);\n\n      if (mimeTypeEndIndex < 0) {\n        // malformed frame\n        return;\n      } // parsing Mime type field (terminated with \\0)\n\n\n      frame.mimeType = parseIso88591$1(frame.data, i, mimeTypeEndIndex);\n      i = mimeTypeEndIndex + 1; // parsing 1-byte Picture Type field\n\n      frame.pictureType = frame.data[i];\n      i++;\n      descriptionEndIndex = typedArrayIndexOf(frame.data, 0, i);\n\n      if (descriptionEndIndex < 0) {\n        // malformed frame\n        return;\n      } // parsing Description field (terminated with \\0)\n\n\n      frame.description = parseUtf8(frame.data, i, descriptionEndIndex);\n      i = descriptionEndIndex + 1;\n\n      if (frame.mimeType === LINK_MIME_TYPE) {\n        // parsing Picture Data field as URL (always represented as ISO-8859-1 [ID3v2.4.0 section 4.])\n        frame.url = parseIso88591$1(frame.data, i, frame.data.length);\n      } else {\n        // parsing Picture Data field as binary data\n        frame.pictureData = frame.data.subarray(i, frame.data.length);\n      }\n    },\n    'T*': function T(frame) {\n      if (frame.data[0] !== textEncodingDescriptionByte.Utf8) {\n        // ignore frames with unrecognized character encodings\n        return;\n      } // parse text field, do not include null terminator in the frame value\n      // frames that allow different types of encoding contain terminated text [ID3v2.4.0 section 4.]\n\n\n      frame.value = parseUtf8(frame.data, 1, frame.data.length).replace(/\\0*$/, ''); // text information frames supports multiple strings, stored as a terminator separated list [ID3v2.4.0 section 4.2.]\n\n      frame.values = frame.value.split('\\0');\n    },\n    'TXXX': function TXXX(frame) {\n      var descriptionEndIndex;\n\n      if (frame.data[0] !== textEncodingDescriptionByte.Utf8) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      descriptionEndIndex = typedArrayIndexOf(frame.data, 0, 1);\n\n      if (descriptionEndIndex === -1) {\n        return;\n      } // parse the text fields\n\n\n      frame.description = parseUtf8(frame.data, 1, descriptionEndIndex); // do not include the null terminator in the tag value\n      // frames that allow different types of encoding contain terminated text\n      // [ID3v2.4.0 section 4.]\n\n      frame.value = parseUtf8(frame.data, descriptionEndIndex + 1, frame.data.length).replace(/\\0*$/, '');\n      frame.data = frame.value;\n    },\n    'W*': function W(frame) {\n      // parse URL field; URL fields are always represented as ISO-8859-1 [ID3v2.4.0 section 4.]\n      // if the value is followed by a string termination all the following information should be ignored [ID3v2.4.0 section 4.3]\n      frame.url = parseIso88591$1(frame.data, 0, frame.data.length).replace(/\\0.*$/, '');\n    },\n    'WXXX': function WXXX(frame) {\n      var descriptionEndIndex;\n\n      if (frame.data[0] !== textEncodingDescriptionByte.Utf8) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      descriptionEndIndex = typedArrayIndexOf(frame.data, 0, 1);\n\n      if (descriptionEndIndex === -1) {\n        return;\n      } // parse the description and URL fields\n\n\n      frame.description = parseUtf8(frame.data, 1, descriptionEndIndex); // URL fields are always represented as ISO-8859-1 [ID3v2.4.0 section 4.]\n      // if the value is followed by a string termination all the following information\n      // should be ignored [ID3v2.4.0 section 4.3]\n\n      frame.url = parseIso88591$1(frame.data, descriptionEndIndex + 1, frame.data.length).replace(/\\0.*$/, '');\n    },\n    'PRIV': function PRIV(frame) {\n      var i;\n\n      for (i = 0; i < frame.data.length; i++) {\n        if (frame.data[i] === 0) {\n          // parse the description and URL fields\n          frame.owner = parseIso88591$1(frame.data, 0, i);\n          break;\n        }\n      }\n\n      frame.privateData = frame.data.subarray(i + 1);\n      frame.data = frame.privateData;\n    }\n  };\n\n  var parseId3Frames$1 = function parseId3Frames(data) {\n    var frameSize,\n        frameHeader,\n        frameStart = 10,\n        tagSize = 0,\n        frames = []; // If we don't have enough data for a header, 10 bytes, \n    // or 'ID3' in the first 3 bytes this is not a valid ID3 tag.\n\n    if (data.length < 10 || data[0] !== 'I'.charCodeAt(0) || data[1] !== 'D'.charCodeAt(0) || data[2] !== '3'.charCodeAt(0)) {\n      return;\n    } // the frame size is transmitted as a 28-bit integer in the\n    // last four bytes of the ID3 header.\n    // The most significant bit of each byte is dropped and the\n    // results concatenated to recover the actual value.\n\n\n    tagSize = parseSyncSafeInteger$1(data.subarray(6, 10)); // ID3 reports the tag size excluding the header but it's more\n    // convenient for our comparisons to include it\n\n    tagSize += 10; // check bit 6 of byte 5 for the extended header flag.\n\n    var hasExtendedHeader = data[5] & 0x40;\n\n    if (hasExtendedHeader) {\n      // advance the frame start past the extended header\n      frameStart += 4; // header size field\n\n      frameStart += parseSyncSafeInteger$1(data.subarray(10, 14));\n      tagSize -= parseSyncSafeInteger$1(data.subarray(16, 20)); // clip any padding off the end\n    } // parse one or more ID3 frames\n    // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n    do {\n      // determine the number of bytes in this frame\n      frameSize = parseSyncSafeInteger$1(data.subarray(frameStart + 4, frameStart + 8));\n\n      if (frameSize < 1) {\n        break;\n      }\n\n      frameHeader = String.fromCharCode(data[frameStart], data[frameStart + 1], data[frameStart + 2], data[frameStart + 3]);\n      var frame = {\n        id: frameHeader,\n        data: data.subarray(frameStart + 10, frameStart + frameSize + 10)\n      };\n      frame.key = frame.id; // parse frame values\n\n      if (frameParsers[frame.id]) {\n        // use frame specific parser\n        frameParsers[frame.id](frame);\n      } else if (frame.id[0] === 'T') {\n        // use text frame generic parser\n        frameParsers['T*'](frame);\n      } else if (frame.id[0] === 'W') {\n        // use URL link frame generic parser\n        frameParsers['W*'](frame);\n      }\n\n      frames.push(frame);\n      frameStart += 10; // advance past the frame header\n\n      frameStart += frameSize; // advance past the frame body\n    } while (frameStart < tagSize);\n\n    return frames;\n  };\n\n  var parseId3 = {\n    parseId3Frames: parseId3Frames$1,\n    parseSyncSafeInteger: parseSyncSafeInteger$1,\n    frameParsers: frameParsers\n  };\n\n  var toUnsigned = bin.toUnsigned;\n  var toHexString = bin.toHexString;\n  var getUint64 = numbers.getUint64;\n  var timescale, startTime, compositionStartTime, getVideoTrackIds, getTracks, getTimescaleFromMediaHeader, getEmsgID3;\n  var parseId3Frames = parseId3.parseId3Frames;\n  /**\n   * Parses an MP4 initialization segment and extracts the timescale\n   * values for any declared tracks. Timescale values indicate the\n   * number of clock ticks per second to assume for time-based values\n   * elsewhere in the MP4.\n   *\n   * To determine the start time of an MP4, you need two pieces of\n   * information: the timescale unit and the earliest base media decode\n   * time. Multiple timescales can be specified within an MP4 but the\n   * base media decode time is always expressed in the timescale from\n   * the media header box for the track:\n   * ```\n   * moov > trak > mdia > mdhd.timescale\n   * ```\n   * @param init {Uint8Array} the bytes of the init segment\n   * @return {object} a hash of track ids to timescale values or null if\n   * the init segment is malformed.\n   */\n\n  timescale = function timescale(init) {\n    var result = {},\n        traks = findBox_1(init, ['moov', 'trak']); // mdhd timescale\n\n    return traks.reduce(function (result, trak) {\n      var tkhd, version, index, id, mdhd;\n      tkhd = findBox_1(trak, ['tkhd'])[0];\n\n      if (!tkhd) {\n        return null;\n      }\n\n      version = tkhd[0];\n      index = version === 0 ? 12 : 20;\n      id = toUnsigned(tkhd[index] << 24 | tkhd[index + 1] << 16 | tkhd[index + 2] << 8 | tkhd[index + 3]);\n      mdhd = findBox_1(trak, ['mdia', 'mdhd'])[0];\n\n      if (!mdhd) {\n        return null;\n      }\n\n      version = mdhd[0];\n      index = version === 0 ? 12 : 20;\n      result[id] = toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n      return result;\n    }, result);\n  };\n  /**\n   * Determine the base media decode start time, in seconds, for an MP4\n   * fragment. If multiple fragments are specified, the earliest time is\n   * returned.\n   *\n   * The base media decode time can be parsed from track fragment\n   * metadata:\n   * ```\n   * moof > traf > tfdt.baseMediaDecodeTime\n   * ```\n   * It requires the timescale value from the mdhd to interpret.\n   *\n   * @param timescale {object} a hash of track ids to timescale values.\n   * @return {number} the earliest base media decode start time for the\n   * fragment, in seconds\n   */\n\n\n  startTime = function startTime(timescale, fragment) {\n    var trafs; // we need info from two childrend of each track fragment box\n\n    trafs = findBox_1(fragment, ['moof', 'traf']); // determine the start times for each track\n\n    var lowestTime = trafs.reduce(function (acc, traf) {\n      var tfhd = findBox_1(traf, ['tfhd'])[0]; // get the track id from the tfhd\n\n      var id = toUnsigned(tfhd[4] << 24 | tfhd[5] << 16 | tfhd[6] << 8 | tfhd[7]); // assume a 90kHz clock if no timescale was specified\n\n      var scale = timescale[id] || 90e3; // get the base media decode time from the tfdt\n\n      var tfdt = findBox_1(traf, ['tfdt'])[0];\n      var dv = new DataView(tfdt.buffer, tfdt.byteOffset, tfdt.byteLength);\n      var baseTime; // version 1 is 64 bit\n\n      if (tfdt[0] === 1) {\n        baseTime = getUint64(tfdt.subarray(4, 12));\n      } else {\n        baseTime = dv.getUint32(4);\n      } // convert base time to seconds if it is a valid number.\n\n\n      var seconds;\n\n      if (typeof baseTime === 'bigint') {\n        seconds = baseTime / window__default['default'].BigInt(scale);\n      } else if (typeof baseTime === 'number' && !isNaN(baseTime)) {\n        seconds = baseTime / scale;\n      }\n\n      if (seconds < Number.MAX_SAFE_INTEGER) {\n        seconds = Number(seconds);\n      }\n\n      if (seconds < acc) {\n        acc = seconds;\n      }\n\n      return acc;\n    }, Infinity);\n    return typeof lowestTime === 'bigint' || isFinite(lowestTime) ? lowestTime : 0;\n  };\n  /**\n   * Determine the composition start, in seconds, for an MP4\n   * fragment.\n   *\n   * The composition start time of a fragment can be calculated using the base\n   * media decode time, composition time offset, and timescale, as follows:\n   *\n   * compositionStartTime = (baseMediaDecodeTime + compositionTimeOffset) / timescale\n   *\n   * All of the aforementioned information is contained within a media fragment's\n   * `traf` box, except for timescale info, which comes from the initialization\n   * segment, so a track id (also contained within a `traf`) is also necessary to\n   * associate it with a timescale\n   *\n   *\n   * @param timescales {object} - a hash of track ids to timescale values.\n   * @param fragment {Unit8Array} - the bytes of a media segment\n   * @return {number} the composition start time for the fragment, in seconds\n   **/\n\n\n  compositionStartTime = function compositionStartTime(timescales, fragment) {\n    var trafBoxes = findBox_1(fragment, ['moof', 'traf']);\n    var baseMediaDecodeTime = 0;\n    var compositionTimeOffset = 0;\n    var trackId;\n\n    if (trafBoxes && trafBoxes.length) {\n      // The spec states that track run samples contained within a `traf` box are contiguous, but\n      // it does not explicitly state whether the `traf` boxes themselves are contiguous.\n      // We will assume that they are, so we only need the first to calculate start time.\n      var tfhd = findBox_1(trafBoxes[0], ['tfhd'])[0];\n      var trun = findBox_1(trafBoxes[0], ['trun'])[0];\n      var tfdt = findBox_1(trafBoxes[0], ['tfdt'])[0];\n\n      if (tfhd) {\n        var parsedTfhd = parseTfhd(tfhd);\n        trackId = parsedTfhd.trackId;\n      }\n\n      if (tfdt) {\n        var parsedTfdt = parseTfdt(tfdt);\n        baseMediaDecodeTime = parsedTfdt.baseMediaDecodeTime;\n      }\n\n      if (trun) {\n        var parsedTrun = parseTrun(trun);\n\n        if (parsedTrun.samples && parsedTrun.samples.length) {\n          compositionTimeOffset = parsedTrun.samples[0].compositionTimeOffset || 0;\n        }\n      }\n    } // Get timescale for this specific track. Assume a 90kHz clock if no timescale was\n    // specified.\n\n\n    var timescale = timescales[trackId] || 90e3; // return the composition start time, in seconds\n\n    if (typeof baseMediaDecodeTime === 'bigint') {\n      compositionTimeOffset = window__default['default'].BigInt(compositionTimeOffset);\n      timescale = window__default['default'].BigInt(timescale);\n    }\n\n    var result = (baseMediaDecodeTime + compositionTimeOffset) / timescale;\n\n    if (typeof result === 'bigint' && result < Number.MAX_SAFE_INTEGER) {\n      result = Number(result);\n    }\n\n    return result;\n  };\n  /**\n    * Find the trackIds of the video tracks in this source.\n    * Found by parsing the Handler Reference and Track Header Boxes:\n    *   moov > trak > mdia > hdlr\n    *   moov > trak > tkhd\n    *\n    * @param {Uint8Array} init - The bytes of the init segment for this source\n    * @return {Number[]} A list of trackIds\n    *\n    * @see ISO-BMFF-12/2015, Section 8.4.3\n   **/\n\n\n  getVideoTrackIds = function getVideoTrackIds(init) {\n    var traks = findBox_1(init, ['moov', 'trak']);\n    var videoTrackIds = [];\n    traks.forEach(function (trak) {\n      var hdlrs = findBox_1(trak, ['mdia', 'hdlr']);\n      var tkhds = findBox_1(trak, ['tkhd']);\n      hdlrs.forEach(function (hdlr, index) {\n        var handlerType = parseType_1(hdlr.subarray(8, 12));\n        var tkhd = tkhds[index];\n        var view;\n        var version;\n        var trackId;\n\n        if (handlerType === 'vide') {\n          view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n          version = view.getUint8(0);\n          trackId = version === 0 ? view.getUint32(12) : view.getUint32(20);\n          videoTrackIds.push(trackId);\n        }\n      });\n    });\n    return videoTrackIds;\n  };\n\n  getTimescaleFromMediaHeader = function getTimescaleFromMediaHeader(mdhd) {\n    // mdhd is a FullBox, meaning it will have its own version as the first byte\n    var version = mdhd[0];\n    var index = version === 0 ? 12 : 20;\n    return toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n  };\n  /**\n   * Get all the video, audio, and hint tracks from a non fragmented\n   * mp4 segment\n   */\n\n\n  getTracks = function getTracks(init) {\n    var traks = findBox_1(init, ['moov', 'trak']);\n    var tracks = [];\n    traks.forEach(function (trak) {\n      var track = {};\n      var tkhd = findBox_1(trak, ['tkhd'])[0];\n      var view, tkhdVersion; // id\n\n      if (tkhd) {\n        view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n        tkhdVersion = view.getUint8(0);\n        track.id = tkhdVersion === 0 ? view.getUint32(12) : view.getUint32(20);\n      }\n\n      var hdlr = findBox_1(trak, ['mdia', 'hdlr'])[0]; // type\n\n      if (hdlr) {\n        var type = parseType_1(hdlr.subarray(8, 12));\n\n        if (type === 'vide') {\n          track.type = 'video';\n        } else if (type === 'soun') {\n          track.type = 'audio';\n        } else {\n          track.type = type;\n        }\n      } // codec\n\n\n      var stsd = findBox_1(trak, ['mdia', 'minf', 'stbl', 'stsd'])[0];\n\n      if (stsd) {\n        var sampleDescriptions = stsd.subarray(8); // gives the codec type string\n\n        track.codec = parseType_1(sampleDescriptions.subarray(4, 8));\n        var codecBox = findBox_1(sampleDescriptions, [track.codec])[0];\n        var codecConfig, codecConfigType;\n\n        if (codecBox) {\n          // https://tools.ietf.org/html/rfc6381#section-3.3\n          if (/^[asm]vc[1-9]$/i.test(track.codec)) {\n            // we don't need anything but the \"config\" parameter of the\n            // avc1 codecBox\n            codecConfig = codecBox.subarray(78);\n            codecConfigType = parseType_1(codecConfig.subarray(4, 8));\n\n            if (codecConfigType === 'avcC' && codecConfig.length > 11) {\n              track.codec += '.'; // left padded with zeroes for single digit hex\n              // profile idc\n\n              track.codec += toHexString(codecConfig[9]); // the byte containing the constraint_set flags\n\n              track.codec += toHexString(codecConfig[10]); // level idc\n\n              track.codec += toHexString(codecConfig[11]);\n            } else {\n              // TODO: show a warning that we couldn't parse the codec\n              // and are using the default\n              track.codec = 'avc1.4d400d';\n            }\n          } else if (/^mp4[a,v]$/i.test(track.codec)) {\n            // we do not need anything but the streamDescriptor of the mp4a codecBox\n            codecConfig = codecBox.subarray(28);\n            codecConfigType = parseType_1(codecConfig.subarray(4, 8));\n\n            if (codecConfigType === 'esds' && codecConfig.length > 20 && codecConfig[19] !== 0) {\n              track.codec += '.' + toHexString(codecConfig[19]); // this value is only a single digit\n\n              track.codec += '.' + toHexString(codecConfig[20] >>> 2 & 0x3f).replace(/^0/, '');\n            } else {\n              // TODO: show a warning that we couldn't parse the codec\n              // and are using the default\n              track.codec = 'mp4a.40.2';\n            }\n          } else {\n            // flac, opus, etc\n            track.codec = track.codec.toLowerCase();\n          }\n        }\n      }\n\n      var mdhd = findBox_1(trak, ['mdia', 'mdhd'])[0];\n\n      if (mdhd) {\n        track.timescale = getTimescaleFromMediaHeader(mdhd);\n      }\n\n      tracks.push(track);\n    });\n    return tracks;\n  };\n  /**\n   * Returns an array of emsg ID3 data from the provided segmentData.\n   * An offset can also be provided as the Latest Arrival Time to calculate \n   * the Event Start Time of v0 EMSG boxes. \n   * See: https://dashif-documents.azurewebsites.net/Events/master/event.html#Inband-event-timing\n   * \n   * @param {Uint8Array} segmentData the segment byte array.\n   * @param {number} offset the segment start time or Latest Arrival Time, \n   * @return {Object[]} an array of ID3 parsed from EMSG boxes\n   */\n\n\n  getEmsgID3 = function getEmsgID3(segmentData, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n\n    var emsgBoxes = findBox_1(segmentData, ['emsg']);\n    return emsgBoxes.map(function (data) {\n      var parsedBox = emsg.parseEmsgBox(new Uint8Array(data));\n      var parsedId3Frames = parseId3Frames(parsedBox.message_data);\n      return {\n        cueTime: emsg.scaleTime(parsedBox.presentation_time, parsedBox.timescale, parsedBox.presentation_time_delta, offset),\n        duration: emsg.scaleTime(parsedBox.event_duration, parsedBox.timescale),\n        frames: parsedId3Frames\n      };\n    });\n  };\n\n  var probe = {\n    // export mp4 inspector's findBox and parseType for backwards compatibility\n    findBox: findBox_1,\n    parseType: parseType_1,\n    timescale: timescale,\n    startTime: startTime,\n    compositionStartTime: compositionStartTime,\n    videoTrackIds: getVideoTrackIds,\n    tracks: getTracks,\n    getTimescaleFromMediaHeader: getTimescaleFromMediaHeader,\n    getEmsgID3: getEmsgID3\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * A lightweight readable stream implemention that handles event dispatching.\n   * Objects that inherit from streams should call init in their constructors.\n   */\n\n  var Stream = function Stream() {\n    this.init = function () {\n      var listeners = {};\n      /**\n       * Add a listener for a specified event type.\n       * @param type {string} the event name\n       * @param listener {function} the callback to be invoked when an event of\n       * the specified type occurs\n       */\n\n      this.on = function (type, listener) {\n        if (!listeners[type]) {\n          listeners[type] = [];\n        }\n\n        listeners[type] = listeners[type].concat(listener);\n      };\n      /**\n       * Remove a listener for a specified event type.\n       * @param type {string} the event name\n       * @param listener {function} a function previously registered for this\n       * type of event through `on`\n       */\n\n\n      this.off = function (type, listener) {\n        var index;\n\n        if (!listeners[type]) {\n          return false;\n        }\n\n        index = listeners[type].indexOf(listener);\n        listeners[type] = listeners[type].slice();\n        listeners[type].splice(index, 1);\n        return index > -1;\n      };\n      /**\n       * Trigger an event of the specified type on this stream. Any additional\n       * arguments to this function are passed as parameters to event listeners.\n       * @param type {string} the event name\n       */\n\n\n      this.trigger = function (type) {\n        var callbacks, i, length, args;\n        callbacks = listeners[type];\n\n        if (!callbacks) {\n          return;\n        } // Slicing the arguments on every invocation of this method\n        // can add a significant amount of overhead. Avoid the\n        // intermediate object creation for the common case of a\n        // single callback argument\n\n\n        if (arguments.length === 2) {\n          length = callbacks.length;\n\n          for (i = 0; i < length; ++i) {\n            callbacks[i].call(this, arguments[1]);\n          }\n        } else {\n          args = [];\n          i = arguments.length;\n\n          for (i = 1; i < arguments.length; ++i) {\n            args.push(arguments[i]);\n          }\n\n          length = callbacks.length;\n\n          for (i = 0; i < length; ++i) {\n            callbacks[i].apply(this, args);\n          }\n        }\n      };\n      /**\n       * Destroys the stream and cleans up.\n       */\n\n\n      this.dispose = function () {\n        listeners = {};\n      };\n    };\n  };\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   * @param destination {stream} the stream that will receive all `data` events\n   * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n   *                            when the current stream emits a 'done' event\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n\n\n  Stream.prototype.pipe = function (destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n    this.on('done', function (flushSource) {\n      destination.flush(flushSource);\n    });\n    this.on('partialdone', function (flushSource) {\n      destination.partialFlush(flushSource);\n    });\n    this.on('endedtimeline', function (flushSource) {\n      destination.endTimeline(flushSource);\n    });\n    this.on('reset', function (flushSource) {\n      destination.reset(flushSource);\n    });\n    return destination;\n  }; // Default stream functions that are expected to be overridden to perform\n  // actual work. These are provided by the prototype as a sort of no-op\n  // implementation so that we don't have to check for their existence in the\n  // `pipe` function above.\n\n\n  Stream.prototype.push = function (data) {\n    this.trigger('data', data);\n  };\n\n  Stream.prototype.flush = function (flushSource) {\n    this.trigger('done', flushSource);\n  };\n\n  Stream.prototype.partialFlush = function (flushSource) {\n    this.trigger('partialdone', flushSource);\n  };\n\n  Stream.prototype.endTimeline = function (flushSource) {\n    this.trigger('endedtimeline', flushSource);\n  };\n\n  Stream.prototype.reset = function (flushSource) {\n    this.trigger('reset', flushSource);\n  };\n\n  var stream = Stream;\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n  // Convert an array of nal units into an array of frames with each frame being\n  // composed of the nal units that make up that frame\n  // Also keep track of cummulative data about the frame from the nal units such\n  // as the frame duration, starting pts, etc.\n  var groupNalsIntoFrames = function groupNalsIntoFrames(nalUnits) {\n    var i,\n        currentNal,\n        currentFrame = [],\n        frames = []; // TODO added for LHLS, make sure this is OK\n\n    frames.byteLength = 0;\n    frames.nalCount = 0;\n    frames.duration = 0;\n    currentFrame.byteLength = 0;\n\n    for (i = 0; i < nalUnits.length; i++) {\n      currentNal = nalUnits[i]; // Split on 'aud'-type nal units\n\n      if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        // Since the very first nal unit is expected to be an AUD\n        // only push to the frames array when currentFrame is not empty\n        if (currentFrame.length) {\n          currentFrame.duration = currentNal.dts - currentFrame.dts; // TODO added for LHLS, make sure this is OK\n\n          frames.byteLength += currentFrame.byteLength;\n          frames.nalCount += currentFrame.length;\n          frames.duration += currentFrame.duration;\n          frames.push(currentFrame);\n        }\n\n        currentFrame = [currentNal];\n        currentFrame.byteLength = currentNal.data.byteLength;\n        currentFrame.pts = currentNal.pts;\n        currentFrame.dts = currentNal.dts;\n      } else {\n        // Specifically flag key frames for ease of use later\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          currentFrame.keyFrame = true;\n        }\n\n        currentFrame.duration = currentNal.dts - currentFrame.dts;\n        currentFrame.byteLength += currentNal.data.byteLength;\n        currentFrame.push(currentNal);\n      }\n    } // For the last frame, use the duration of the previous frame if we\n    // have nothing better to go on\n\n\n    if (frames.length && (!currentFrame.duration || currentFrame.duration <= 0)) {\n      currentFrame.duration = frames[frames.length - 1].duration;\n    } // Push the final frame\n    // TODO added for LHLS, make sure this is OK\n\n\n    frames.byteLength += currentFrame.byteLength;\n    frames.nalCount += currentFrame.length;\n    frames.duration += currentFrame.duration;\n    frames.push(currentFrame);\n    return frames;\n  }; // Convert an array of frames into an array of Gop with each Gop being composed\n  // of the frames that make up that Gop\n  // Also keep track of cummulative data about the Gop from the frames such as the\n  // Gop duration, starting pts, etc.\n\n\n  var groupFramesIntoGops = function groupFramesIntoGops(frames) {\n    var i,\n        currentFrame,\n        currentGop = [],\n        gops = []; // We must pre-set some of the values on the Gop since we\n    // keep running totals of these values\n\n    currentGop.byteLength = 0;\n    currentGop.nalCount = 0;\n    currentGop.duration = 0;\n    currentGop.pts = frames[0].pts;\n    currentGop.dts = frames[0].dts; // store some metadata about all the Gops\n\n    gops.byteLength = 0;\n    gops.nalCount = 0;\n    gops.duration = 0;\n    gops.pts = frames[0].pts;\n    gops.dts = frames[0].dts;\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      if (currentFrame.keyFrame) {\n        // Since the very first frame is expected to be an keyframe\n        // only push to the gops array when currentGop is not empty\n        if (currentGop.length) {\n          gops.push(currentGop);\n          gops.byteLength += currentGop.byteLength;\n          gops.nalCount += currentGop.nalCount;\n          gops.duration += currentGop.duration;\n        }\n\n        currentGop = [currentFrame];\n        currentGop.nalCount = currentFrame.length;\n        currentGop.byteLength = currentFrame.byteLength;\n        currentGop.pts = currentFrame.pts;\n        currentGop.dts = currentFrame.dts;\n        currentGop.duration = currentFrame.duration;\n      } else {\n        currentGop.duration += currentFrame.duration;\n        currentGop.nalCount += currentFrame.length;\n        currentGop.byteLength += currentFrame.byteLength;\n        currentGop.push(currentFrame);\n      }\n    }\n\n    if (gops.length && currentGop.duration <= 0) {\n      currentGop.duration = gops[gops.length - 1].duration;\n    }\n\n    gops.byteLength += currentGop.byteLength;\n    gops.nalCount += currentGop.nalCount;\n    gops.duration += currentGop.duration; // push the final Gop\n\n    gops.push(currentGop);\n    return gops;\n  };\n  /*\n   * Search for the first keyframe in the GOPs and throw away all frames\n   * until that keyframe. Then extend the duration of the pulled keyframe\n   * and pull the PTS and DTS of the keyframe so that it covers the time\n   * range of the frames that were disposed.\n   *\n   * @param {Array} gops video GOPs\n   * @returns {Array} modified video GOPs\n   */\n\n\n  var extendFirstKeyFrame = function extendFirstKeyFrame(gops) {\n    var currentGop;\n\n    if (!gops[0][0].keyFrame && gops.length > 1) {\n      // Remove the first GOP\n      currentGop = gops.shift();\n      gops.byteLength -= currentGop.byteLength;\n      gops.nalCount -= currentGop.nalCount; // Extend the first frame of what is now the\n      // first gop to cover the time period of the\n      // frames we just removed\n\n      gops[0][0].dts = currentGop.dts;\n      gops[0][0].pts = currentGop.pts;\n      gops[0][0].duration += currentGop.duration;\n    }\n\n    return gops;\n  };\n  /**\n   * Default sample object\n   * see ISO/IEC 14496-12:2012, section 8.6.4.3\n   */\n\n\n  var createDefaultSample = function createDefaultSample() {\n    return {\n      size: 0,\n      flags: {\n        isLeading: 0,\n        dependsOn: 1,\n        isDependedOn: 0,\n        hasRedundancy: 0,\n        degradationPriority: 0,\n        isNonSyncSample: 1\n      }\n    };\n  };\n  /*\n   * Collates information from a video frame into an object for eventual\n   * entry into an MP4 sample table.\n   *\n   * @param {Object} frame the video frame\n   * @param {Number} dataOffset the byte offset to position the sample\n   * @return {Object} object containing sample table info for a frame\n   */\n\n\n  var sampleForFrame = function sampleForFrame(frame, dataOffset) {\n    var sample = createDefaultSample();\n    sample.dataOffset = dataOffset;\n    sample.compositionTimeOffset = frame.pts - frame.dts;\n    sample.duration = frame.duration;\n    sample.size = 4 * frame.length; // Space for nal unit size\n\n    sample.size += frame.byteLength;\n\n    if (frame.keyFrame) {\n      sample.flags.dependsOn = 2;\n      sample.flags.isNonSyncSample = 0;\n    }\n\n    return sample;\n  }; // generate the track's sample table from an array of gops\n\n\n  var generateSampleTable$1 = function generateSampleTable(gops, baseDataOffset) {\n    var h,\n        i,\n        sample,\n        currentGop,\n        currentFrame,\n        dataOffset = baseDataOffset || 0,\n        samples = [];\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n        sample = sampleForFrame(currentFrame, dataOffset);\n        dataOffset += sample.size;\n        samples.push(sample);\n      }\n    }\n\n    return samples;\n  }; // generate the track's raw mdat data from an array of gops\n\n\n  var concatenateNalData = function concatenateNalData(gops) {\n    var h,\n        i,\n        j,\n        currentGop,\n        currentFrame,\n        currentNal,\n        dataOffset = 0,\n        nalsByteLength = gops.byteLength,\n        numberOfNals = gops.nalCount,\n        totalByteLength = nalsByteLength + 4 * numberOfNals,\n        data = new Uint8Array(totalByteLength),\n        view = new DataView(data.buffer); // For each Gop..\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h]; // For each Frame..\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i]; // For each NAL..\n\n        for (j = 0; j < currentFrame.length; j++) {\n          currentNal = currentFrame[j];\n          view.setUint32(dataOffset, currentNal.data.byteLength);\n          dataOffset += 4;\n          data.set(currentNal.data, dataOffset);\n          dataOffset += currentNal.data.byteLength;\n        }\n      }\n    }\n\n    return data;\n  }; // generate the track's sample table from a frame\n\n\n  var generateSampleTableForFrame = function generateSampleTableForFrame(frame, baseDataOffset) {\n    var sample,\n        dataOffset = baseDataOffset || 0,\n        samples = [];\n    sample = sampleForFrame(frame, dataOffset);\n    samples.push(sample);\n    return samples;\n  }; // generate the track's raw mdat data from a frame\n\n\n  var concatenateNalDataForFrame = function concatenateNalDataForFrame(frame) {\n    var i,\n        currentNal,\n        dataOffset = 0,\n        nalsByteLength = frame.byteLength,\n        numberOfNals = frame.length,\n        totalByteLength = nalsByteLength + 4 * numberOfNals,\n        data = new Uint8Array(totalByteLength),\n        view = new DataView(data.buffer); // For each NAL..\n\n    for (i = 0; i < frame.length; i++) {\n      currentNal = frame[i];\n      view.setUint32(dataOffset, currentNal.data.byteLength);\n      dataOffset += 4;\n      data.set(currentNal.data, dataOffset);\n      dataOffset += currentNal.data.byteLength;\n    }\n\n    return data;\n  };\n\n  var frameUtils = {\n    groupNalsIntoFrames: groupNalsIntoFrames,\n    groupFramesIntoGops: groupFramesIntoGops,\n    extendFirstKeyFrame: extendFirstKeyFrame,\n    generateSampleTable: generateSampleTable$1,\n    concatenateNalData: concatenateNalData,\n    generateSampleTableForFrame: generateSampleTableForFrame,\n    concatenateNalDataForFrame: concatenateNalDataForFrame\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n  var highPrefix = [33, 16, 5, 32, 164, 27];\n  var lowPrefix = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252];\n\n  var zeroFill = function zeroFill(count) {\n    var a = [];\n\n    while (count--) {\n      a.push(0);\n    }\n\n    return a;\n  };\n\n  var makeTable = function makeTable(metaTable) {\n    return Object.keys(metaTable).reduce(function (obj, key) {\n      obj[key] = new Uint8Array(metaTable[key].reduce(function (arr, part) {\n        return arr.concat(part);\n      }, []));\n      return obj;\n    }, {});\n  };\n\n  var silence;\n\n  var silence_1 = function silence_1() {\n    if (!silence) {\n      // Frames-of-silence to use for filling in missing AAC frames\n      var coneOfSilence = {\n        96000: [highPrefix, [227, 64], zeroFill(154), [56]],\n        88200: [highPrefix, [231], zeroFill(170), [56]],\n        64000: [highPrefix, [248, 192], zeroFill(240), [56]],\n        48000: [highPrefix, [255, 192], zeroFill(268), [55, 148, 128], zeroFill(54), [112]],\n        44100: [highPrefix, [255, 192], zeroFill(268), [55, 163, 128], zeroFill(84), [112]],\n        32000: [highPrefix, [255, 192], zeroFill(268), [55, 234], zeroFill(226), [112]],\n        24000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 112], zeroFill(126), [224]],\n        16000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 255], zeroFill(269), [223, 108], zeroFill(195), [1, 192]],\n        12000: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 253, 128], zeroFill(259), [56]],\n        11025: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 255, 192], zeroFill(268), [55, 175, 128], zeroFill(108), [112]],\n        8000: [lowPrefix, zeroFill(268), [3, 121, 16], zeroFill(47), [7]]\n      };\n      silence = makeTable(coneOfSilence);\n    }\n\n    return silence;\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n  var ONE_SECOND_IN_TS$3 = 90000,\n      // 90kHz clock\n  secondsToVideoTs,\n      secondsToAudioTs,\n      videoTsToSeconds,\n      audioTsToSeconds,\n      audioTsToVideoTs,\n      videoTsToAudioTs,\n      metadataTsToSeconds;\n\n  secondsToVideoTs = function secondsToVideoTs(seconds) {\n    return seconds * ONE_SECOND_IN_TS$3;\n  };\n\n  secondsToAudioTs = function secondsToAudioTs(seconds, sampleRate) {\n    return seconds * sampleRate;\n  };\n\n  videoTsToSeconds = function videoTsToSeconds(timestamp) {\n    return timestamp / ONE_SECOND_IN_TS$3;\n  };\n\n  audioTsToSeconds = function audioTsToSeconds(timestamp, sampleRate) {\n    return timestamp / sampleRate;\n  };\n\n  audioTsToVideoTs = function audioTsToVideoTs(timestamp, sampleRate) {\n    return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n  };\n\n  videoTsToAudioTs = function videoTsToAudioTs(timestamp, sampleRate) {\n    return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n  };\n  /**\n   * Adjust ID3 tag or caption timing information by the timeline pts values\n   * (if keepOriginalTimestamps is false) and convert to seconds\n   */\n\n\n  metadataTsToSeconds = function metadataTsToSeconds(timestamp, timelineStartPts, keepOriginalTimestamps) {\n    return videoTsToSeconds(keepOriginalTimestamps ? timestamp : timestamp - timelineStartPts);\n  };\n\n  var clock = {\n    ONE_SECOND_IN_TS: ONE_SECOND_IN_TS$3,\n    secondsToVideoTs: secondsToVideoTs,\n    secondsToAudioTs: secondsToAudioTs,\n    videoTsToSeconds: videoTsToSeconds,\n    audioTsToSeconds: audioTsToSeconds,\n    audioTsToVideoTs: audioTsToVideoTs,\n    videoTsToAudioTs: videoTsToAudioTs,\n    metadataTsToSeconds: metadataTsToSeconds\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  /**\n   * Sum the `byteLength` properties of the data in each AAC frame\n   */\n\n  var sumFrameByteLengths = function sumFrameByteLengths(array) {\n    var i,\n        currentObj,\n        sum = 0; // sum the byteLength's all each nal unit in the frame\n\n    for (i = 0; i < array.length; i++) {\n      currentObj = array[i];\n      sum += currentObj.data.byteLength;\n    }\n\n    return sum;\n  }; // Possibly pad (prefix) the audio track with silence if appending this track\n  // would lead to the introduction of a gap in the audio buffer\n\n\n  var prefixWithSilence = function prefixWithSilence(track, frames, audioAppendStartTs, videoBaseMediaDecodeTime) {\n    var baseMediaDecodeTimeTs,\n        frameDuration = 0,\n        audioGapDuration = 0,\n        audioFillFrameCount = 0,\n        audioFillDuration = 0,\n        silentFrame,\n        i,\n        firstFrame;\n\n    if (!frames.length) {\n      return;\n    }\n\n    baseMediaDecodeTimeTs = clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate); // determine frame clock duration based on sample rate, round up to avoid overfills\n\n    frameDuration = Math.ceil(clock.ONE_SECOND_IN_TS / (track.samplerate / 1024));\n\n    if (audioAppendStartTs && videoBaseMediaDecodeTime) {\n      // insert the shortest possible amount (audio gap or audio to video gap)\n      audioGapDuration = baseMediaDecodeTimeTs - Math.max(audioAppendStartTs, videoBaseMediaDecodeTime); // number of full frames in the audio gap\n\n      audioFillFrameCount = Math.floor(audioGapDuration / frameDuration);\n      audioFillDuration = audioFillFrameCount * frameDuration;\n    } // don't attempt to fill gaps smaller than a single frame or larger\n    // than a half second\n\n\n    if (audioFillFrameCount < 1 || audioFillDuration > clock.ONE_SECOND_IN_TS / 2) {\n      return;\n    }\n\n    silentFrame = silence_1()[track.samplerate];\n\n    if (!silentFrame) {\n      // we don't have a silent frame pregenerated for the sample rate, so use a frame\n      // from the content instead\n      silentFrame = frames[0].data;\n    }\n\n    for (i = 0; i < audioFillFrameCount; i++) {\n      firstFrame = frames[0];\n      frames.splice(0, 0, {\n        data: silentFrame,\n        dts: firstFrame.dts - frameDuration,\n        pts: firstFrame.pts - frameDuration\n      });\n    }\n\n    track.baseMediaDecodeTime -= Math.floor(clock.videoTsToAudioTs(audioFillDuration, track.samplerate));\n    return audioFillDuration;\n  }; // If the audio segment extends before the earliest allowed dts\n  // value, remove AAC frames until starts at or after the earliest\n  // allowed DTS so that we don't end up with a negative baseMedia-\n  // DecodeTime for the audio track\n\n\n  var trimAdtsFramesByEarliestDts = function trimAdtsFramesByEarliestDts(adtsFrames, track, earliestAllowedDts) {\n    if (track.minSegmentDts >= earliestAllowedDts) {\n      return adtsFrames;\n    } // We will need to recalculate the earliest segment Dts\n\n\n    track.minSegmentDts = Infinity;\n    return adtsFrames.filter(function (currentFrame) {\n      // If this is an allowed frame, keep it and record it's Dts\n      if (currentFrame.dts >= earliestAllowedDts) {\n        track.minSegmentDts = Math.min(track.minSegmentDts, currentFrame.dts);\n        track.minSegmentPts = track.minSegmentDts;\n        return true;\n      } // Otherwise, discard it\n\n\n      return false;\n    });\n  }; // generate the track's raw mdat data from an array of frames\n\n\n  var generateSampleTable = function generateSampleTable(frames) {\n    var i,\n        currentFrame,\n        samples = [];\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      samples.push({\n        size: currentFrame.data.byteLength,\n        duration: 1024 // For AAC audio, all samples contain 1024 samples\n\n      });\n    }\n\n    return samples;\n  }; // generate the track's sample table from an array of frames\n\n\n  var concatenateFrameData = function concatenateFrameData(frames) {\n    var i,\n        currentFrame,\n        dataOffset = 0,\n        data = new Uint8Array(sumFrameByteLengths(frames));\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      data.set(currentFrame.data, dataOffset);\n      dataOffset += currentFrame.data.byteLength;\n    }\n\n    return data;\n  };\n\n  var audioFrameUtils = {\n    prefixWithSilence: prefixWithSilence,\n    trimAdtsFramesByEarliestDts: trimAdtsFramesByEarliestDts,\n    generateSampleTable: generateSampleTable,\n    concatenateFrameData: concatenateFrameData\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var ONE_SECOND_IN_TS$2 = clock.ONE_SECOND_IN_TS;\n  /**\n   * Store information about the start and end of the track and the\n   * duration for each frame/sample we process in order to calculate\n   * the baseMediaDecodeTime\n   */\n\n  var collectDtsInfo = function collectDtsInfo(track, data) {\n    if (typeof data.pts === 'number') {\n      if (track.timelineStartInfo.pts === undefined) {\n        track.timelineStartInfo.pts = data.pts;\n      }\n\n      if (track.minSegmentPts === undefined) {\n        track.minSegmentPts = data.pts;\n      } else {\n        track.minSegmentPts = Math.min(track.minSegmentPts, data.pts);\n      }\n\n      if (track.maxSegmentPts === undefined) {\n        track.maxSegmentPts = data.pts;\n      } else {\n        track.maxSegmentPts = Math.max(track.maxSegmentPts, data.pts);\n      }\n    }\n\n    if (typeof data.dts === 'number') {\n      if (track.timelineStartInfo.dts === undefined) {\n        track.timelineStartInfo.dts = data.dts;\n      }\n\n      if (track.minSegmentDts === undefined) {\n        track.minSegmentDts = data.dts;\n      } else {\n        track.minSegmentDts = Math.min(track.minSegmentDts, data.dts);\n      }\n\n      if (track.maxSegmentDts === undefined) {\n        track.maxSegmentDts = data.dts;\n      } else {\n        track.maxSegmentDts = Math.max(track.maxSegmentDts, data.dts);\n      }\n    }\n  };\n  /**\n   * Clear values used to calculate the baseMediaDecodeTime between\n   * tracks\n   */\n\n\n  var clearDtsInfo = function clearDtsInfo(track) {\n    delete track.minSegmentDts;\n    delete track.maxSegmentDts;\n    delete track.minSegmentPts;\n    delete track.maxSegmentPts;\n  };\n  /**\n   * Calculate the track's baseMediaDecodeTime based on the earliest\n   * DTS the transmuxer has ever seen and the minimum DTS for the\n   * current track\n   * @param track {object} track metadata configuration\n   * @param keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n\n  var calculateTrackBaseMediaDecodeTime = function calculateTrackBaseMediaDecodeTime(track, keepOriginalTimestamps) {\n    var baseMediaDecodeTime,\n        scale,\n        minSegmentDts = track.minSegmentDts; // Optionally adjust the time so the first segment starts at zero.\n\n    if (!keepOriginalTimestamps) {\n      minSegmentDts -= track.timelineStartInfo.dts;\n    } // track.timelineStartInfo.baseMediaDecodeTime is the location, in time, where\n    // we want the start of the first segment to be placed\n\n\n    baseMediaDecodeTime = track.timelineStartInfo.baseMediaDecodeTime; // Add to that the distance this segment is from the very first\n\n    baseMediaDecodeTime += minSegmentDts; // baseMediaDecodeTime must not become negative\n\n    baseMediaDecodeTime = Math.max(0, baseMediaDecodeTime);\n\n    if (track.type === 'audio') {\n      // Audio has a different clock equal to the sampling_rate so we need to\n      // scale the PTS values into the clock rate of the track\n      scale = track.samplerate / ONE_SECOND_IN_TS$2;\n      baseMediaDecodeTime *= scale;\n      baseMediaDecodeTime = Math.floor(baseMediaDecodeTime);\n    }\n\n    return baseMediaDecodeTime;\n  };\n\n  var trackDecodeInfo = {\n    clearDtsInfo: clearDtsInfo,\n    calculateTrackBaseMediaDecodeTime: calculateTrackBaseMediaDecodeTime,\n    collectDtsInfo: collectDtsInfo\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * Reads in-band caption information from a video elementary\n   * stream. Captions must follow the CEA-708 standard for injection\n   * into an MPEG-2 transport streams.\n   * @see https://en.wikipedia.org/wiki/CEA-708\n   * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf\n   */\n  // payload type field to indicate how they are to be\n  // interpreted. CEAS-708 caption content is always transmitted with\n  // payload type 0x04.\n\n  var USER_DATA_REGISTERED_ITU_T_T35 = 4,\n      RBSP_TRAILING_BITS = 128;\n  /**\n    * Parse a supplemental enhancement information (SEI) NAL unit.\n    * Stops parsing once a message of type ITU T T35 has been found.\n    *\n    * @param bytes {Uint8Array} the bytes of a SEI NAL unit\n    * @return {object} the parsed SEI payload\n    * @see Rec. ITU-T H.264, 7.3.2.3.1\n    */\n\n  var parseSei = function parseSei(bytes) {\n    var i = 0,\n        result = {\n      payloadType: -1,\n      payloadSize: 0\n    },\n        payloadType = 0,\n        payloadSize = 0; // go through the sei_rbsp parsing each each individual sei_message\n\n    while (i < bytes.byteLength) {\n      // stop once we have hit the end of the sei_rbsp\n      if (bytes[i] === RBSP_TRAILING_BITS) {\n        break;\n      } // Parse payload type\n\n\n      while (bytes[i] === 0xFF) {\n        payloadType += 255;\n        i++;\n      }\n\n      payloadType += bytes[i++]; // Parse payload size\n\n      while (bytes[i] === 0xFF) {\n        payloadSize += 255;\n        i++;\n      }\n\n      payloadSize += bytes[i++]; // this sei_message is a 608/708 caption so save it and break\n      // there can only ever be one caption message in a frame's sei\n\n      if (!result.payload && payloadType === USER_DATA_REGISTERED_ITU_T_T35) {\n        var userIdentifier = String.fromCharCode(bytes[i + 3], bytes[i + 4], bytes[i + 5], bytes[i + 6]);\n\n        if (userIdentifier === 'GA94') {\n          result.payloadType = payloadType;\n          result.payloadSize = payloadSize;\n          result.payload = bytes.subarray(i, i + payloadSize);\n          break;\n        } else {\n          result.payload = void 0;\n        }\n      } // skip the payload and parse the next message\n\n\n      i += payloadSize;\n      payloadType = 0;\n      payloadSize = 0;\n    }\n\n    return result;\n  }; // see ANSI/SCTE 128-1 (2013), section 8.1\n\n\n  var parseUserData = function parseUserData(sei) {\n    // itu_t_t35_contry_code must be 181 (United States) for\n    // captions\n    if (sei.payload[0] !== 181) {\n      return null;\n    } // itu_t_t35_provider_code should be 49 (ATSC) for captions\n\n\n    if ((sei.payload[1] << 8 | sei.payload[2]) !== 49) {\n      return null;\n    } // the user_identifier should be \"GA94\" to indicate ATSC1 data\n\n\n    if (String.fromCharCode(sei.payload[3], sei.payload[4], sei.payload[5], sei.payload[6]) !== 'GA94') {\n      return null;\n    } // finally, user_data_type_code should be 0x03 for caption data\n\n\n    if (sei.payload[7] !== 0x03) {\n      return null;\n    } // return the user_data_type_structure and strip the trailing\n    // marker bits\n\n\n    return sei.payload.subarray(8, sei.payload.length - 1);\n  }; // see CEA-708-D, section 4.4\n\n\n  var parseCaptionPackets = function parseCaptionPackets(pts, userData) {\n    var results = [],\n        i,\n        count,\n        offset,\n        data; // if this is just filler, return immediately\n\n    if (!(userData[0] & 0x40)) {\n      return results;\n    } // parse out the cc_data_1 and cc_data_2 fields\n\n\n    count = userData[0] & 0x1f;\n\n    for (i = 0; i < count; i++) {\n      offset = i * 3;\n      data = {\n        type: userData[offset + 2] & 0x03,\n        pts: pts\n      }; // capture cc data when cc_valid is 1\n\n      if (userData[offset + 2] & 0x04) {\n        data.ccData = userData[offset + 3] << 8 | userData[offset + 4];\n        results.push(data);\n      }\n    }\n\n    return results;\n  };\n\n  var discardEmulationPreventionBytes$1 = function discardEmulationPreventionBytes(data) {\n    var length = data.byteLength,\n        emulationPreventionBytesPositions = [],\n        i = 1,\n        newLength,\n        newData; // Find all `Emulation Prevention Bytes`\n\n    while (i < length - 2) {\n      if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n        emulationPreventionBytesPositions.push(i + 2);\n        i += 2;\n      } else {\n        i++;\n      }\n    } // If no Emulation Prevention Bytes were found just return the original\n    // array\n\n\n    if (emulationPreventionBytesPositions.length === 0) {\n      return data;\n    } // Create a new array to hold the NAL unit data\n\n\n    newLength = length - emulationPreventionBytesPositions.length;\n    newData = new Uint8Array(newLength);\n    var sourceIndex = 0;\n\n    for (i = 0; i < newLength; sourceIndex++, i++) {\n      if (sourceIndex === emulationPreventionBytesPositions[0]) {\n        // Skip this byte\n        sourceIndex++; // Remove this position index\n\n        emulationPreventionBytesPositions.shift();\n      }\n\n      newData[i] = data[sourceIndex];\n    }\n\n    return newData;\n  }; // exports\n\n\n  var captionPacketParser = {\n    parseSei: parseSei,\n    parseUserData: parseUserData,\n    parseCaptionPackets: parseCaptionPackets,\n    discardEmulationPreventionBytes: discardEmulationPreventionBytes$1,\n    USER_DATA_REGISTERED_ITU_T_T35: USER_DATA_REGISTERED_ITU_T_T35\n  };\n\n  // Link To Transport\n  // -----------------\n\n\n  var CaptionStream$1 = function CaptionStream(options) {\n    options = options || {};\n    CaptionStream.prototype.init.call(this); // parse708captions flag, default to true\n\n    this.parse708captions_ = typeof options.parse708captions === 'boolean' ? options.parse708captions : true;\n    this.captionPackets_ = [];\n    this.ccStreams_ = [new Cea608Stream(0, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(0, 1), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 1) // eslint-disable-line no-use-before-define\n    ];\n\n    if (this.parse708captions_) {\n      this.cc708Stream_ = new Cea708Stream({\n        captionServices: options.captionServices\n      }); // eslint-disable-line no-use-before-define\n    }\n\n    this.reset(); // forward data and done events from CCs to this CaptionStream\n\n    this.ccStreams_.forEach(function (cc) {\n      cc.on('data', this.trigger.bind(this, 'data'));\n      cc.on('partialdone', this.trigger.bind(this, 'partialdone'));\n      cc.on('done', this.trigger.bind(this, 'done'));\n    }, this);\n\n    if (this.parse708captions_) {\n      this.cc708Stream_.on('data', this.trigger.bind(this, 'data'));\n      this.cc708Stream_.on('partialdone', this.trigger.bind(this, 'partialdone'));\n      this.cc708Stream_.on('done', this.trigger.bind(this, 'done'));\n    }\n  };\n\n  CaptionStream$1.prototype = new stream();\n\n  CaptionStream$1.prototype.push = function (event) {\n    var sei, userData, newCaptionPackets; // only examine SEI NALs\n\n    if (event.nalUnitType !== 'sei_rbsp') {\n      return;\n    } // parse the sei\n\n\n    sei = captionPacketParser.parseSei(event.escapedRBSP); // no payload data, skip\n\n    if (!sei.payload) {\n      return;\n    } // ignore everything but user_data_registered_itu_t_t35\n\n\n    if (sei.payloadType !== captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35) {\n      return;\n    } // parse out the user data payload\n\n\n    userData = captionPacketParser.parseUserData(sei); // ignore unrecognized userData\n\n    if (!userData) {\n      return;\n    } // Sometimes, the same segment # will be downloaded twice. To stop the\n    // caption data from being processed twice, we track the latest dts we've\n    // received and ignore everything with a dts before that. However, since\n    // data for a specific dts can be split across packets on either side of\n    // a segment boundary, we need to make sure we *don't* ignore the packets\n    // from the *next* segment that have dts === this.latestDts_. By constantly\n    // tracking the number of packets received with dts === this.latestDts_, we\n    // know how many should be ignored once we start receiving duplicates.\n\n\n    if (event.dts < this.latestDts_) {\n      // We've started getting older data, so set the flag.\n      this.ignoreNextEqualDts_ = true;\n      return;\n    } else if (event.dts === this.latestDts_ && this.ignoreNextEqualDts_) {\n      this.numSameDts_--;\n\n      if (!this.numSameDts_) {\n        // We've received the last duplicate packet, time to start processing again\n        this.ignoreNextEqualDts_ = false;\n      }\n\n      return;\n    } // parse out CC data packets and save them for later\n\n\n    newCaptionPackets = captionPacketParser.parseCaptionPackets(event.pts, userData);\n    this.captionPackets_ = this.captionPackets_.concat(newCaptionPackets);\n\n    if (this.latestDts_ !== event.dts) {\n      this.numSameDts_ = 0;\n    }\n\n    this.numSameDts_++;\n    this.latestDts_ = event.dts;\n  };\n\n  CaptionStream$1.prototype.flushCCStreams = function (flushType) {\n    this.ccStreams_.forEach(function (cc) {\n      return flushType === 'flush' ? cc.flush() : cc.partialFlush();\n    }, this);\n  };\n\n  CaptionStream$1.prototype.flushStream = function (flushType) {\n    // make sure we actually parsed captions before proceeding\n    if (!this.captionPackets_.length) {\n      this.flushCCStreams(flushType);\n      return;\n    } // In Chrome, the Array#sort function is not stable so add a\n    // presortIndex that we can use to ensure we get a stable-sort\n\n\n    this.captionPackets_.forEach(function (elem, idx) {\n      elem.presortIndex = idx;\n    }); // sort caption byte-pairs based on their PTS values\n\n    this.captionPackets_.sort(function (a, b) {\n      if (a.pts === b.pts) {\n        return a.presortIndex - b.presortIndex;\n      }\n\n      return a.pts - b.pts;\n    });\n    this.captionPackets_.forEach(function (packet) {\n      if (packet.type < 2) {\n        // Dispatch packet to the right Cea608Stream\n        this.dispatchCea608Packet(packet);\n      } else {\n        // Dispatch packet to the Cea708Stream\n        this.dispatchCea708Packet(packet);\n      }\n    }, this);\n    this.captionPackets_.length = 0;\n    this.flushCCStreams(flushType);\n  };\n\n  CaptionStream$1.prototype.flush = function () {\n    return this.flushStream('flush');\n  }; // Only called if handling partial data\n\n\n  CaptionStream$1.prototype.partialFlush = function () {\n    return this.flushStream('partialFlush');\n  };\n\n  CaptionStream$1.prototype.reset = function () {\n    this.latestDts_ = null;\n    this.ignoreNextEqualDts_ = false;\n    this.numSameDts_ = 0;\n    this.activeCea608Channel_ = [null, null];\n    this.ccStreams_.forEach(function (ccStream) {\n      ccStream.reset();\n    });\n  }; // From the CEA-608 spec:\n\n  /*\n   * When XDS sub-packets are interleaved with other services, the end of each sub-packet shall be followed\n   * by a control pair to change to a different service. When any of the control codes from 0x10 to 0x1F is\n   * used to begin a control code pair, it indicates the return to captioning or Text data. The control code pair\n   * and subsequent data should then be processed according to the FCC rules. It may be necessary for the\n   * line 21 data encoder to automatically insert a control code pair (i.e. RCL, RU2, RU3, RU4, RDC, or RTD)\n   * to switch to captioning or Text.\n  */\n  // With that in mind, we ignore any data between an XDS control code and a\n  // subsequent closed-captioning control code.\n\n\n  CaptionStream$1.prototype.dispatchCea608Packet = function (packet) {\n    // NOTE: packet.type is the CEA608 field\n    if (this.setsTextOrXDSActive(packet)) {\n      this.activeCea608Channel_[packet.type] = null;\n    } else if (this.setsChannel1Active(packet)) {\n      this.activeCea608Channel_[packet.type] = 0;\n    } else if (this.setsChannel2Active(packet)) {\n      this.activeCea608Channel_[packet.type] = 1;\n    }\n\n    if (this.activeCea608Channel_[packet.type] === null) {\n      // If we haven't received anything to set the active channel, or the\n      // packets are Text/XDS data, discard the data; we don't want jumbled\n      // captions\n      return;\n    }\n\n    this.ccStreams_[(packet.type << 1) + this.activeCea608Channel_[packet.type]].push(packet);\n  };\n\n  CaptionStream$1.prototype.setsChannel1Active = function (packet) {\n    return (packet.ccData & 0x7800) === 0x1000;\n  };\n\n  CaptionStream$1.prototype.setsChannel2Active = function (packet) {\n    return (packet.ccData & 0x7800) === 0x1800;\n  };\n\n  CaptionStream$1.prototype.setsTextOrXDSActive = function (packet) {\n    return (packet.ccData & 0x7100) === 0x0100 || (packet.ccData & 0x78fe) === 0x102a || (packet.ccData & 0x78fe) === 0x182a;\n  };\n\n  CaptionStream$1.prototype.dispatchCea708Packet = function (packet) {\n    if (this.parse708captions_) {\n      this.cc708Stream_.push(packet);\n    }\n  }; // ----------------------\n  // Session to Application\n  // ----------------------\n  // This hash maps special and extended character codes to their\n  // proper Unicode equivalent. The first one-byte key is just a\n  // non-standard character code. The two-byte keys that follow are\n  // the extended CEA708 character codes, along with the preceding\n  // 0x10 extended character byte to distinguish these codes from\n  // non-extended character codes. Every CEA708 character code that\n  // is not in this object maps directly to a standard unicode\n  // character code.\n  // The transparent space and non-breaking transparent space are\n  // technically not fully supported since there is no code to\n  // make them transparent, so they have normal non-transparent\n  // stand-ins.\n  // The special closed caption (CC) character isn't a standard\n  // unicode character, so a fairly similar unicode character was\n  // chosen in it's place.\n\n\n  var CHARACTER_TRANSLATION_708 = {\n    0x7f: 0x266a,\n    // ♪\n    0x1020: 0x20,\n    // Transparent Space\n    0x1021: 0xa0,\n    // Nob-breaking Transparent Space\n    0x1025: 0x2026,\n    // …\n    0x102a: 0x0160,\n    // Š\n    0x102c: 0x0152,\n    // Œ\n    0x1030: 0x2588,\n    // █\n    0x1031: 0x2018,\n    // ‘\n    0x1032: 0x2019,\n    // ’\n    0x1033: 0x201c,\n    // “\n    0x1034: 0x201d,\n    // ”\n    0x1035: 0x2022,\n    // •\n    0x1039: 0x2122,\n    // ™\n    0x103a: 0x0161,\n    // š\n    0x103c: 0x0153,\n    // œ\n    0x103d: 0x2120,\n    // ℠\n    0x103f: 0x0178,\n    // Ÿ\n    0x1076: 0x215b,\n    // ⅛\n    0x1077: 0x215c,\n    // ⅜\n    0x1078: 0x215d,\n    // ⅝\n    0x1079: 0x215e,\n    // ⅞\n    0x107a: 0x23d0,\n    // ⏐\n    0x107b: 0x23a4,\n    // ⎤\n    0x107c: 0x23a3,\n    // ⎣\n    0x107d: 0x23af,\n    // ⎯\n    0x107e: 0x23a6,\n    // ⎦\n    0x107f: 0x23a1,\n    // ⎡\n    0x10a0: 0x3138 // ㄸ (CC char)\n\n  };\n\n  var get708CharFromCode = function get708CharFromCode(code) {\n    var newCode = CHARACTER_TRANSLATION_708[code] || code;\n\n    if (code & 0x1000 && code === newCode) {\n      // Invalid extended code\n      return '';\n    }\n\n    return String.fromCharCode(newCode);\n  };\n\n  var within708TextBlock = function within708TextBlock(b) {\n    return 0x20 <= b && b <= 0x7f || 0xa0 <= b && b <= 0xff;\n  };\n\n  var Cea708Window = function Cea708Window(windowNum) {\n    this.windowNum = windowNum;\n    this.reset();\n  };\n\n  Cea708Window.prototype.reset = function () {\n    this.clearText();\n    this.pendingNewLine = false;\n    this.winAttr = {};\n    this.penAttr = {};\n    this.penLoc = {};\n    this.penColor = {}; // These default values are arbitrary,\n    // defineWindow will usually override them\n\n    this.visible = 0;\n    this.rowLock = 0;\n    this.columnLock = 0;\n    this.priority = 0;\n    this.relativePositioning = 0;\n    this.anchorVertical = 0;\n    this.anchorHorizontal = 0;\n    this.anchorPoint = 0;\n    this.rowCount = 1;\n    this.virtualRowCount = this.rowCount + 1;\n    this.columnCount = 41;\n    this.windowStyle = 0;\n    this.penStyle = 0;\n  };\n\n  Cea708Window.prototype.getText = function () {\n    return this.rows.join('\\n');\n  };\n\n  Cea708Window.prototype.clearText = function () {\n    this.rows = [''];\n    this.rowIdx = 0;\n  };\n\n  Cea708Window.prototype.newLine = function (pts) {\n    if (this.rows.length >= this.virtualRowCount && typeof this.beforeRowOverflow === 'function') {\n      this.beforeRowOverflow(pts);\n    }\n\n    if (this.rows.length > 0) {\n      this.rows.push('');\n      this.rowIdx++;\n    } // Show all virtual rows since there's no visible scrolling\n\n\n    while (this.rows.length > this.virtualRowCount) {\n      this.rows.shift();\n      this.rowIdx--;\n    }\n  };\n\n  Cea708Window.prototype.isEmpty = function () {\n    if (this.rows.length === 0) {\n      return true;\n    } else if (this.rows.length === 1) {\n      return this.rows[0] === '';\n    }\n\n    return false;\n  };\n\n  Cea708Window.prototype.addText = function (text) {\n    this.rows[this.rowIdx] += text;\n  };\n\n  Cea708Window.prototype.backspace = function () {\n    if (!this.isEmpty()) {\n      var row = this.rows[this.rowIdx];\n      this.rows[this.rowIdx] = row.substr(0, row.length - 1);\n    }\n  };\n\n  var Cea708Service = function Cea708Service(serviceNum, encoding, stream) {\n    this.serviceNum = serviceNum;\n    this.text = '';\n    this.currentWindow = new Cea708Window(-1);\n    this.windows = [];\n    this.stream = stream; // Try to setup a TextDecoder if an `encoding` value was provided\n\n    if (typeof encoding === 'string') {\n      this.createTextDecoder(encoding);\n    }\n  };\n  /**\n   * Initialize service windows\n   * Must be run before service use\n   *\n   * @param  {Integer}  pts               PTS value\n   * @param  {Function} beforeRowOverflow Function to execute before row overflow of a window\n   */\n\n\n  Cea708Service.prototype.init = function (pts, beforeRowOverflow) {\n    this.startPts = pts;\n\n    for (var win = 0; win < 8; win++) {\n      this.windows[win] = new Cea708Window(win);\n\n      if (typeof beforeRowOverflow === 'function') {\n        this.windows[win].beforeRowOverflow = beforeRowOverflow;\n      }\n    }\n  };\n  /**\n   * Set current window of service to be affected by commands\n   *\n   * @param  {Integer} windowNum Window number\n   */\n\n\n  Cea708Service.prototype.setCurrentWindow = function (windowNum) {\n    this.currentWindow = this.windows[windowNum];\n  };\n  /**\n   * Try to create a TextDecoder if it is natively supported\n   */\n\n\n  Cea708Service.prototype.createTextDecoder = function (encoding) {\n    if (typeof TextDecoder === 'undefined') {\n      this.stream.trigger('log', {\n        level: 'warn',\n        message: 'The `encoding` option is unsupported without TextDecoder support'\n      });\n    } else {\n      try {\n        this.textDecoder_ = new TextDecoder(encoding);\n      } catch (error) {\n        this.stream.trigger('log', {\n          level: 'warn',\n          message: 'TextDecoder could not be created with ' + encoding + ' encoding. ' + error\n        });\n      }\n    }\n  };\n\n  var Cea708Stream = function Cea708Stream(options) {\n    options = options || {};\n    Cea708Stream.prototype.init.call(this);\n    var self = this;\n    var captionServices = options.captionServices || {};\n    var captionServiceEncodings = {};\n    var serviceProps; // Get service encodings from captionServices option block\n\n    Object.keys(captionServices).forEach(function (serviceName) {\n      serviceProps = captionServices[serviceName];\n\n      if (/^SERVICE/.test(serviceName)) {\n        captionServiceEncodings[serviceName] = serviceProps.encoding;\n      }\n    });\n    this.serviceEncodings = captionServiceEncodings;\n    this.current708Packet = null;\n    this.services = {};\n\n    this.push = function (packet) {\n      if (packet.type === 3) {\n        // 708 packet start\n        self.new708Packet();\n        self.add708Bytes(packet);\n      } else {\n        if (self.current708Packet === null) {\n          // This should only happen at the start of a file if there's no packet start.\n          self.new708Packet();\n        }\n\n        self.add708Bytes(packet);\n      }\n    };\n  };\n\n  Cea708Stream.prototype = new stream();\n  /**\n   * Push current 708 packet, create new 708 packet.\n   */\n\n  Cea708Stream.prototype.new708Packet = function () {\n    if (this.current708Packet !== null) {\n      this.push708Packet();\n    }\n\n    this.current708Packet = {\n      data: [],\n      ptsVals: []\n    };\n  };\n  /**\n   * Add pts and both bytes from packet into current 708 packet.\n   */\n\n\n  Cea708Stream.prototype.add708Bytes = function (packet) {\n    var data = packet.ccData;\n    var byte0 = data >>> 8;\n    var byte1 = data & 0xff; // I would just keep a list of packets instead of bytes, but it isn't clear in the spec\n    // that service blocks will always line up with byte pairs.\n\n    this.current708Packet.ptsVals.push(packet.pts);\n    this.current708Packet.data.push(byte0);\n    this.current708Packet.data.push(byte1);\n  };\n  /**\n   * Parse completed 708 packet into service blocks and push each service block.\n   */\n\n\n  Cea708Stream.prototype.push708Packet = function () {\n    var packet708 = this.current708Packet;\n    var packetData = packet708.data;\n    var serviceNum = null;\n    var blockSize = null;\n    var i = 0;\n    var b = packetData[i++];\n    packet708.seq = b >> 6;\n    packet708.sizeCode = b & 0x3f; // 0b00111111;\n\n    for (; i < packetData.length; i++) {\n      b = packetData[i++];\n      serviceNum = b >> 5;\n      blockSize = b & 0x1f; // 0b00011111\n\n      if (serviceNum === 7 && blockSize > 0) {\n        // Extended service num\n        b = packetData[i++];\n        serviceNum = b;\n      }\n\n      this.pushServiceBlock(serviceNum, i, blockSize);\n\n      if (blockSize > 0) {\n        i += blockSize - 1;\n      }\n    }\n  };\n  /**\n   * Parse service block, execute commands, read text.\n   *\n   * Note: While many of these commands serve important purposes,\n   * many others just parse out the parameters or attributes, but\n   * nothing is done with them because this is not a full and complete\n   * implementation of the entire 708 spec.\n   *\n   * @param  {Integer} serviceNum Service number\n   * @param  {Integer} start      Start index of the 708 packet data\n   * @param  {Integer} size       Block size\n   */\n\n\n  Cea708Stream.prototype.pushServiceBlock = function (serviceNum, start, size) {\n    var b;\n    var i = start;\n    var packetData = this.current708Packet.data;\n    var service = this.services[serviceNum];\n\n    if (!service) {\n      service = this.initService(serviceNum, i);\n    }\n\n    for (; i < start + size && i < packetData.length; i++) {\n      b = packetData[i];\n\n      if (within708TextBlock(b)) {\n        i = this.handleText(i, service);\n      } else if (b === 0x18) {\n        i = this.multiByteCharacter(i, service);\n      } else if (b === 0x10) {\n        i = this.extendedCommands(i, service);\n      } else if (0x80 <= b && b <= 0x87) {\n        i = this.setCurrentWindow(i, service);\n      } else if (0x98 <= b && b <= 0x9f) {\n        i = this.defineWindow(i, service);\n      } else if (b === 0x88) {\n        i = this.clearWindows(i, service);\n      } else if (b === 0x8c) {\n        i = this.deleteWindows(i, service);\n      } else if (b === 0x89) {\n        i = this.displayWindows(i, service);\n      } else if (b === 0x8a) {\n        i = this.hideWindows(i, service);\n      } else if (b === 0x8b) {\n        i = this.toggleWindows(i, service);\n      } else if (b === 0x97) {\n        i = this.setWindowAttributes(i, service);\n      } else if (b === 0x90) {\n        i = this.setPenAttributes(i, service);\n      } else if (b === 0x91) {\n        i = this.setPenColor(i, service);\n      } else if (b === 0x92) {\n        i = this.setPenLocation(i, service);\n      } else if (b === 0x8f) {\n        service = this.reset(i, service);\n      } else if (b === 0x08) {\n        // BS: Backspace\n        service.currentWindow.backspace();\n      } else if (b === 0x0c) {\n        // FF: Form feed\n        service.currentWindow.clearText();\n      } else if (b === 0x0d) {\n        // CR: Carriage return\n        service.currentWindow.pendingNewLine = true;\n      } else if (b === 0x0e) {\n        // HCR: Horizontal carriage return\n        service.currentWindow.clearText();\n      } else if (b === 0x8d) {\n        // DLY: Delay, nothing to do\n        i++;\n      } else ;\n    }\n  };\n  /**\n   * Execute an extended command\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.extendedCommands = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n\n    if (within708TextBlock(b)) {\n      i = this.handleText(i, service, {\n        isExtended: true\n      });\n    }\n\n    return i;\n  };\n  /**\n   * Get PTS value of a given byte index\n   *\n   * @param  {Integer} byteIndex  Index of the byte\n   * @return {Integer}            PTS\n   */\n\n\n  Cea708Stream.prototype.getPts = function (byteIndex) {\n    // There's 1 pts value per 2 bytes\n    return this.current708Packet.ptsVals[Math.floor(byteIndex / 2)];\n  };\n  /**\n   * Initializes a service\n   *\n   * @param  {Integer} serviceNum Service number\n   * @return {Service}            Initialized service object\n   */\n\n\n  Cea708Stream.prototype.initService = function (serviceNum, i) {\n    var serviceName = 'SERVICE' + serviceNum;\n    var self = this;\n    var serviceName;\n    var encoding;\n\n    if (serviceName in this.serviceEncodings) {\n      encoding = this.serviceEncodings[serviceName];\n    }\n\n    this.services[serviceNum] = new Cea708Service(serviceNum, encoding, self);\n    this.services[serviceNum].init(this.getPts(i), function (pts) {\n      self.flushDisplayed(pts, self.services[serviceNum]);\n    });\n    return this.services[serviceNum];\n  };\n  /**\n   * Execute text writing to current window\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.handleText = function (i, service, options) {\n    var isExtended = options && options.isExtended;\n    var isMultiByte = options && options.isMultiByte;\n    var packetData = this.current708Packet.data;\n    var extended = isExtended ? 0x1000 : 0x0000;\n    var currentByte = packetData[i];\n    var nextByte = packetData[i + 1];\n    var win = service.currentWindow;\n    var char;\n    var charCodeArray; // Use the TextDecoder if one was created for this service\n\n    if (service.textDecoder_ && !isExtended) {\n      if (isMultiByte) {\n        charCodeArray = [currentByte, nextByte];\n        i++;\n      } else {\n        charCodeArray = [currentByte];\n      }\n\n      char = service.textDecoder_.decode(new Uint8Array(charCodeArray));\n    } else {\n      char = get708CharFromCode(extended | currentByte);\n    }\n\n    if (win.pendingNewLine && !win.isEmpty()) {\n      win.newLine(this.getPts(i));\n    }\n\n    win.pendingNewLine = false;\n    win.addText(char);\n    return i;\n  };\n  /**\n   * Handle decoding of multibyte character\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.multiByteCharacter = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var firstByte = packetData[i + 1];\n    var secondByte = packetData[i + 2];\n\n    if (within708TextBlock(firstByte) && within708TextBlock(secondByte)) {\n      i = this.handleText(++i, service, {\n        isMultiByte: true\n      });\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the CW# command.\n   *\n   * Set the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setCurrentWindow = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var windowNum = b & 0x07;\n    service.setCurrentWindow(windowNum);\n    return i;\n  };\n  /**\n   * Parse and execute the DF# command.\n   *\n   * Define a window and set it as the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.defineWindow = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var windowNum = b & 0x07;\n    service.setCurrentWindow(windowNum);\n    var win = service.currentWindow;\n    b = packetData[++i];\n    win.visible = (b & 0x20) >> 5; // v\n\n    win.rowLock = (b & 0x10) >> 4; // rl\n\n    win.columnLock = (b & 0x08) >> 3; // cl\n\n    win.priority = b & 0x07; // p\n\n    b = packetData[++i];\n    win.relativePositioning = (b & 0x80) >> 7; // rp\n\n    win.anchorVertical = b & 0x7f; // av\n\n    b = packetData[++i];\n    win.anchorHorizontal = b; // ah\n\n    b = packetData[++i];\n    win.anchorPoint = (b & 0xf0) >> 4; // ap\n\n    win.rowCount = b & 0x0f; // rc\n\n    b = packetData[++i];\n    win.columnCount = b & 0x3f; // cc\n\n    b = packetData[++i];\n    win.windowStyle = (b & 0x38) >> 3; // ws\n\n    win.penStyle = b & 0x07; // ps\n    // The spec says there are (rowCount+1) \"virtual rows\"\n\n    win.virtualRowCount = win.rowCount + 1;\n    return i;\n  };\n  /**\n   * Parse and execute the SWA command.\n   *\n   * Set attributes of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setWindowAttributes = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var winAttr = service.currentWindow.winAttr;\n    b = packetData[++i];\n    winAttr.fillOpacity = (b & 0xc0) >> 6; // fo\n\n    winAttr.fillRed = (b & 0x30) >> 4; // fr\n\n    winAttr.fillGreen = (b & 0x0c) >> 2; // fg\n\n    winAttr.fillBlue = b & 0x03; // fb\n\n    b = packetData[++i];\n    winAttr.borderType = (b & 0xc0) >> 6; // bt\n\n    winAttr.borderRed = (b & 0x30) >> 4; // br\n\n    winAttr.borderGreen = (b & 0x0c) >> 2; // bg\n\n    winAttr.borderBlue = b & 0x03; // bb\n\n    b = packetData[++i];\n    winAttr.borderType += (b & 0x80) >> 5; // bt\n\n    winAttr.wordWrap = (b & 0x40) >> 6; // ww\n\n    winAttr.printDirection = (b & 0x30) >> 4; // pd\n\n    winAttr.scrollDirection = (b & 0x0c) >> 2; // sd\n\n    winAttr.justify = b & 0x03; // j\n\n    b = packetData[++i];\n    winAttr.effectSpeed = (b & 0xf0) >> 4; // es\n\n    winAttr.effectDirection = (b & 0x0c) >> 2; // ed\n\n    winAttr.displayEffect = b & 0x03; // de\n\n    return i;\n  };\n  /**\n   * Gather text from all displayed windows and push a caption to output.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   */\n\n\n  Cea708Stream.prototype.flushDisplayed = function (pts, service) {\n    var displayedText = []; // TODO: Positioning not supported, displaying multiple windows will not necessarily\n    // display text in the correct order, but sample files so far have not shown any issue.\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (service.windows[winId].visible && !service.windows[winId].isEmpty()) {\n        displayedText.push(service.windows[winId].getText());\n      }\n    }\n\n    service.endPts = pts;\n    service.text = displayedText.join('\\n\\n');\n    this.pushCaption(service);\n    service.startPts = pts;\n  };\n  /**\n   * Push a caption to output if the caption contains text.\n   *\n   * @param  {Service} service  The service object to be affected\n   */\n\n\n  Cea708Stream.prototype.pushCaption = function (service) {\n    if (service.text !== '') {\n      this.trigger('data', {\n        startPts: service.startPts,\n        endPts: service.endPts,\n        text: service.text,\n        stream: 'cc708_' + service.serviceNum\n      });\n      service.text = '';\n      service.startPts = service.endPts;\n    }\n  };\n  /**\n   * Parse and execute the DSW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.displayWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible = 1;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the HDW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.hideWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible = 0;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the TGW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.toggleWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible ^= 1;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the CLW command.\n   *\n   * Clear text of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.clearWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].clearText();\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the DLW command.\n   *\n   * Re-initialize windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.deleteWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].reset();\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPA command.\n   *\n   * Set pen attributes of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenAttributes = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penAttr = service.currentWindow.penAttr;\n    b = packetData[++i];\n    penAttr.textTag = (b & 0xf0) >> 4; // tt\n\n    penAttr.offset = (b & 0x0c) >> 2; // o\n\n    penAttr.penSize = b & 0x03; // s\n\n    b = packetData[++i];\n    penAttr.italics = (b & 0x80) >> 7; // i\n\n    penAttr.underline = (b & 0x40) >> 6; // u\n\n    penAttr.edgeType = (b & 0x38) >> 3; // et\n\n    penAttr.fontStyle = b & 0x07; // fs\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPC command.\n   *\n   * Set pen color of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenColor = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penColor = service.currentWindow.penColor;\n    b = packetData[++i];\n    penColor.fgOpacity = (b & 0xc0) >> 6; // fo\n\n    penColor.fgRed = (b & 0x30) >> 4; // fr\n\n    penColor.fgGreen = (b & 0x0c) >> 2; // fg\n\n    penColor.fgBlue = b & 0x03; // fb\n\n    b = packetData[++i];\n    penColor.bgOpacity = (b & 0xc0) >> 6; // bo\n\n    penColor.bgRed = (b & 0x30) >> 4; // br\n\n    penColor.bgGreen = (b & 0x0c) >> 2; // bg\n\n    penColor.bgBlue = b & 0x03; // bb\n\n    b = packetData[++i];\n    penColor.edgeRed = (b & 0x30) >> 4; // er\n\n    penColor.edgeGreen = (b & 0x0c) >> 2; // eg\n\n    penColor.edgeBlue = b & 0x03; // eb\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPL command.\n   *\n   * Set pen location of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenLocation = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penLoc = service.currentWindow.penLoc; // Positioning isn't really supported at the moment, so this essentially just inserts a linebreak\n\n    service.currentWindow.pendingNewLine = true;\n    b = packetData[++i];\n    penLoc.row = b & 0x0f; // r\n\n    b = packetData[++i];\n    penLoc.column = b & 0x3f; // c\n\n    return i;\n  };\n  /**\n   * Execute the RST command.\n   *\n   * Reset service to a clean slate. Re-initialize.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Service}          Re-initialized service\n   */\n\n\n  Cea708Stream.prototype.reset = function (i, service) {\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n    return this.initService(service.serviceNum, i);\n  }; // This hash maps non-ASCII, special, and extended character codes to their\n  // proper Unicode equivalent. The first keys that are only a single byte\n  // are the non-standard ASCII characters, which simply map the CEA608 byte\n  // to the standard ASCII/Unicode. The two-byte keys that follow are the CEA608\n  // character codes, but have their MSB bitmasked with 0x03 so that a lookup\n  // can be performed regardless of the field and data channel on which the\n  // character code was received.\n\n\n  var CHARACTER_TRANSLATION = {\n    0x2a: 0xe1,\n    // á\n    0x5c: 0xe9,\n    // é\n    0x5e: 0xed,\n    // í\n    0x5f: 0xf3,\n    // ó\n    0x60: 0xfa,\n    // ú\n    0x7b: 0xe7,\n    // ç\n    0x7c: 0xf7,\n    // ÷\n    0x7d: 0xd1,\n    // Ñ\n    0x7e: 0xf1,\n    // ñ\n    0x7f: 0x2588,\n    // █\n    0x0130: 0xae,\n    // ®\n    0x0131: 0xb0,\n    // °\n    0x0132: 0xbd,\n    // ½\n    0x0133: 0xbf,\n    // ¿\n    0x0134: 0x2122,\n    // ™\n    0x0135: 0xa2,\n    // ¢\n    0x0136: 0xa3,\n    // £\n    0x0137: 0x266a,\n    // ♪\n    0x0138: 0xe0,\n    // à\n    0x0139: 0xa0,\n    //\n    0x013a: 0xe8,\n    // è\n    0x013b: 0xe2,\n    // â\n    0x013c: 0xea,\n    // ê\n    0x013d: 0xee,\n    // î\n    0x013e: 0xf4,\n    // ô\n    0x013f: 0xfb,\n    // û\n    0x0220: 0xc1,\n    // Á\n    0x0221: 0xc9,\n    // É\n    0x0222: 0xd3,\n    // Ó\n    0x0223: 0xda,\n    // Ú\n    0x0224: 0xdc,\n    // Ü\n    0x0225: 0xfc,\n    // ü\n    0x0226: 0x2018,\n    // ‘\n    0x0227: 0xa1,\n    // ¡\n    0x0228: 0x2a,\n    // *\n    0x0229: 0x27,\n    // '\n    0x022a: 0x2014,\n    // —\n    0x022b: 0xa9,\n    // ©\n    0x022c: 0x2120,\n    // ℠\n    0x022d: 0x2022,\n    // •\n    0x022e: 0x201c,\n    // “\n    0x022f: 0x201d,\n    // ”\n    0x0230: 0xc0,\n    // À\n    0x0231: 0xc2,\n    // Â\n    0x0232: 0xc7,\n    // Ç\n    0x0233: 0xc8,\n    // È\n    0x0234: 0xca,\n    // Ê\n    0x0235: 0xcb,\n    // Ë\n    0x0236: 0xeb,\n    // ë\n    0x0237: 0xce,\n    // Î\n    0x0238: 0xcf,\n    // Ï\n    0x0239: 0xef,\n    // ï\n    0x023a: 0xd4,\n    // Ô\n    0x023b: 0xd9,\n    // Ù\n    0x023c: 0xf9,\n    // ù\n    0x023d: 0xdb,\n    // Û\n    0x023e: 0xab,\n    // «\n    0x023f: 0xbb,\n    // »\n    0x0320: 0xc3,\n    // Ã\n    0x0321: 0xe3,\n    // ã\n    0x0322: 0xcd,\n    // Í\n    0x0323: 0xcc,\n    // Ì\n    0x0324: 0xec,\n    // ì\n    0x0325: 0xd2,\n    // Ò\n    0x0326: 0xf2,\n    // ò\n    0x0327: 0xd5,\n    // Õ\n    0x0328: 0xf5,\n    // õ\n    0x0329: 0x7b,\n    // {\n    0x032a: 0x7d,\n    // }\n    0x032b: 0x5c,\n    // \\\n    0x032c: 0x5e,\n    // ^\n    0x032d: 0x5f,\n    // _\n    0x032e: 0x7c,\n    // |\n    0x032f: 0x7e,\n    // ~\n    0x0330: 0xc4,\n    // Ä\n    0x0331: 0xe4,\n    // ä\n    0x0332: 0xd6,\n    // Ö\n    0x0333: 0xf6,\n    // ö\n    0x0334: 0xdf,\n    // ß\n    0x0335: 0xa5,\n    // ¥\n    0x0336: 0xa4,\n    // ¤\n    0x0337: 0x2502,\n    // │\n    0x0338: 0xc5,\n    // Å\n    0x0339: 0xe5,\n    // å\n    0x033a: 0xd8,\n    // Ø\n    0x033b: 0xf8,\n    // ø\n    0x033c: 0x250c,\n    // ┌\n    0x033d: 0x2510,\n    // ┐\n    0x033e: 0x2514,\n    // └\n    0x033f: 0x2518 // ┘\n\n  };\n\n  var getCharFromCode = function getCharFromCode(code) {\n    if (code === null) {\n      return '';\n    }\n\n    code = CHARACTER_TRANSLATION[code] || code;\n    return String.fromCharCode(code);\n  }; // the index of the last row in a CEA-608 display buffer\n\n\n  var BOTTOM_ROW = 14; // This array is used for mapping PACs -> row #, since there's no way of\n  // getting it through bit logic.\n\n  var ROWS = [0x1100, 0x1120, 0x1200, 0x1220, 0x1500, 0x1520, 0x1600, 0x1620, 0x1700, 0x1720, 0x1000, 0x1300, 0x1320, 0x1400, 0x1420]; // CEA-608 captions are rendered onto a 34x15 matrix of character\n  // cells. The \"bottom\" row is the last element in the outer array.\n\n  var createDisplayBuffer = function createDisplayBuffer() {\n    var result = [],\n        i = BOTTOM_ROW + 1;\n\n    while (i--) {\n      result.push('');\n    }\n\n    return result;\n  };\n\n  var Cea608Stream = function Cea608Stream(field, dataChannel) {\n    Cea608Stream.prototype.init.call(this);\n    this.field_ = field || 0;\n    this.dataChannel_ = dataChannel || 0;\n    this.name_ = 'CC' + ((this.field_ << 1 | this.dataChannel_) + 1);\n    this.setConstants();\n    this.reset();\n\n    this.push = function (packet) {\n      var data, swap, char0, char1, text; // remove the parity bits\n\n      data = packet.ccData & 0x7f7f; // ignore duplicate control codes; the spec demands they're sent twice\n\n      if (data === this.lastControlCode_) {\n        this.lastControlCode_ = null;\n        return;\n      } // Store control codes\n\n\n      if ((data & 0xf000) === 0x1000) {\n        this.lastControlCode_ = data;\n      } else if (data !== this.PADDING_) {\n        this.lastControlCode_ = null;\n      }\n\n      char0 = data >>> 8;\n      char1 = data & 0xff;\n\n      if (data === this.PADDING_) {\n        return;\n      } else if (data === this.RESUME_CAPTION_LOADING_) {\n        this.mode_ = 'popOn';\n      } else if (data === this.END_OF_CAPTION_) {\n        // If an EOC is received while in paint-on mode, the displayed caption\n        // text should be swapped to non-displayed memory as if it was a pop-on\n        // caption. Because of that, we should explicitly switch back to pop-on\n        // mode\n        this.mode_ = 'popOn';\n        this.clearFormatting(packet.pts); // if a caption was being displayed, it's gone now\n\n        this.flushDisplayed(packet.pts); // flip memory\n\n        swap = this.displayed_;\n        this.displayed_ = this.nonDisplayed_;\n        this.nonDisplayed_ = swap; // start measuring the time to display the caption\n\n        this.startPts_ = packet.pts;\n      } else if (data === this.ROLL_UP_2_ROWS_) {\n        this.rollUpRows_ = 2;\n        this.setRollUp(packet.pts);\n      } else if (data === this.ROLL_UP_3_ROWS_) {\n        this.rollUpRows_ = 3;\n        this.setRollUp(packet.pts);\n      } else if (data === this.ROLL_UP_4_ROWS_) {\n        this.rollUpRows_ = 4;\n        this.setRollUp(packet.pts);\n      } else if (data === this.CARRIAGE_RETURN_) {\n        this.clearFormatting(packet.pts);\n        this.flushDisplayed(packet.pts);\n        this.shiftRowsUp_();\n        this.startPts_ = packet.pts;\n      } else if (data === this.BACKSPACE_) {\n        if (this.mode_ === 'popOn') {\n          this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n        } else {\n          this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n        }\n      } else if (data === this.ERASE_DISPLAYED_MEMORY_) {\n        this.flushDisplayed(packet.pts);\n        this.displayed_ = createDisplayBuffer();\n      } else if (data === this.ERASE_NON_DISPLAYED_MEMORY_) {\n        this.nonDisplayed_ = createDisplayBuffer();\n      } else if (data === this.RESUME_DIRECT_CAPTIONING_) {\n        if (this.mode_ !== 'paintOn') {\n          // NOTE: This should be removed when proper caption positioning is\n          // implemented\n          this.flushDisplayed(packet.pts);\n          this.displayed_ = createDisplayBuffer();\n        }\n\n        this.mode_ = 'paintOn';\n        this.startPts_ = packet.pts; // Append special characters to caption text\n      } else if (this.isSpecialCharacter(char0, char1)) {\n        // Bitmask char0 so that we can apply character transformations\n        // regardless of field and data channel.\n        // Then byte-shift to the left and OR with char1 so we can pass the\n        // entire character code to `getCharFromCode`.\n        char0 = (char0 & 0x03) << 8;\n        text = getCharFromCode(char0 | char1);\n        this[this.mode_](packet.pts, text);\n        this.column_++; // Append extended characters to caption text\n      } else if (this.isExtCharacter(char0, char1)) {\n        // Extended characters always follow their \"non-extended\" equivalents.\n        // IE if a \"è\" is desired, you'll always receive \"eè\"; non-compliant\n        // decoders are supposed to drop the \"è\", while compliant decoders\n        // backspace the \"e\" and insert \"è\".\n        // Delete the previous character\n        if (this.mode_ === 'popOn') {\n          this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n        } else {\n          this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n        } // Bitmask char0 so that we can apply character transformations\n        // regardless of field and data channel.\n        // Then byte-shift to the left and OR with char1 so we can pass the\n        // entire character code to `getCharFromCode`.\n\n\n        char0 = (char0 & 0x03) << 8;\n        text = getCharFromCode(char0 | char1);\n        this[this.mode_](packet.pts, text);\n        this.column_++; // Process mid-row codes\n      } else if (this.isMidRowCode(char0, char1)) {\n        // Attributes are not additive, so clear all formatting\n        this.clearFormatting(packet.pts); // According to the standard, mid-row codes\n        // should be replaced with spaces, so add one now\n\n        this[this.mode_](packet.pts, ' ');\n        this.column_++;\n\n        if ((char1 & 0xe) === 0xe) {\n          this.addFormatting(packet.pts, ['i']);\n        }\n\n        if ((char1 & 0x1) === 0x1) {\n          this.addFormatting(packet.pts, ['u']);\n        } // Detect offset control codes and adjust cursor\n\n      } else if (this.isOffsetControlCode(char0, char1)) {\n        // Cursor position is set by indent PAC (see below) in 4-column\n        // increments, with an additional offset code of 1-3 to reach any\n        // of the 32 columns specified by CEA-608. So all we need to do\n        // here is increment the column cursor by the given offset.\n        this.column_ += char1 & 0x03; // Detect PACs (Preamble Address Codes)\n      } else if (this.isPAC(char0, char1)) {\n        // There's no logic for PAC -> row mapping, so we have to just\n        // find the row code in an array and use its index :(\n        var row = ROWS.indexOf(data & 0x1f20); // Configure the caption window if we're in roll-up mode\n\n        if (this.mode_ === 'rollUp') {\n          // This implies that the base row is incorrectly set.\n          // As per the recommendation in CEA-608(Base Row Implementation), defer to the number\n          // of roll-up rows set.\n          if (row - this.rollUpRows_ + 1 < 0) {\n            row = this.rollUpRows_ - 1;\n          }\n\n          this.setRollUp(packet.pts, row);\n        }\n\n        if (row !== this.row_) {\n          // formatting is only persistent for current row\n          this.clearFormatting(packet.pts);\n          this.row_ = row;\n        } // All PACs can apply underline, so detect and apply\n        // (All odd-numbered second bytes set underline)\n\n\n        if (char1 & 0x1 && this.formatting_.indexOf('u') === -1) {\n          this.addFormatting(packet.pts, ['u']);\n        }\n\n        if ((data & 0x10) === 0x10) {\n          // We've got an indent level code. Each successive even number\n          // increments the column cursor by 4, so we can get the desired\n          // column position by bit-shifting to the right (to get n/2)\n          // and multiplying by 4.\n          this.column_ = ((data & 0xe) >> 1) * 4;\n        }\n\n        if (this.isColorPAC(char1)) {\n          // it's a color code, though we only support white, which\n          // can be either normal or italicized. white italics can be\n          // either 0x4e or 0x6e depending on the row, so we just\n          // bitwise-and with 0xe to see if italics should be turned on\n          if ((char1 & 0xe) === 0xe) {\n            this.addFormatting(packet.pts, ['i']);\n          }\n        } // We have a normal character in char0, and possibly one in char1\n\n      } else if (this.isNormalChar(char0)) {\n        if (char1 === 0x00) {\n          char1 = null;\n        }\n\n        text = getCharFromCode(char0);\n        text += getCharFromCode(char1);\n        this[this.mode_](packet.pts, text);\n        this.column_ += text.length;\n      } // finish data processing\n\n    };\n  };\n\n  Cea608Stream.prototype = new stream(); // Trigger a cue point that captures the current state of the\n  // display buffer\n\n  Cea608Stream.prototype.flushDisplayed = function (pts) {\n    var content = this.displayed_ // remove spaces from the start and end of the string\n    .map(function (row, index) {\n      try {\n        return row.trim();\n      } catch (e) {\n        // Ordinarily, this shouldn't happen. However, caption\n        // parsing errors should not throw exceptions and\n        // break playback.\n        this.trigger('log', {\n          level: 'warn',\n          message: 'Skipping a malformed 608 caption at index ' + index + '.'\n        });\n        return '';\n      }\n    }, this) // combine all text rows to display in one cue\n    .join('\\n') // and remove blank rows from the start and end, but not the middle\n    .replace(/^\\n+|\\n+$/g, '');\n\n    if (content.length) {\n      this.trigger('data', {\n        startPts: this.startPts_,\n        endPts: pts,\n        text: content,\n        stream: this.name_\n      });\n    }\n  };\n  /**\n   * Zero out the data, used for startup and on seek\n   */\n\n\n  Cea608Stream.prototype.reset = function () {\n    this.mode_ = 'popOn'; // When in roll-up mode, the index of the last row that will\n    // actually display captions. If a caption is shifted to a row\n    // with a lower index than this, it is cleared from the display\n    // buffer\n\n    this.topRow_ = 0;\n    this.startPts_ = 0;\n    this.displayed_ = createDisplayBuffer();\n    this.nonDisplayed_ = createDisplayBuffer();\n    this.lastControlCode_ = null; // Track row and column for proper line-breaking and spacing\n\n    this.column_ = 0;\n    this.row_ = BOTTOM_ROW;\n    this.rollUpRows_ = 2; // This variable holds currently-applied formatting\n\n    this.formatting_ = [];\n  };\n  /**\n   * Sets up control code and related constants for this instance\n   */\n\n\n  Cea608Stream.prototype.setConstants = function () {\n    // The following attributes have these uses:\n    // ext_ :    char0 for mid-row codes, and the base for extended\n    //           chars (ext_+0, ext_+1, and ext_+2 are char0s for\n    //           extended codes)\n    // control_: char0 for control codes, except byte-shifted to the\n    //           left so that we can do this.control_ | CONTROL_CODE\n    // offset_:  char0 for tab offset codes\n    //\n    // It's also worth noting that control codes, and _only_ control codes,\n    // differ between field 1 and field2. Field 2 control codes are always\n    // their field 1 value plus 1. That's why there's the \"| field\" on the\n    // control value.\n    if (this.dataChannel_ === 0) {\n      this.BASE_ = 0x10;\n      this.EXT_ = 0x11;\n      this.CONTROL_ = (0x14 | this.field_) << 8;\n      this.OFFSET_ = 0x17;\n    } else if (this.dataChannel_ === 1) {\n      this.BASE_ = 0x18;\n      this.EXT_ = 0x19;\n      this.CONTROL_ = (0x1c | this.field_) << 8;\n      this.OFFSET_ = 0x1f;\n    } // Constants for the LSByte command codes recognized by Cea608Stream. This\n    // list is not exhaustive. For a more comprehensive listing and semantics see\n    // http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf\n    // Padding\n\n\n    this.PADDING_ = 0x0000; // Pop-on Mode\n\n    this.RESUME_CAPTION_LOADING_ = this.CONTROL_ | 0x20;\n    this.END_OF_CAPTION_ = this.CONTROL_ | 0x2f; // Roll-up Mode\n\n    this.ROLL_UP_2_ROWS_ = this.CONTROL_ | 0x25;\n    this.ROLL_UP_3_ROWS_ = this.CONTROL_ | 0x26;\n    this.ROLL_UP_4_ROWS_ = this.CONTROL_ | 0x27;\n    this.CARRIAGE_RETURN_ = this.CONTROL_ | 0x2d; // paint-on mode\n\n    this.RESUME_DIRECT_CAPTIONING_ = this.CONTROL_ | 0x29; // Erasure\n\n    this.BACKSPACE_ = this.CONTROL_ | 0x21;\n    this.ERASE_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2c;\n    this.ERASE_NON_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2e;\n  };\n  /**\n   * Detects if the 2-byte packet data is a special character\n   *\n   * Special characters have a second byte in the range 0x30 to 0x3f,\n   * with the first byte being 0x11 (for data channel 1) or 0x19 (for\n   * data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an special character\n   */\n\n\n  Cea608Stream.prototype.isSpecialCharacter = function (char0, char1) {\n    return char0 === this.EXT_ && char1 >= 0x30 && char1 <= 0x3f;\n  };\n  /**\n   * Detects if the 2-byte packet data is an extended character\n   *\n   * Extended characters have a second byte in the range 0x20 to 0x3f,\n   * with the first byte being 0x12 or 0x13 (for data channel 1) or\n   * 0x1a or 0x1b (for data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an extended character\n   */\n\n\n  Cea608Stream.prototype.isExtCharacter = function (char0, char1) {\n    return (char0 === this.EXT_ + 1 || char0 === this.EXT_ + 2) && char1 >= 0x20 && char1 <= 0x3f;\n  };\n  /**\n   * Detects if the 2-byte packet is a mid-row code\n   *\n   * Mid-row codes have a second byte in the range 0x20 to 0x2f, with\n   * the first byte being 0x11 (for data channel 1) or 0x19 (for data\n   * channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are a mid-row code\n   */\n\n\n  Cea608Stream.prototype.isMidRowCode = function (char0, char1) {\n    return char0 === this.EXT_ && char1 >= 0x20 && char1 <= 0x2f;\n  };\n  /**\n   * Detects if the 2-byte packet is an offset control code\n   *\n   * Offset control codes have a second byte in the range 0x21 to 0x23,\n   * with the first byte being 0x17 (for data channel 1) or 0x1f (for\n   * data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an offset control code\n   */\n\n\n  Cea608Stream.prototype.isOffsetControlCode = function (char0, char1) {\n    return char0 === this.OFFSET_ && char1 >= 0x21 && char1 <= 0x23;\n  };\n  /**\n   * Detects if the 2-byte packet is a Preamble Address Code\n   *\n   * PACs have a first byte in the range 0x10 to 0x17 (for data channel 1)\n   * or 0x18 to 0x1f (for data channel 2), with the second byte in the\n   * range 0x40 to 0x7f.\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are a PAC\n   */\n\n\n  Cea608Stream.prototype.isPAC = function (char0, char1) {\n    return char0 >= this.BASE_ && char0 < this.BASE_ + 8 && char1 >= 0x40 && char1 <= 0x7f;\n  };\n  /**\n   * Detects if a packet's second byte is in the range of a PAC color code\n   *\n   * PAC color codes have the second byte be in the range 0x40 to 0x4f, or\n   * 0x60 to 0x6f.\n   *\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the byte is a color PAC\n   */\n\n\n  Cea608Stream.prototype.isColorPAC = function (char1) {\n    return char1 >= 0x40 && char1 <= 0x4f || char1 >= 0x60 && char1 <= 0x7f;\n  };\n  /**\n   * Detects if a single byte is in the range of a normal character\n   *\n   * Normal text bytes are in the range 0x20 to 0x7f.\n   *\n   * @param  {Integer} char  The byte\n   * @return {Boolean}       Whether the byte is a normal character\n   */\n\n\n  Cea608Stream.prototype.isNormalChar = function (char) {\n    return char >= 0x20 && char <= 0x7f;\n  };\n  /**\n   * Configures roll-up\n   *\n   * @param  {Integer} pts         Current PTS\n   * @param  {Integer} newBaseRow  Used by PACs to slide the current window to\n   *                               a new position\n   */\n\n\n  Cea608Stream.prototype.setRollUp = function (pts, newBaseRow) {\n    // Reset the base row to the bottom row when switching modes\n    if (this.mode_ !== 'rollUp') {\n      this.row_ = BOTTOM_ROW;\n      this.mode_ = 'rollUp'; // Spec says to wipe memories when switching to roll-up\n\n      this.flushDisplayed(pts);\n      this.nonDisplayed_ = createDisplayBuffer();\n      this.displayed_ = createDisplayBuffer();\n    }\n\n    if (newBaseRow !== undefined && newBaseRow !== this.row_) {\n      // move currently displayed captions (up or down) to the new base row\n      for (var i = 0; i < this.rollUpRows_; i++) {\n        this.displayed_[newBaseRow - i] = this.displayed_[this.row_ - i];\n        this.displayed_[this.row_ - i] = '';\n      }\n    }\n\n    if (newBaseRow === undefined) {\n      newBaseRow = this.row_;\n    }\n\n    this.topRow_ = newBaseRow - this.rollUpRows_ + 1;\n  }; // Adds the opening HTML tag for the passed character to the caption text,\n  // and keeps track of it for later closing\n\n\n  Cea608Stream.prototype.addFormatting = function (pts, format) {\n    this.formatting_ = this.formatting_.concat(format);\n    var text = format.reduce(function (text, format) {\n      return text + '<' + format + '>';\n    }, '');\n    this[this.mode_](pts, text);\n  }; // Adds HTML closing tags for current formatting to caption text and\n  // clears remembered formatting\n\n\n  Cea608Stream.prototype.clearFormatting = function (pts) {\n    if (!this.formatting_.length) {\n      return;\n    }\n\n    var text = this.formatting_.reverse().reduce(function (text, format) {\n      return text + '</' + format + '>';\n    }, '');\n    this.formatting_ = [];\n    this[this.mode_](pts, text);\n  }; // Mode Implementations\n\n\n  Cea608Stream.prototype.popOn = function (pts, text) {\n    var baseRow = this.nonDisplayed_[this.row_]; // buffer characters\n\n    baseRow += text;\n    this.nonDisplayed_[this.row_] = baseRow;\n  };\n\n  Cea608Stream.prototype.rollUp = function (pts, text) {\n    var baseRow = this.displayed_[this.row_];\n    baseRow += text;\n    this.displayed_[this.row_] = baseRow;\n  };\n\n  Cea608Stream.prototype.shiftRowsUp_ = function () {\n    var i; // clear out inactive rows\n\n    for (i = 0; i < this.topRow_; i++) {\n      this.displayed_[i] = '';\n    }\n\n    for (i = this.row_ + 1; i < BOTTOM_ROW + 1; i++) {\n      this.displayed_[i] = '';\n    } // shift displayed rows up\n\n\n    for (i = this.topRow_; i < this.row_; i++) {\n      this.displayed_[i] = this.displayed_[i + 1];\n    } // clear out the bottom row\n\n\n    this.displayed_[this.row_] = '';\n  };\n\n  Cea608Stream.prototype.paintOn = function (pts, text) {\n    var baseRow = this.displayed_[this.row_];\n    baseRow += text;\n    this.displayed_[this.row_] = baseRow;\n  }; // exports\n\n\n  var captionStream = {\n    CaptionStream: CaptionStream$1,\n    Cea608Stream: Cea608Stream,\n    Cea708Stream: Cea708Stream\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var streamTypes = {\n    H264_STREAM_TYPE: 0x1B,\n    ADTS_STREAM_TYPE: 0x0F,\n    METADATA_STREAM_TYPE: 0x15\n  };\n\n  var MAX_TS = 8589934592;\n  var RO_THRESH = 4294967296;\n  var TYPE_SHARED = 'shared';\n\n  var handleRollover = function handleRollover(value, reference) {\n    var direction = 1;\n\n    if (value > reference) {\n      // If the current timestamp value is greater than our reference timestamp and we detect a\n      // timestamp rollover, this means the roll over is happening in the opposite direction.\n      // Example scenario: Enter a long stream/video just after a rollover occurred. The reference\n      // point will be set to a small number, e.g. 1. The user then seeks backwards over the\n      // rollover point. In loading this segment, the timestamp values will be very large,\n      // e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust\n      // the time stamp to be `value - 2^33`.\n      direction = -1;\n    } // Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will\n    // cause an incorrect adjustment.\n\n\n    while (Math.abs(reference - value) > RO_THRESH) {\n      value += direction * MAX_TS;\n    }\n\n    return value;\n  };\n\n  var TimestampRolloverStream$1 = function TimestampRolloverStream(type) {\n    var lastDTS, referenceDTS;\n    TimestampRolloverStream.prototype.init.call(this); // The \"shared\" type is used in cases where a stream will contain muxed\n    // video and audio. We could use `undefined` here, but having a string\n    // makes debugging a little clearer.\n\n    this.type_ = type || TYPE_SHARED;\n\n    this.push = function (data) {\n      // Any \"shared\" rollover streams will accept _all_ data. Otherwise,\n      // streams will only accept data that matches their type.\n      if (this.type_ !== TYPE_SHARED && data.type !== this.type_) {\n        return;\n      }\n\n      if (referenceDTS === undefined) {\n        referenceDTS = data.dts;\n      }\n\n      data.dts = handleRollover(data.dts, referenceDTS);\n      data.pts = handleRollover(data.pts, referenceDTS);\n      lastDTS = data.dts;\n      this.trigger('data', data);\n    };\n\n    this.flush = function () {\n      referenceDTS = lastDTS;\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n\n    this.discontinuity = function () {\n      referenceDTS = void 0;\n      lastDTS = void 0;\n    };\n\n    this.reset = function () {\n      this.discontinuity();\n      this.trigger('reset');\n    };\n  };\n\n  TimestampRolloverStream$1.prototype = new stream();\n  var timestampRolloverStream = {\n    TimestampRolloverStream: TimestampRolloverStream$1,\n    handleRollover: handleRollover\n  };\n\n  var _MetadataStream;\n\n  _MetadataStream = function MetadataStream(options) {\n    var settings = {\n      // the bytes of the program-level descriptor field in MP2T\n      // see ISO/IEC 13818-1:2013 (E), section 2.6 \"Program and\n      // program element descriptors\"\n      descriptor: options && options.descriptor\n    },\n        // the total size in bytes of the ID3 tag being parsed\n    tagSize = 0,\n        // tag data that is not complete enough to be parsed\n    buffer = [],\n        // the total number of bytes currently in the buffer\n    bufferSize = 0,\n        i;\n\n    _MetadataStream.prototype.init.call(this); // calculate the text track in-band metadata track dispatch type\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track\n\n\n    this.dispatchType = streamTypes.METADATA_STREAM_TYPE.toString(16);\n\n    if (settings.descriptor) {\n      for (i = 0; i < settings.descriptor.length; i++) {\n        this.dispatchType += ('00' + settings.descriptor[i].toString(16)).slice(-2);\n      }\n    }\n\n    this.push = function (chunk) {\n      var tag, frameStart, frameSize, frame, i, frameHeader;\n\n      if (chunk.type !== 'timed-metadata') {\n        return;\n      } // if data_alignment_indicator is set in the PES header,\n      // we must have the start of a new ID3 tag. Assume anything\n      // remaining in the buffer was malformed and throw it out\n\n\n      if (chunk.dataAlignmentIndicator) {\n        bufferSize = 0;\n        buffer.length = 0;\n      } // ignore events that don't look like ID3 data\n\n\n      if (buffer.length === 0 && (chunk.data.length < 10 || chunk.data[0] !== 'I'.charCodeAt(0) || chunk.data[1] !== 'D'.charCodeAt(0) || chunk.data[2] !== '3'.charCodeAt(0))) {\n        this.trigger('log', {\n          level: 'warn',\n          message: 'Skipping unrecognized metadata packet'\n        });\n        return;\n      } // add this chunk to the data we've collected so far\n\n\n      buffer.push(chunk);\n      bufferSize += chunk.data.byteLength; // grab the size of the entire frame from the ID3 header\n\n      if (buffer.length === 1) {\n        // the frame size is transmitted as a 28-bit integer in the\n        // last four bytes of the ID3 header.\n        // The most significant bit of each byte is dropped and the\n        // results concatenated to recover the actual value.\n        tagSize = parseId3.parseSyncSafeInteger(chunk.data.subarray(6, 10)); // ID3 reports the tag size excluding the header but it's more\n        // convenient for our comparisons to include it\n\n        tagSize += 10;\n      } // if the entire frame has not arrived, wait for more data\n\n\n      if (bufferSize < tagSize) {\n        return;\n      } // collect the entire frame so it can be parsed\n\n\n      tag = {\n        data: new Uint8Array(tagSize),\n        frames: [],\n        pts: buffer[0].pts,\n        dts: buffer[0].dts\n      };\n\n      for (i = 0; i < tagSize;) {\n        tag.data.set(buffer[0].data.subarray(0, tagSize - i), i);\n        i += buffer[0].data.byteLength;\n        bufferSize -= buffer[0].data.byteLength;\n        buffer.shift();\n      } // find the start of the first frame and the end of the tag\n\n\n      frameStart = 10;\n\n      if (tag.data[5] & 0x40) {\n        // advance the frame start past the extended header\n        frameStart += 4; // header size field\n\n        frameStart += parseId3.parseSyncSafeInteger(tag.data.subarray(10, 14)); // clip any padding off the end\n\n        tagSize -= parseId3.parseSyncSafeInteger(tag.data.subarray(16, 20));\n      } // parse one or more ID3 frames\n      // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n      do {\n        // determine the number of bytes in this frame\n        frameSize = parseId3.parseSyncSafeInteger(tag.data.subarray(frameStart + 4, frameStart + 8));\n\n        if (frameSize < 1) {\n          this.trigger('log', {\n            level: 'warn',\n            message: 'Malformed ID3 frame encountered. Skipping remaining metadata parsing.'\n          }); // If the frame is malformed, don't parse any further frames but allow previous valid parsed frames\n          // to be sent along.\n\n          break;\n        }\n\n        frameHeader = String.fromCharCode(tag.data[frameStart], tag.data[frameStart + 1], tag.data[frameStart + 2], tag.data[frameStart + 3]);\n        frame = {\n          id: frameHeader,\n          data: tag.data.subarray(frameStart + 10, frameStart + frameSize + 10)\n        };\n        frame.key = frame.id; // parse frame values\n\n        if (parseId3.frameParsers[frame.id]) {\n          // use frame specific parser\n          parseId3.frameParsers[frame.id](frame);\n        } else if (frame.id[0] === 'T') {\n          // use text frame generic parser\n          parseId3.frameParsers['T*'](frame);\n        } else if (frame.id[0] === 'W') {\n          // use URL link frame generic parser\n          parseId3.frameParsers['W*'](frame);\n        } // handle the special PRIV frame used to indicate the start\n        // time for raw AAC data\n\n\n        if (frame.owner === 'com.apple.streaming.transportStreamTimestamp') {\n          var d = frame.data,\n              size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n          size *= 4;\n          size += d[7] & 0x03;\n          frame.timeStamp = size; // in raw AAC, all subsequent data will be timestamped based\n          // on the value of this frame\n          // we couldn't have known the appropriate pts and dts before\n          // parsing this ID3 tag so set those values now\n\n          if (tag.pts === undefined && tag.dts === undefined) {\n            tag.pts = frame.timeStamp;\n            tag.dts = frame.timeStamp;\n          }\n\n          this.trigger('timestamp', frame);\n        }\n\n        tag.frames.push(frame);\n        frameStart += 10; // advance past the frame header\n\n        frameStart += frameSize; // advance past the frame body\n      } while (frameStart < tagSize);\n\n      this.trigger('data', tag);\n    };\n  };\n\n  _MetadataStream.prototype = new stream();\n  var metadataStream = _MetadataStream;\n\n  var TimestampRolloverStream = timestampRolloverStream.TimestampRolloverStream; // object types\n\n  var _TransportPacketStream, _TransportParseStream, _ElementaryStream; // constants\n\n\n  var MP2T_PACKET_LENGTH = 188,\n      // bytes\n  SYNC_BYTE = 0x47;\n  /**\n   * Splits an incoming stream of binary data into MPEG-2 Transport\n   * Stream packets.\n   */\n\n  _TransportPacketStream = function TransportPacketStream() {\n    var buffer = new Uint8Array(MP2T_PACKET_LENGTH),\n        bytesInBuffer = 0;\n\n    _TransportPacketStream.prototype.init.call(this); // Deliver new bytes to the stream.\n\n    /**\n     * Split a stream of data into M2TS packets\n    **/\n\n\n    this.push = function (bytes) {\n      var startIndex = 0,\n          endIndex = MP2T_PACKET_LENGTH,\n          everything; // If there are bytes remaining from the last segment, prepend them to the\n      // bytes that were pushed in\n\n      if (bytesInBuffer) {\n        everything = new Uint8Array(bytes.byteLength + bytesInBuffer);\n        everything.set(buffer.subarray(0, bytesInBuffer));\n        everything.set(bytes, bytesInBuffer);\n        bytesInBuffer = 0;\n      } else {\n        everything = bytes;\n      } // While we have enough data for a packet\n\n\n      while (endIndex < everything.byteLength) {\n        // Look for a pair of start and end sync bytes in the data..\n        if (everything[startIndex] === SYNC_BYTE && everything[endIndex] === SYNC_BYTE) {\n          // We found a packet so emit it and jump one whole packet forward in\n          // the stream\n          this.trigger('data', everything.subarray(startIndex, endIndex));\n          startIndex += MP2T_PACKET_LENGTH;\n          endIndex += MP2T_PACKET_LENGTH;\n          continue;\n        } // If we get here, we have somehow become de-synchronized and we need to step\n        // forward one byte at a time until we find a pair of sync bytes that denote\n        // a packet\n\n\n        startIndex++;\n        endIndex++;\n      } // If there was some data left over at the end of the segment that couldn't\n      // possibly be a whole packet, keep it because it might be the start of a packet\n      // that continues in the next segment\n\n\n      if (startIndex < everything.byteLength) {\n        buffer.set(everything.subarray(startIndex), 0);\n        bytesInBuffer = everything.byteLength - startIndex;\n      }\n    };\n    /**\n     * Passes identified M2TS packets to the TransportParseStream to be parsed\n    **/\n\n\n    this.flush = function () {\n      // If the buffer contains a whole packet when we are being flushed, emit it\n      // and empty the buffer. Otherwise hold onto the data because it may be\n      // important for decoding the next segment\n      if (bytesInBuffer === MP2T_PACKET_LENGTH && buffer[0] === SYNC_BYTE) {\n        this.trigger('data', buffer);\n        bytesInBuffer = 0;\n      }\n\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n\n    this.reset = function () {\n      bytesInBuffer = 0;\n      this.trigger('reset');\n    };\n  };\n\n  _TransportPacketStream.prototype = new stream();\n  /**\n   * Accepts an MP2T TransportPacketStream and emits data events with parsed\n   * forms of the individual transport stream packets.\n   */\n\n  _TransportParseStream = function TransportParseStream() {\n    var parsePsi, parsePat, parsePmt, self;\n\n    _TransportParseStream.prototype.init.call(this);\n\n    self = this;\n    this.packetsWaitingForPmt = [];\n    this.programMapTable = undefined;\n\n    parsePsi = function parsePsi(payload, psi) {\n      var offset = 0; // PSI packets may be split into multiple sections and those\n      // sections may be split into multiple packets. If a PSI\n      // section starts in this packet, the payload_unit_start_indicator\n      // will be true and the first byte of the payload will indicate\n      // the offset from the current position to the start of the\n      // section.\n\n      if (psi.payloadUnitStartIndicator) {\n        offset += payload[offset] + 1;\n      }\n\n      if (psi.type === 'pat') {\n        parsePat(payload.subarray(offset), psi);\n      } else {\n        parsePmt(payload.subarray(offset), psi);\n      }\n    };\n\n    parsePat = function parsePat(payload, pat) {\n      pat.section_number = payload[7]; // eslint-disable-line camelcase\n\n      pat.last_section_number = payload[8]; // eslint-disable-line camelcase\n      // skip the PSI header and parse the first PMT entry\n\n      self.pmtPid = (payload[10] & 0x1F) << 8 | payload[11];\n      pat.pmtPid = self.pmtPid;\n    };\n    /**\n     * Parse out the relevant fields of a Program Map Table (PMT).\n     * @param payload {Uint8Array} the PMT-specific portion of an MP2T\n     * packet. The first byte in this array should be the table_id\n     * field.\n     * @param pmt {object} the object that should be decorated with\n     * fields parsed from the PMT.\n     */\n\n\n    parsePmt = function parsePmt(payload, pmt) {\n      var sectionLength, tableEnd, programInfoLength, offset; // PMTs can be sent ahead of the time when they should actually\n      // take effect. We don't believe this should ever be the case\n      // for HLS but we'll ignore \"forward\" PMT declarations if we see\n      // them. Future PMT declarations have the current_next_indicator\n      // set to zero.\n\n      if (!(payload[5] & 0x01)) {\n        return;\n      } // overwrite any existing program map table\n\n\n      self.programMapTable = {\n        video: null,\n        audio: null,\n        'timed-metadata': {}\n      }; // the mapping table ends at the end of the current section\n\n      sectionLength = (payload[1] & 0x0f) << 8 | payload[2];\n      tableEnd = 3 + sectionLength - 4; // to determine where the table is, we have to figure out how\n      // long the program info descriptors are\n\n      programInfoLength = (payload[10] & 0x0f) << 8 | payload[11]; // advance the offset to the first entry in the mapping table\n\n      offset = 12 + programInfoLength;\n\n      while (offset < tableEnd) {\n        var streamType = payload[offset];\n        var pid = (payload[offset + 1] & 0x1F) << 8 | payload[offset + 2]; // only map a single elementary_pid for audio and video stream types\n        // TODO: should this be done for metadata too? for now maintain behavior of\n        //       multiple metadata streams\n\n        if (streamType === streamTypes.H264_STREAM_TYPE && self.programMapTable.video === null) {\n          self.programMapTable.video = pid;\n        } else if (streamType === streamTypes.ADTS_STREAM_TYPE && self.programMapTable.audio === null) {\n          self.programMapTable.audio = pid;\n        } else if (streamType === streamTypes.METADATA_STREAM_TYPE) {\n          // map pid to stream type for metadata streams\n          self.programMapTable['timed-metadata'][pid] = streamType;\n        } // move to the next table entry\n        // skip past the elementary stream descriptors, if present\n\n\n        offset += ((payload[offset + 3] & 0x0F) << 8 | payload[offset + 4]) + 5;\n      } // record the map on the packet as well\n\n\n      pmt.programMapTable = self.programMapTable;\n    };\n    /**\n     * Deliver a new MP2T packet to the next stream in the pipeline.\n     */\n\n\n    this.push = function (packet) {\n      var result = {},\n          offset = 4;\n      result.payloadUnitStartIndicator = !!(packet[1] & 0x40); // pid is a 13-bit field starting at the last bit of packet[1]\n\n      result.pid = packet[1] & 0x1f;\n      result.pid <<= 8;\n      result.pid |= packet[2]; // if an adaption field is present, its length is specified by the\n      // fifth byte of the TS packet header. The adaptation field is\n      // used to add stuffing to PES packets that don't fill a complete\n      // TS packet, and to specify some forms of timing and control data\n      // that we do not currently use.\n\n      if ((packet[3] & 0x30) >>> 4 > 0x01) {\n        offset += packet[offset] + 1;\n      } // parse the rest of the packet based on the type\n\n\n      if (result.pid === 0) {\n        result.type = 'pat';\n        parsePsi(packet.subarray(offset), result);\n        this.trigger('data', result);\n      } else if (result.pid === this.pmtPid) {\n        result.type = 'pmt';\n        parsePsi(packet.subarray(offset), result);\n        this.trigger('data', result); // if there are any packets waiting for a PMT to be found, process them now\n\n        while (this.packetsWaitingForPmt.length) {\n          this.processPes_.apply(this, this.packetsWaitingForPmt.shift());\n        }\n      } else if (this.programMapTable === undefined) {\n        // When we have not seen a PMT yet, defer further processing of\n        // PES packets until one has been parsed\n        this.packetsWaitingForPmt.push([packet, offset, result]);\n      } else {\n        this.processPes_(packet, offset, result);\n      }\n    };\n\n    this.processPes_ = function (packet, offset, result) {\n      // set the appropriate stream type\n      if (result.pid === this.programMapTable.video) {\n        result.streamType = streamTypes.H264_STREAM_TYPE;\n      } else if (result.pid === this.programMapTable.audio) {\n        result.streamType = streamTypes.ADTS_STREAM_TYPE;\n      } else {\n        // if not video or audio, it is timed-metadata or unknown\n        // if unknown, streamType will be undefined\n        result.streamType = this.programMapTable['timed-metadata'][result.pid];\n      }\n\n      result.type = 'pes';\n      result.data = packet.subarray(offset);\n      this.trigger('data', result);\n    };\n  };\n\n  _TransportParseStream.prototype = new stream();\n  _TransportParseStream.STREAM_TYPES = {\n    h264: 0x1b,\n    adts: 0x0f\n  };\n  /**\n   * Reconsistutes program elementary stream (PES) packets from parsed\n   * transport stream packets. That is, if you pipe an\n   * mp2t.TransportParseStream into a mp2t.ElementaryStream, the output\n   * events will be events which capture the bytes for individual PES\n   * packets plus relevant metadata that has been extracted from the\n   * container.\n   */\n\n  _ElementaryStream = function ElementaryStream() {\n    var self = this,\n        segmentHadPmt = false,\n        // PES packet fragments\n    video = {\n      data: [],\n      size: 0\n    },\n        audio = {\n      data: [],\n      size: 0\n    },\n        timedMetadata = {\n      data: [],\n      size: 0\n    },\n        programMapTable,\n        parsePes = function parsePes(payload, pes) {\n      var ptsDtsFlags;\n      var startPrefix = payload[0] << 16 | payload[1] << 8 | payload[2]; // default to an empty array\n\n      pes.data = new Uint8Array(); // In certain live streams, the start of a TS fragment has ts packets\n      // that are frame data that is continuing from the previous fragment. This\n      // is to check that the pes data is the start of a new pes payload\n\n      if (startPrefix !== 1) {\n        return;\n      } // get the packet length, this will be 0 for video\n\n\n      pes.packetLength = 6 + (payload[4] << 8 | payload[5]); // find out if this packets starts a new keyframe\n\n      pes.dataAlignmentIndicator = (payload[6] & 0x04) !== 0; // PES packets may be annotated with a PTS value, or a PTS value\n      // and a DTS value. Determine what combination of values is\n      // available to work with.\n\n      ptsDtsFlags = payload[7]; // PTS and DTS are normally stored as a 33-bit number.  Javascript\n      // performs all bitwise operations on 32-bit integers but javascript\n      // supports a much greater range (52-bits) of integer using standard\n      // mathematical operations.\n      // We construct a 31-bit value using bitwise operators over the 31\n      // most significant bits and then multiply by 4 (equal to a left-shift\n      // of 2) before we add the final 2 least significant bits of the\n      // timestamp (equal to an OR.)\n\n      if (ptsDtsFlags & 0xC0) {\n        // the PTS and DTS are not written out directly. For information\n        // on how they are encoded, see\n        // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n        pes.pts = (payload[9] & 0x0E) << 27 | (payload[10] & 0xFF) << 20 | (payload[11] & 0xFE) << 12 | (payload[12] & 0xFF) << 5 | (payload[13] & 0xFE) >>> 3;\n        pes.pts *= 4; // Left shift by 2\n\n        pes.pts += (payload[13] & 0x06) >>> 1; // OR by the two LSBs\n\n        pes.dts = pes.pts;\n\n        if (ptsDtsFlags & 0x40) {\n          pes.dts = (payload[14] & 0x0E) << 27 | (payload[15] & 0xFF) << 20 | (payload[16] & 0xFE) << 12 | (payload[17] & 0xFF) << 5 | (payload[18] & 0xFE) >>> 3;\n          pes.dts *= 4; // Left shift by 2\n\n          pes.dts += (payload[18] & 0x06) >>> 1; // OR by the two LSBs\n        }\n      } // the data section starts immediately after the PES header.\n      // pes_header_data_length specifies the number of header bytes\n      // that follow the last byte of the field.\n\n\n      pes.data = payload.subarray(9 + payload[8]);\n    },\n\n    /**\n      * Pass completely parsed PES packets to the next stream in the pipeline\n     **/\n    flushStream = function flushStream(stream, type, forceFlush) {\n      var packetData = new Uint8Array(stream.size),\n          event = {\n        type: type\n      },\n          i = 0,\n          offset = 0,\n          packetFlushable = false,\n          fragment; // do nothing if there is not enough buffered data for a complete\n      // PES header\n\n      if (!stream.data.length || stream.size < 9) {\n        return;\n      }\n\n      event.trackId = stream.data[0].pid; // reassemble the packet\n\n      for (i = 0; i < stream.data.length; i++) {\n        fragment = stream.data[i];\n        packetData.set(fragment.data, offset);\n        offset += fragment.data.byteLength;\n      } // parse assembled packet's PES header\n\n\n      parsePes(packetData, event); // non-video PES packets MUST have a non-zero PES_packet_length\n      // check that there is enough stream data to fill the packet\n\n      packetFlushable = type === 'video' || event.packetLength <= stream.size; // flush pending packets if the conditions are right\n\n      if (forceFlush || packetFlushable) {\n        stream.size = 0;\n        stream.data.length = 0;\n      } // only emit packets that are complete. this is to avoid assembling\n      // incomplete PES packets due to poor segmentation\n\n\n      if (packetFlushable) {\n        self.trigger('data', event);\n      }\n    };\n\n    _ElementaryStream.prototype.init.call(this);\n    /**\n     * Identifies M2TS packet types and parses PES packets using metadata\n     * parsed from the PMT\n     **/\n\n\n    this.push = function (data) {\n      ({\n        pat: function pat() {// we have to wait for the PMT to arrive as well before we\n          // have any meaningful metadata\n        },\n        pes: function pes() {\n          var stream, streamType;\n\n          switch (data.streamType) {\n            case streamTypes.H264_STREAM_TYPE:\n              stream = video;\n              streamType = 'video';\n              break;\n\n            case streamTypes.ADTS_STREAM_TYPE:\n              stream = audio;\n              streamType = 'audio';\n              break;\n\n            case streamTypes.METADATA_STREAM_TYPE:\n              stream = timedMetadata;\n              streamType = 'timed-metadata';\n              break;\n\n            default:\n              // ignore unknown stream types\n              return;\n          } // if a new packet is starting, we can flush the completed\n          // packet\n\n\n          if (data.payloadUnitStartIndicator) {\n            flushStream(stream, streamType, true);\n          } // buffer this fragment until we are sure we've received the\n          // complete payload\n\n\n          stream.data.push(data);\n          stream.size += data.data.byteLength;\n        },\n        pmt: function pmt() {\n          var event = {\n            type: 'metadata',\n            tracks: []\n          };\n          programMapTable = data.programMapTable; // translate audio and video streams to tracks\n\n          if (programMapTable.video !== null) {\n            event.tracks.push({\n              timelineStartInfo: {\n                baseMediaDecodeTime: 0\n              },\n              id: +programMapTable.video,\n              codec: 'avc',\n              type: 'video'\n            });\n          }\n\n          if (programMapTable.audio !== null) {\n            event.tracks.push({\n              timelineStartInfo: {\n                baseMediaDecodeTime: 0\n              },\n              id: +programMapTable.audio,\n              codec: 'adts',\n              type: 'audio'\n            });\n          }\n\n          segmentHadPmt = true;\n          self.trigger('data', event);\n        }\n      })[data.type]();\n    };\n\n    this.reset = function () {\n      video.size = 0;\n      video.data.length = 0;\n      audio.size = 0;\n      audio.data.length = 0;\n      this.trigger('reset');\n    };\n    /**\n     * Flush any remaining input. Video PES packets may be of variable\n     * length. Normally, the start of a new video packet can trigger the\n     * finalization of the previous packet. That is not possible if no\n     * more video is forthcoming, however. In that case, some other\n     * mechanism (like the end of the file) has to be employed. When it is\n     * clear that no additional data is forthcoming, calling this method\n     * will flush the buffered packets.\n     */\n\n\n    this.flushStreams_ = function () {\n      // !!THIS ORDER IS IMPORTANT!!\n      // video first then audio\n      flushStream(video, 'video');\n      flushStream(audio, 'audio');\n      flushStream(timedMetadata, 'timed-metadata');\n    };\n\n    this.flush = function () {\n      // if on flush we haven't had a pmt emitted\n      // and we have a pmt to emit. emit the pmt\n      // so that we trigger a trackinfo downstream.\n      if (!segmentHadPmt && programMapTable) {\n        var pmt = {\n          type: 'metadata',\n          tracks: []\n        }; // translate audio and video streams to tracks\n\n        if (programMapTable.video !== null) {\n          pmt.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.video,\n            codec: 'avc',\n            type: 'video'\n          });\n        }\n\n        if (programMapTable.audio !== null) {\n          pmt.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.audio,\n            codec: 'adts',\n            type: 'audio'\n          });\n        }\n\n        self.trigger('data', pmt);\n      }\n\n      segmentHadPmt = false;\n      this.flushStreams_();\n      this.trigger('done');\n    };\n  };\n\n  _ElementaryStream.prototype = new stream();\n  var m2ts = {\n    PAT_PID: 0x0000,\n    MP2T_PACKET_LENGTH: MP2T_PACKET_LENGTH,\n    TransportPacketStream: _TransportPacketStream,\n    TransportParseStream: _TransportParseStream,\n    ElementaryStream: _ElementaryStream,\n    TimestampRolloverStream: TimestampRolloverStream,\n    CaptionStream: captionStream.CaptionStream,\n    Cea608Stream: captionStream.Cea608Stream,\n    Cea708Stream: captionStream.Cea708Stream,\n    MetadataStream: metadataStream\n  };\n\n  for (var type in streamTypes) {\n    if (streamTypes.hasOwnProperty(type)) {\n      m2ts[type] = streamTypes[type];\n    }\n  }\n\n  var m2ts_1 = m2ts;\n\n  var ONE_SECOND_IN_TS$1 = clock.ONE_SECOND_IN_TS;\n\n  var _AdtsStream;\n\n  var ADTS_SAMPLING_FREQUENCIES$1 = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n  /*\n   * Accepts a ElementaryStream and emits data events with parsed\n   * AAC Audio Frames of the individual packets. Input audio in ADTS\n   * format is unpacked and re-emitted as AAC frames.\n   *\n   * @see http://wiki.multimedia.cx/index.php?title=ADTS\n   * @see http://wiki.multimedia.cx/?title=Understanding_AAC\n   */\n\n  _AdtsStream = function AdtsStream(handlePartialSegments) {\n    var buffer,\n        frameNum = 0;\n\n    _AdtsStream.prototype.init.call(this);\n\n    this.skipWarn_ = function (start, end) {\n      this.trigger('log', {\n        level: 'warn',\n        message: \"adts skiping bytes \" + start + \" to \" + end + \" in frame \" + frameNum + \" outside syncword\"\n      });\n    };\n\n    this.push = function (packet) {\n      var i = 0,\n          frameLength,\n          protectionSkipBytes,\n          oldBuffer,\n          sampleCount,\n          adtsFrameDuration;\n\n      if (!handlePartialSegments) {\n        frameNum = 0;\n      }\n\n      if (packet.type !== 'audio') {\n        // ignore non-audio data\n        return;\n      } // Prepend any data in the buffer to the input data so that we can parse\n      // aac frames the cross a PES packet boundary\n\n\n      if (buffer && buffer.length) {\n        oldBuffer = buffer;\n        buffer = new Uint8Array(oldBuffer.byteLength + packet.data.byteLength);\n        buffer.set(oldBuffer);\n        buffer.set(packet.data, oldBuffer.byteLength);\n      } else {\n        buffer = packet.data;\n      } // unpack any ADTS frames which have been fully received\n      // for details on the ADTS header, see http://wiki.multimedia.cx/index.php?title=ADTS\n\n\n      var skip; // We use i + 7 here because we want to be able to parse the entire header.\n      // If we don't have enough bytes to do that, then we definitely won't have a full frame.\n\n      while (i + 7 < buffer.length) {\n        // Look for the start of an ADTS header..\n        if (buffer[i] !== 0xFF || (buffer[i + 1] & 0xF6) !== 0xF0) {\n          if (typeof skip !== 'number') {\n            skip = i;\n          } // If a valid header was not found,  jump one forward and attempt to\n          // find a valid ADTS header starting at the next byte\n\n\n          i++;\n          continue;\n        }\n\n        if (typeof skip === 'number') {\n          this.skipWarn_(skip, i);\n          skip = null;\n        } // The protection skip bit tells us if we have 2 bytes of CRC data at the\n        // end of the ADTS header\n\n\n        protectionSkipBytes = (~buffer[i + 1] & 0x01) * 2; // Frame length is a 13 bit integer starting 16 bits from the\n        // end of the sync sequence\n        // NOTE: frame length includes the size of the header\n\n        frameLength = (buffer[i + 3] & 0x03) << 11 | buffer[i + 4] << 3 | (buffer[i + 5] & 0xe0) >> 5;\n        sampleCount = ((buffer[i + 6] & 0x03) + 1) * 1024;\n        adtsFrameDuration = sampleCount * ONE_SECOND_IN_TS$1 / ADTS_SAMPLING_FREQUENCIES$1[(buffer[i + 2] & 0x3c) >>> 2]; // If we don't have enough data to actually finish this ADTS frame,\n        // then we have to wait for more data\n\n        if (buffer.byteLength - i < frameLength) {\n          break;\n        } // Otherwise, deliver the complete AAC frame\n\n\n        this.trigger('data', {\n          pts: packet.pts + frameNum * adtsFrameDuration,\n          dts: packet.dts + frameNum * adtsFrameDuration,\n          sampleCount: sampleCount,\n          audioobjecttype: (buffer[i + 2] >>> 6 & 0x03) + 1,\n          channelcount: (buffer[i + 2] & 1) << 2 | (buffer[i + 3] & 0xc0) >>> 6,\n          samplerate: ADTS_SAMPLING_FREQUENCIES$1[(buffer[i + 2] & 0x3c) >>> 2],\n          samplingfrequencyindex: (buffer[i + 2] & 0x3c) >>> 2,\n          // assume ISO/IEC 14496-12 AudioSampleEntry default of 16\n          samplesize: 16,\n          // data is the frame without it's header\n          data: buffer.subarray(i + 7 + protectionSkipBytes, i + frameLength)\n        });\n        frameNum++;\n        i += frameLength;\n      }\n\n      if (typeof skip === 'number') {\n        this.skipWarn_(skip, i);\n        skip = null;\n      } // remove processed bytes from the buffer.\n\n\n      buffer = buffer.subarray(i);\n    };\n\n    this.flush = function () {\n      frameNum = 0;\n      this.trigger('done');\n    };\n\n    this.reset = function () {\n      buffer = void 0;\n      this.trigger('reset');\n    };\n\n    this.endTimeline = function () {\n      buffer = void 0;\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _AdtsStream.prototype = new stream();\n  var adts = _AdtsStream;\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var ExpGolomb;\n  /**\n   * Parser for exponential Golomb codes, a variable-bitwidth number encoding\n   * scheme used by h264.\n   */\n\n  ExpGolomb = function ExpGolomb(workingData) {\n    var // the number of bytes left to examine in workingData\n    workingBytesAvailable = workingData.byteLength,\n        // the current word being examined\n    workingWord = 0,\n        // :uint\n    // the number of bits left to examine in the current word\n    workingBitsAvailable = 0; // :uint;\n    // ():uint\n\n    this.length = function () {\n      return 8 * workingBytesAvailable;\n    }; // ():uint\n\n\n    this.bitsAvailable = function () {\n      return 8 * workingBytesAvailable + workingBitsAvailable;\n    }; // ():void\n\n\n    this.loadWord = function () {\n      var position = workingData.byteLength - workingBytesAvailable,\n          workingBytes = new Uint8Array(4),\n          availableBytes = Math.min(4, workingBytesAvailable);\n\n      if (availableBytes === 0) {\n        throw new Error('no bytes available');\n      }\n\n      workingBytes.set(workingData.subarray(position, position + availableBytes));\n      workingWord = new DataView(workingBytes.buffer).getUint32(0); // track the amount of workingData that has been processed\n\n      workingBitsAvailable = availableBytes * 8;\n      workingBytesAvailable -= availableBytes;\n    }; // (count:int):void\n\n\n    this.skipBits = function (count) {\n      var skipBytes; // :int\n\n      if (workingBitsAvailable > count) {\n        workingWord <<= count;\n        workingBitsAvailable -= count;\n      } else {\n        count -= workingBitsAvailable;\n        skipBytes = Math.floor(count / 8);\n        count -= skipBytes * 8;\n        workingBytesAvailable -= skipBytes;\n        this.loadWord();\n        workingWord <<= count;\n        workingBitsAvailable -= count;\n      }\n    }; // (size:int):uint\n\n\n    this.readBits = function (size) {\n      var bits = Math.min(workingBitsAvailable, size),\n          // :uint\n      valu = workingWord >>> 32 - bits; // :uint\n      // if size > 31, handle error\n\n      workingBitsAvailable -= bits;\n\n      if (workingBitsAvailable > 0) {\n        workingWord <<= bits;\n      } else if (workingBytesAvailable > 0) {\n        this.loadWord();\n      }\n\n      bits = size - bits;\n\n      if (bits > 0) {\n        return valu << bits | this.readBits(bits);\n      }\n\n      return valu;\n    }; // ():uint\n\n\n    this.skipLeadingZeros = function () {\n      var leadingZeroCount; // :uint\n\n      for (leadingZeroCount = 0; leadingZeroCount < workingBitsAvailable; ++leadingZeroCount) {\n        if ((workingWord & 0x80000000 >>> leadingZeroCount) !== 0) {\n          // the first bit of working word is 1\n          workingWord <<= leadingZeroCount;\n          workingBitsAvailable -= leadingZeroCount;\n          return leadingZeroCount;\n        }\n      } // we exhausted workingWord and still have not found a 1\n\n\n      this.loadWord();\n      return leadingZeroCount + this.skipLeadingZeros();\n    }; // ():void\n\n\n    this.skipUnsignedExpGolomb = function () {\n      this.skipBits(1 + this.skipLeadingZeros());\n    }; // ():void\n\n\n    this.skipExpGolomb = function () {\n      this.skipBits(1 + this.skipLeadingZeros());\n    }; // ():uint\n\n\n    this.readUnsignedExpGolomb = function () {\n      var clz = this.skipLeadingZeros(); // :uint\n\n      return this.readBits(clz + 1) - 1;\n    }; // ():int\n\n\n    this.readExpGolomb = function () {\n      var valu = this.readUnsignedExpGolomb(); // :int\n\n      if (0x01 & valu) {\n        // the number is odd if the low order bit is set\n        return 1 + valu >>> 1; // add 1 to make it even, and divide by 2\n      }\n\n      return -1 * (valu >>> 1); // divide by two then make it negative\n    }; // Some convenience functions\n    // :Boolean\n\n\n    this.readBoolean = function () {\n      return this.readBits(1) === 1;\n    }; // ():int\n\n\n    this.readUnsignedByte = function () {\n      return this.readBits(8);\n    };\n\n    this.loadWord();\n  };\n\n  var expGolomb = ExpGolomb;\n\n  var _H264Stream, _NalByteStream;\n\n  var PROFILES_WITH_OPTIONAL_SPS_DATA;\n  /**\n   * Accepts a NAL unit byte stream and unpacks the embedded NAL units.\n   */\n\n  _NalByteStream = function NalByteStream() {\n    var syncPoint = 0,\n        i,\n        buffer;\n\n    _NalByteStream.prototype.init.call(this);\n    /*\n     * Scans a byte stream and triggers a data event with the NAL units found.\n     * @param {Object} data Event received from H264Stream\n     * @param {Uint8Array} data.data The h264 byte stream to be scanned\n     *\n     * @see H264Stream.push\n     */\n\n\n    this.push = function (data) {\n      var swapBuffer;\n\n      if (!buffer) {\n        buffer = data.data;\n      } else {\n        swapBuffer = new Uint8Array(buffer.byteLength + data.data.byteLength);\n        swapBuffer.set(buffer);\n        swapBuffer.set(data.data, buffer.byteLength);\n        buffer = swapBuffer;\n      }\n\n      var len = buffer.byteLength; // Rec. ITU-T H.264, Annex B\n      // scan for NAL unit boundaries\n      // a match looks like this:\n      // 0 0 1 .. NAL .. 0 0 1\n      // ^ sync point        ^ i\n      // or this:\n      // 0 0 1 .. NAL .. 0 0 0\n      // ^ sync point        ^ i\n      // advance the sync point to a NAL start, if necessary\n\n      for (; syncPoint < len - 3; syncPoint++) {\n        if (buffer[syncPoint + 2] === 1) {\n          // the sync point is properly aligned\n          i = syncPoint + 5;\n          break;\n        }\n      }\n\n      while (i < len) {\n        // look at the current byte to determine if we've hit the end of\n        // a NAL unit boundary\n        switch (buffer[i]) {\n          case 0:\n            // skip past non-sync sequences\n            if (buffer[i - 1] !== 0) {\n              i += 2;\n              break;\n            } else if (buffer[i - 2] !== 0) {\n              i++;\n              break;\n            } // deliver the NAL unit if it isn't empty\n\n\n            if (syncPoint + 3 !== i - 2) {\n              this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n            } // drop trailing zeroes\n\n\n            do {\n              i++;\n            } while (buffer[i] !== 1 && i < len);\n\n            syncPoint = i - 2;\n            i += 3;\n            break;\n\n          case 1:\n            // skip past non-sync sequences\n            if (buffer[i - 1] !== 0 || buffer[i - 2] !== 0) {\n              i += 3;\n              break;\n            } // deliver the NAL unit\n\n\n            this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n            syncPoint = i - 2;\n            i += 3;\n            break;\n\n          default:\n            // the current byte isn't a one or zero, so it cannot be part\n            // of a sync sequence\n            i += 3;\n            break;\n        }\n      } // filter out the NAL units that were delivered\n\n\n      buffer = buffer.subarray(syncPoint);\n      i -= syncPoint;\n      syncPoint = 0;\n    };\n\n    this.reset = function () {\n      buffer = null;\n      syncPoint = 0;\n      this.trigger('reset');\n    };\n\n    this.flush = function () {\n      // deliver the last buffered NAL unit\n      if (buffer && buffer.byteLength > 3) {\n        this.trigger('data', buffer.subarray(syncPoint + 3));\n      } // reset the stream state\n\n\n      buffer = null;\n      syncPoint = 0;\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _NalByteStream.prototype = new stream(); // values of profile_idc that indicate additional fields are included in the SPS\n  // see Recommendation ITU-T H.264 (4/2013),\n  // 7.3.2.1.1 Sequence parameter set data syntax\n\n  PROFILES_WITH_OPTIONAL_SPS_DATA = {\n    100: true,\n    110: true,\n    122: true,\n    244: true,\n    44: true,\n    83: true,\n    86: true,\n    118: true,\n    128: true,\n    // TODO: the three profiles below don't\n    // appear to have sps data in the specificiation anymore?\n    138: true,\n    139: true,\n    134: true\n  };\n  /**\n   * Accepts input from a ElementaryStream and produces H.264 NAL unit data\n   * events.\n   */\n\n  _H264Stream = function H264Stream() {\n    var nalByteStream = new _NalByteStream(),\n        self,\n        trackId,\n        currentPts,\n        currentDts,\n        discardEmulationPreventionBytes,\n        readSequenceParameterSet,\n        skipScalingList;\n\n    _H264Stream.prototype.init.call(this);\n\n    self = this;\n    /*\n     * Pushes a packet from a stream onto the NalByteStream\n     *\n     * @param {Object} packet - A packet received from a stream\n     * @param {Uint8Array} packet.data - The raw bytes of the packet\n     * @param {Number} packet.dts - Decode timestamp of the packet\n     * @param {Number} packet.pts - Presentation timestamp of the packet\n     * @param {Number} packet.trackId - The id of the h264 track this packet came from\n     * @param {('video'|'audio')} packet.type - The type of packet\n     *\n     */\n\n    this.push = function (packet) {\n      if (packet.type !== 'video') {\n        return;\n      }\n\n      trackId = packet.trackId;\n      currentPts = packet.pts;\n      currentDts = packet.dts;\n      nalByteStream.push(packet);\n    };\n    /*\n     * Identify NAL unit types and pass on the NALU, trackId, presentation and decode timestamps\n     * for the NALUs to the next stream component.\n     * Also, preprocess caption and sequence parameter NALUs.\n     *\n     * @param {Uint8Array} data - A NAL unit identified by `NalByteStream.push`\n     * @see NalByteStream.push\n     */\n\n\n    nalByteStream.on('data', function (data) {\n      var event = {\n        trackId: trackId,\n        pts: currentPts,\n        dts: currentDts,\n        data: data,\n        nalUnitTypeCode: data[0] & 0x1f\n      };\n\n      switch (event.nalUnitTypeCode) {\n        case 0x05:\n          event.nalUnitType = 'slice_layer_without_partitioning_rbsp_idr';\n          break;\n\n        case 0x06:\n          event.nalUnitType = 'sei_rbsp';\n          event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n          break;\n\n        case 0x07:\n          event.nalUnitType = 'seq_parameter_set_rbsp';\n          event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n          event.config = readSequenceParameterSet(event.escapedRBSP);\n          break;\n\n        case 0x08:\n          event.nalUnitType = 'pic_parameter_set_rbsp';\n          break;\n\n        case 0x09:\n          event.nalUnitType = 'access_unit_delimiter_rbsp';\n          break;\n      } // This triggers data on the H264Stream\n\n\n      self.trigger('data', event);\n    });\n    nalByteStream.on('done', function () {\n      self.trigger('done');\n    });\n    nalByteStream.on('partialdone', function () {\n      self.trigger('partialdone');\n    });\n    nalByteStream.on('reset', function () {\n      self.trigger('reset');\n    });\n    nalByteStream.on('endedtimeline', function () {\n      self.trigger('endedtimeline');\n    });\n\n    this.flush = function () {\n      nalByteStream.flush();\n    };\n\n    this.partialFlush = function () {\n      nalByteStream.partialFlush();\n    };\n\n    this.reset = function () {\n      nalByteStream.reset();\n    };\n\n    this.endTimeline = function () {\n      nalByteStream.endTimeline();\n    };\n    /**\n     * Advance the ExpGolomb decoder past a scaling list. The scaling\n     * list is optionally transmitted as part of a sequence parameter\n     * set and is not relevant to transmuxing.\n     * @param count {number} the number of entries in this scaling list\n     * @param expGolombDecoder {object} an ExpGolomb pointed to the\n     * start of a scaling list\n     * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n     */\n\n\n    skipScalingList = function skipScalingList(count, expGolombDecoder) {\n      var lastScale = 8,\n          nextScale = 8,\n          j,\n          deltaScale;\n\n      for (j = 0; j < count; j++) {\n        if (nextScale !== 0) {\n          deltaScale = expGolombDecoder.readExpGolomb();\n          nextScale = (lastScale + deltaScale + 256) % 256;\n        }\n\n        lastScale = nextScale === 0 ? lastScale : nextScale;\n      }\n    };\n    /**\n     * Expunge any \"Emulation Prevention\" bytes from a \"Raw Byte\n     * Sequence Payload\"\n     * @param data {Uint8Array} the bytes of a RBSP from a NAL\n     * unit\n     * @return {Uint8Array} the RBSP without any Emulation\n     * Prevention Bytes\n     */\n\n\n    discardEmulationPreventionBytes = function discardEmulationPreventionBytes(data) {\n      var length = data.byteLength,\n          emulationPreventionBytesPositions = [],\n          i = 1,\n          newLength,\n          newData; // Find all `Emulation Prevention Bytes`\n\n      while (i < length - 2) {\n        if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n          emulationPreventionBytesPositions.push(i + 2);\n          i += 2;\n        } else {\n          i++;\n        }\n      } // If no Emulation Prevention Bytes were found just return the original\n      // array\n\n\n      if (emulationPreventionBytesPositions.length === 0) {\n        return data;\n      } // Create a new array to hold the NAL unit data\n\n\n      newLength = length - emulationPreventionBytesPositions.length;\n      newData = new Uint8Array(newLength);\n      var sourceIndex = 0;\n\n      for (i = 0; i < newLength; sourceIndex++, i++) {\n        if (sourceIndex === emulationPreventionBytesPositions[0]) {\n          // Skip this byte\n          sourceIndex++; // Remove this position index\n\n          emulationPreventionBytesPositions.shift();\n        }\n\n        newData[i] = data[sourceIndex];\n      }\n\n      return newData;\n    };\n    /**\n     * Read a sequence parameter set and return some interesting video\n     * properties. A sequence parameter set is the H264 metadata that\n     * describes the properties of upcoming video frames.\n     * @param data {Uint8Array} the bytes of a sequence parameter set\n     * @return {object} an object with configuration parsed from the\n     * sequence parameter set, including the dimensions of the\n     * associated video frames.\n     */\n\n\n    readSequenceParameterSet = function readSequenceParameterSet(data) {\n      var frameCropLeftOffset = 0,\n          frameCropRightOffset = 0,\n          frameCropTopOffset = 0,\n          frameCropBottomOffset = 0,\n          expGolombDecoder,\n          profileIdc,\n          levelIdc,\n          profileCompatibility,\n          chromaFormatIdc,\n          picOrderCntType,\n          numRefFramesInPicOrderCntCycle,\n          picWidthInMbsMinus1,\n          picHeightInMapUnitsMinus1,\n          frameMbsOnlyFlag,\n          scalingListCount,\n          sarRatio = [1, 1],\n          aspectRatioIdc,\n          i;\n      expGolombDecoder = new expGolomb(data);\n      profileIdc = expGolombDecoder.readUnsignedByte(); // profile_idc\n\n      profileCompatibility = expGolombDecoder.readUnsignedByte(); // constraint_set[0-5]_flag\n\n      levelIdc = expGolombDecoder.readUnsignedByte(); // level_idc u(8)\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // seq_parameter_set_id\n      // some profiles have more optional data we don't need\n\n      if (PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]) {\n        chromaFormatIdc = expGolombDecoder.readUnsignedExpGolomb();\n\n        if (chromaFormatIdc === 3) {\n          expGolombDecoder.skipBits(1); // separate_colour_plane_flag\n        }\n\n        expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_luma_minus8\n\n        expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_chroma_minus8\n\n        expGolombDecoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\n\n        if (expGolombDecoder.readBoolean()) {\n          // seq_scaling_matrix_present_flag\n          scalingListCount = chromaFormatIdc !== 3 ? 8 : 12;\n\n          for (i = 0; i < scalingListCount; i++) {\n            if (expGolombDecoder.readBoolean()) {\n              // seq_scaling_list_present_flag[ i ]\n              if (i < 6) {\n                skipScalingList(16, expGolombDecoder);\n              } else {\n                skipScalingList(64, expGolombDecoder);\n              }\n            }\n          }\n        }\n      }\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // log2_max_frame_num_minus4\n\n      picOrderCntType = expGolombDecoder.readUnsignedExpGolomb();\n\n      if (picOrderCntType === 0) {\n        expGolombDecoder.readUnsignedExpGolomb(); // log2_max_pic_order_cnt_lsb_minus4\n      } else if (picOrderCntType === 1) {\n        expGolombDecoder.skipBits(1); // delta_pic_order_always_zero_flag\n\n        expGolombDecoder.skipExpGolomb(); // offset_for_non_ref_pic\n\n        expGolombDecoder.skipExpGolomb(); // offset_for_top_to_bottom_field\n\n        numRefFramesInPicOrderCntCycle = expGolombDecoder.readUnsignedExpGolomb();\n\n        for (i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n          expGolombDecoder.skipExpGolomb(); // offset_for_ref_frame[ i ]\n        }\n      }\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // max_num_ref_frames\n\n      expGolombDecoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\n\n      picWidthInMbsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n      picHeightInMapUnitsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n      frameMbsOnlyFlag = expGolombDecoder.readBits(1);\n\n      if (frameMbsOnlyFlag === 0) {\n        expGolombDecoder.skipBits(1); // mb_adaptive_frame_field_flag\n      }\n\n      expGolombDecoder.skipBits(1); // direct_8x8_inference_flag\n\n      if (expGolombDecoder.readBoolean()) {\n        // frame_cropping_flag\n        frameCropLeftOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropRightOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropTopOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropBottomOffset = expGolombDecoder.readUnsignedExpGolomb();\n      }\n\n      if (expGolombDecoder.readBoolean()) {\n        // vui_parameters_present_flag\n        if (expGolombDecoder.readBoolean()) {\n          // aspect_ratio_info_present_flag\n          aspectRatioIdc = expGolombDecoder.readUnsignedByte();\n\n          switch (aspectRatioIdc) {\n            case 1:\n              sarRatio = [1, 1];\n              break;\n\n            case 2:\n              sarRatio = [12, 11];\n              break;\n\n            case 3:\n              sarRatio = [10, 11];\n              break;\n\n            case 4:\n              sarRatio = [16, 11];\n              break;\n\n            case 5:\n              sarRatio = [40, 33];\n              break;\n\n            case 6:\n              sarRatio = [24, 11];\n              break;\n\n            case 7:\n              sarRatio = [20, 11];\n              break;\n\n            case 8:\n              sarRatio = [32, 11];\n              break;\n\n            case 9:\n              sarRatio = [80, 33];\n              break;\n\n            case 10:\n              sarRatio = [18, 11];\n              break;\n\n            case 11:\n              sarRatio = [15, 11];\n              break;\n\n            case 12:\n              sarRatio = [64, 33];\n              break;\n\n            case 13:\n              sarRatio = [160, 99];\n              break;\n\n            case 14:\n              sarRatio = [4, 3];\n              break;\n\n            case 15:\n              sarRatio = [3, 2];\n              break;\n\n            case 16:\n              sarRatio = [2, 1];\n              break;\n\n            case 255:\n              {\n                sarRatio = [expGolombDecoder.readUnsignedByte() << 8 | expGolombDecoder.readUnsignedByte(), expGolombDecoder.readUnsignedByte() << 8 | expGolombDecoder.readUnsignedByte()];\n                break;\n              }\n          }\n\n          if (sarRatio) {\n            sarRatio[0] / sarRatio[1];\n          }\n        }\n      }\n\n      return {\n        profileIdc: profileIdc,\n        levelIdc: levelIdc,\n        profileCompatibility: profileCompatibility,\n        width: (picWidthInMbsMinus1 + 1) * 16 - frameCropLeftOffset * 2 - frameCropRightOffset * 2,\n        height: (2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16 - frameCropTopOffset * 2 - frameCropBottomOffset * 2,\n        // sar is sample aspect ratio\n        sarRatio: sarRatio\n      };\n    };\n  };\n\n  _H264Stream.prototype = new stream();\n  var h264 = {\n    H264Stream: _H264Stream,\n    NalByteStream: _NalByteStream\n  };\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * Utilities to detect basic properties and metadata about Aac data.\n   */\n\n  var ADTS_SAMPLING_FREQUENCIES = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\n  var parseId3TagSize = function parseId3TagSize(header, byteIndex) {\n    var returnSize = header[byteIndex + 6] << 21 | header[byteIndex + 7] << 14 | header[byteIndex + 8] << 7 | header[byteIndex + 9],\n        flags = header[byteIndex + 5],\n        footerPresent = (flags & 16) >> 4; // if we get a negative returnSize clamp it to 0\n\n    returnSize = returnSize >= 0 ? returnSize : 0;\n\n    if (footerPresent) {\n      return returnSize + 20;\n    }\n\n    return returnSize + 10;\n  };\n\n  var getId3Offset = function getId3Offset(data, offset) {\n    if (data.length - offset < 10 || data[offset] !== 'I'.charCodeAt(0) || data[offset + 1] !== 'D'.charCodeAt(0) || data[offset + 2] !== '3'.charCodeAt(0)) {\n      return offset;\n    }\n\n    offset += parseId3TagSize(data, offset);\n    return getId3Offset(data, offset);\n  }; // TODO: use vhs-utils\n\n\n  var isLikelyAacData$1 = function isLikelyAacData(data) {\n    var offset = getId3Offset(data, 0);\n    return data.length >= offset + 2 && (data[offset] & 0xFF) === 0xFF && (data[offset + 1] & 0xF0) === 0xF0 && // verify that the 2 layer bits are 0, aka this\n    // is not mp3 data but aac data.\n    (data[offset + 1] & 0x16) === 0x10;\n  };\n\n  var parseSyncSafeInteger = function parseSyncSafeInteger(data) {\n    return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n  }; // return a percent-encoded representation of the specified byte range\n  // @see http://en.wikipedia.org/wiki/Percent-encoding\n\n\n  var percentEncode = function percentEncode(bytes, start, end) {\n    var i,\n        result = '';\n\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n\n    return result;\n  }; // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n\n\n  var parseIso88591 = function parseIso88591(bytes, start, end) {\n    return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n  };\n\n  var parseAdtsSize = function parseAdtsSize(header, byteIndex) {\n    var lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n        middle = header[byteIndex + 4] << 3,\n        highTwo = header[byteIndex + 3] & 0x3 << 11;\n    return highTwo | middle | lowThree;\n  };\n\n  var parseType = function parseType(header, byteIndex) {\n    if (header[byteIndex] === 'I'.charCodeAt(0) && header[byteIndex + 1] === 'D'.charCodeAt(0) && header[byteIndex + 2] === '3'.charCodeAt(0)) {\n      return 'timed-metadata';\n    } else if (header[byteIndex] & 0xff === 0xff && (header[byteIndex + 1] & 0xf0) === 0xf0) {\n      return 'audio';\n    }\n\n    return null;\n  };\n\n  var parseSampleRate = function parseSampleRate(packet) {\n    var i = 0;\n\n    while (i + 5 < packet.length) {\n      if (packet[i] !== 0xFF || (packet[i + 1] & 0xF6) !== 0xF0) {\n        // If a valid header was not found,  jump one forward and attempt to\n        // find a valid ADTS header starting at the next byte\n        i++;\n        continue;\n      }\n\n      return ADTS_SAMPLING_FREQUENCIES[(packet[i + 2] & 0x3c) >>> 2];\n    }\n\n    return null;\n  };\n\n  var parseAacTimestamp = function parseAacTimestamp(packet) {\n    var frameStart, frameSize, frame, frameHeader; // find the start of the first frame and the end of the tag\n\n    frameStart = 10;\n\n    if (packet[5] & 0x40) {\n      // advance the frame start past the extended header\n      frameStart += 4; // header size field\n\n      frameStart += parseSyncSafeInteger(packet.subarray(10, 14));\n    } // parse one or more ID3 frames\n    // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n    do {\n      // determine the number of bytes in this frame\n      frameSize = parseSyncSafeInteger(packet.subarray(frameStart + 4, frameStart + 8));\n\n      if (frameSize < 1) {\n        return null;\n      }\n\n      frameHeader = String.fromCharCode(packet[frameStart], packet[frameStart + 1], packet[frameStart + 2], packet[frameStart + 3]);\n\n      if (frameHeader === 'PRIV') {\n        frame = packet.subarray(frameStart + 10, frameStart + frameSize + 10);\n\n        for (var i = 0; i < frame.byteLength; i++) {\n          if (frame[i] === 0) {\n            var owner = parseIso88591(frame, 0, i);\n\n            if (owner === 'com.apple.streaming.transportStreamTimestamp') {\n              var d = frame.subarray(i + 1);\n              var size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n              size *= 4;\n              size += d[7] & 0x03;\n              return size;\n            }\n\n            break;\n          }\n        }\n      }\n\n      frameStart += 10; // advance past the frame header\n\n      frameStart += frameSize; // advance past the frame body\n    } while (frameStart < packet.byteLength);\n\n    return null;\n  };\n\n  var utils = {\n    isLikelyAacData: isLikelyAacData$1,\n    parseId3TagSize: parseId3TagSize,\n    parseAdtsSize: parseAdtsSize,\n    parseType: parseType,\n    parseSampleRate: parseSampleRate,\n    parseAacTimestamp: parseAacTimestamp\n  };\n\n  var _AacStream;\n  /**\n   * Splits an incoming stream of binary data into ADTS and ID3 Frames.\n   */\n\n\n  _AacStream = function AacStream() {\n    var everything = new Uint8Array(),\n        timeStamp = 0;\n\n    _AacStream.prototype.init.call(this);\n\n    this.setTimestamp = function (timestamp) {\n      timeStamp = timestamp;\n    };\n\n    this.push = function (bytes) {\n      var frameSize = 0,\n          byteIndex = 0,\n          bytesLeft,\n          chunk,\n          packet,\n          tempLength; // If there are bytes remaining from the last segment, prepend them to the\n      // bytes that were pushed in\n\n      if (everything.length) {\n        tempLength = everything.length;\n        everything = new Uint8Array(bytes.byteLength + tempLength);\n        everything.set(everything.subarray(0, tempLength));\n        everything.set(bytes, tempLength);\n      } else {\n        everything = bytes;\n      }\n\n      while (everything.length - byteIndex >= 3) {\n        if (everything[byteIndex] === 'I'.charCodeAt(0) && everything[byteIndex + 1] === 'D'.charCodeAt(0) && everything[byteIndex + 2] === '3'.charCodeAt(0)) {\n          // Exit early because we don't have enough to parse\n          // the ID3 tag header\n          if (everything.length - byteIndex < 10) {\n            break;\n          } // check framesize\n\n\n          frameSize = utils.parseId3TagSize(everything, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n          // Add to byteIndex to support multiple ID3 tags in sequence\n\n          if (byteIndex + frameSize > everything.length) {\n            break;\n          }\n\n          chunk = {\n            type: 'timed-metadata',\n            data: everything.subarray(byteIndex, byteIndex + frameSize)\n          };\n          this.trigger('data', chunk);\n          byteIndex += frameSize;\n          continue;\n        } else if ((everything[byteIndex] & 0xff) === 0xff && (everything[byteIndex + 1] & 0xf0) === 0xf0) {\n          // Exit early because we don't have enough to parse\n          // the ADTS frame header\n          if (everything.length - byteIndex < 7) {\n            break;\n          }\n\n          frameSize = utils.parseAdtsSize(everything, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n\n          if (byteIndex + frameSize > everything.length) {\n            break;\n          }\n\n          packet = {\n            type: 'audio',\n            data: everything.subarray(byteIndex, byteIndex + frameSize),\n            pts: timeStamp,\n            dts: timeStamp\n          };\n          this.trigger('data', packet);\n          byteIndex += frameSize;\n          continue;\n        }\n\n        byteIndex++;\n      }\n\n      bytesLeft = everything.length - byteIndex;\n\n      if (bytesLeft > 0) {\n        everything = everything.subarray(byteIndex);\n      } else {\n        everything = new Uint8Array();\n      }\n    };\n\n    this.reset = function () {\n      everything = new Uint8Array();\n      this.trigger('reset');\n    };\n\n    this.endTimeline = function () {\n      everything = new Uint8Array();\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _AacStream.prototype = new stream();\n  var aac = _AacStream;\n\n  // constants\n  var AUDIO_PROPERTIES = ['audioobjecttype', 'channelcount', 'samplerate', 'samplingfrequencyindex', 'samplesize'];\n  var audioProperties = AUDIO_PROPERTIES;\n\n  var VIDEO_PROPERTIES = ['width', 'height', 'profileIdc', 'levelIdc', 'profileCompatibility', 'sarRatio'];\n  var videoProperties = VIDEO_PROPERTIES;\n\n  var H264Stream = h264.H264Stream;\n  var isLikelyAacData = utils.isLikelyAacData;\n  var ONE_SECOND_IN_TS = clock.ONE_SECOND_IN_TS; // object types\n\n  var _VideoSegmentStream, _AudioSegmentStream, _Transmuxer, _CoalesceStream;\n\n  var retriggerForStream = function retriggerForStream(key, event) {\n    event.stream = key;\n    this.trigger('log', event);\n  };\n\n  var addPipelineLogRetriggers = function addPipelineLogRetriggers(transmuxer, pipeline) {\n    var keys = Object.keys(pipeline);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i]; // skip non-stream keys and headOfPipeline\n      // which is just a duplicate\n\n      if (key === 'headOfPipeline' || !pipeline[key].on) {\n        continue;\n      }\n\n      pipeline[key].on('log', retriggerForStream.bind(transmuxer, key));\n    }\n  };\n  /**\n   * Compare two arrays (even typed) for same-ness\n   */\n\n\n  var arrayEquals = function arrayEquals(a, b) {\n    var i;\n\n    if (a.length !== b.length) {\n      return false;\n    } // compare the value of each element in the array\n\n\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  var generateSegmentTimingInfo = function generateSegmentTimingInfo(baseMediaDecodeTime, startDts, startPts, endDts, endPts, prependedContentDuration) {\n    var ptsOffsetFromDts = startPts - startDts,\n        decodeDuration = endDts - startDts,\n        presentationDuration = endPts - startPts; // The PTS and DTS values are based on the actual stream times from the segment,\n    // however, the player time values will reflect a start from the baseMediaDecodeTime.\n    // In order to provide relevant values for the player times, base timing info on the\n    // baseMediaDecodeTime and the DTS and PTS durations of the segment.\n\n    return {\n      start: {\n        dts: baseMediaDecodeTime,\n        pts: baseMediaDecodeTime + ptsOffsetFromDts\n      },\n      end: {\n        dts: baseMediaDecodeTime + decodeDuration,\n        pts: baseMediaDecodeTime + presentationDuration\n      },\n      prependedContentDuration: prependedContentDuration,\n      baseMediaDecodeTime: baseMediaDecodeTime\n    };\n  };\n  /**\n   * Constructs a single-track, ISO BMFF media segment from AAC data\n   * events. The output of this stream can be fed to a SourceBuffer\n   * configured with a suitable initialization segment.\n   * @param track {object} track metadata configuration\n   * @param options {object} transmuxer options object\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n\n  _AudioSegmentStream = function AudioSegmentStream(track, options) {\n    var adtsFrames = [],\n        sequenceNumber,\n        earliestAllowedDts = 0,\n        audioAppendStartTs = 0,\n        videoBaseMediaDecodeTime = Infinity;\n    options = options || {};\n    sequenceNumber = options.firstSequenceNumber || 0;\n\n    _AudioSegmentStream.prototype.init.call(this);\n\n    this.push = function (data) {\n      trackDecodeInfo.collectDtsInfo(track, data);\n\n      if (track) {\n        audioProperties.forEach(function (prop) {\n          track[prop] = data[prop];\n        });\n      } // buffer audio data until end() is called\n\n\n      adtsFrames.push(data);\n    };\n\n    this.setEarliestDts = function (earliestDts) {\n      earliestAllowedDts = earliestDts;\n    };\n\n    this.setVideoBaseMediaDecodeTime = function (baseMediaDecodeTime) {\n      videoBaseMediaDecodeTime = baseMediaDecodeTime;\n    };\n\n    this.setAudioAppendStart = function (timestamp) {\n      audioAppendStartTs = timestamp;\n    };\n\n    this.flush = function () {\n      var frames, moof, mdat, boxes, frameDuration, segmentDuration, videoClockCyclesOfSilencePrefixed; // return early if no audio data has been observed\n\n      if (adtsFrames.length === 0) {\n        this.trigger('done', 'AudioSegmentStream');\n        return;\n      }\n\n      frames = audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames, track, earliestAllowedDts);\n      track.baseMediaDecodeTime = trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track, options.keepOriginalTimestamps); // amount of audio filled but the value is in video clock rather than audio clock\n\n      videoClockCyclesOfSilencePrefixed = audioFrameUtils.prefixWithSilence(track, frames, audioAppendStartTs, videoBaseMediaDecodeTime); // we have to build the index from byte locations to\n      // samples (that is, adts frames) in the audio data\n\n      track.samples = audioFrameUtils.generateSampleTable(frames); // concatenate the audio data to constuct the mdat\n\n      mdat = mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));\n      adtsFrames = [];\n      moof = mp4Generator.moof(sequenceNumber, [track]);\n      boxes = new Uint8Array(moof.byteLength + mdat.byteLength); // bump the sequence number for next time\n\n      sequenceNumber++;\n      boxes.set(moof);\n      boxes.set(mdat, moof.byteLength);\n      trackDecodeInfo.clearDtsInfo(track);\n      frameDuration = Math.ceil(ONE_SECOND_IN_TS * 1024 / track.samplerate); // TODO this check was added to maintain backwards compatibility (particularly with\n      // tests) on adding the timingInfo event. However, it seems unlikely that there's a\n      // valid use-case where an init segment/data should be triggered without associated\n      // frames. Leaving for now, but should be looked into.\n\n      if (frames.length) {\n        segmentDuration = frames.length * frameDuration;\n        this.trigger('segmentTimingInfo', generateSegmentTimingInfo( // The audio track's baseMediaDecodeTime is in audio clock cycles, but the\n        // frame info is in video clock cycles. Convert to match expectation of\n        // listeners (that all timestamps will be based on video clock cycles).\n        clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate), // frame times are already in video clock, as is segment duration\n        frames[0].dts, frames[0].pts, frames[0].dts + segmentDuration, frames[0].pts + segmentDuration, videoClockCyclesOfSilencePrefixed || 0));\n        this.trigger('timingInfo', {\n          start: frames[0].pts,\n          end: frames[0].pts + segmentDuration\n        });\n      }\n\n      this.trigger('data', {\n        track: track,\n        boxes: boxes\n      });\n      this.trigger('done', 'AudioSegmentStream');\n    };\n\n    this.reset = function () {\n      trackDecodeInfo.clearDtsInfo(track);\n      adtsFrames = [];\n      this.trigger('reset');\n    };\n  };\n\n  _AudioSegmentStream.prototype = new stream();\n  /**\n   * Constructs a single-track, ISO BMFF media segment from H264 data\n   * events. The output of this stream can be fed to a SourceBuffer\n   * configured with a suitable initialization segment.\n   * @param track {object} track metadata configuration\n   * @param options {object} transmuxer options object\n   * @param options.alignGopsAtEnd {boolean} If true, start from the end of the\n   *        gopsToAlignWith list when attempting to align gop pts\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n  _VideoSegmentStream = function VideoSegmentStream(track, options) {\n    var sequenceNumber,\n        nalUnits = [],\n        gopsToAlignWith = [],\n        config,\n        pps;\n    options = options || {};\n    sequenceNumber = options.firstSequenceNumber || 0;\n\n    _VideoSegmentStream.prototype.init.call(this);\n\n    delete track.minPTS;\n    this.gopCache_ = [];\n    /**\n      * Constructs a ISO BMFF segment given H264 nalUnits\n      * @param {Object} nalUnit A data event representing a nalUnit\n      * @param {String} nalUnit.nalUnitType\n      * @param {Object} nalUnit.config Properties for a mp4 track\n      * @param {Uint8Array} nalUnit.data The nalUnit bytes\n      * @see lib/codecs/h264.js\n     **/\n\n    this.push = function (nalUnit) {\n      trackDecodeInfo.collectDtsInfo(track, nalUnit); // record the track config\n\n      if (nalUnit.nalUnitType === 'seq_parameter_set_rbsp' && !config) {\n        config = nalUnit.config;\n        track.sps = [nalUnit.data];\n        videoProperties.forEach(function (prop) {\n          track[prop] = config[prop];\n        }, this);\n      }\n\n      if (nalUnit.nalUnitType === 'pic_parameter_set_rbsp' && !pps) {\n        pps = nalUnit.data;\n        track.pps = [nalUnit.data];\n      } // buffer video until flush() is called\n\n\n      nalUnits.push(nalUnit);\n    };\n    /**\n      * Pass constructed ISO BMFF track and boxes on to the\n      * next stream in the pipeline\n     **/\n\n\n    this.flush = function () {\n      var frames,\n          gopForFusion,\n          gops,\n          moof,\n          mdat,\n          boxes,\n          prependedContentDuration = 0,\n          firstGop,\n          lastGop; // Throw away nalUnits at the start of the byte stream until\n      // we find the first AUD\n\n      while (nalUnits.length) {\n        if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n          break;\n        }\n\n        nalUnits.shift();\n      } // Return early if no video data has been observed\n\n\n      if (nalUnits.length === 0) {\n        this.resetStream_();\n        this.trigger('done', 'VideoSegmentStream');\n        return;\n      } // Organize the raw nal-units into arrays that represent\n      // higher-level constructs such as frames and gops\n      // (group-of-pictures)\n\n\n      frames = frameUtils.groupNalsIntoFrames(nalUnits);\n      gops = frameUtils.groupFramesIntoGops(frames); // If the first frame of this fragment is not a keyframe we have\n      // a problem since MSE (on Chrome) requires a leading keyframe.\n      //\n      // We have two approaches to repairing this situation:\n      // 1) GOP-FUSION:\n      //    This is where we keep track of the GOPS (group-of-pictures)\n      //    from previous fragments and attempt to find one that we can\n      //    prepend to the current fragment in order to create a valid\n      //    fragment.\n      // 2) KEYFRAME-PULLING:\n      //    Here we search for the first keyframe in the fragment and\n      //    throw away all the frames between the start of the fragment\n      //    and that keyframe. We then extend the duration and pull the\n      //    PTS of the keyframe forward so that it covers the time range\n      //    of the frames that were disposed of.\n      //\n      // #1 is far prefereable over #2 which can cause \"stuttering\" but\n      // requires more things to be just right.\n\n      if (!gops[0][0].keyFrame) {\n        // Search for a gop for fusion from our gopCache\n        gopForFusion = this.getGopForFusion_(nalUnits[0], track);\n\n        if (gopForFusion) {\n          // in order to provide more accurate timing information about the segment, save\n          // the number of seconds prepended to the original segment due to GOP fusion\n          prependedContentDuration = gopForFusion.duration;\n          gops.unshift(gopForFusion); // Adjust Gops' metadata to account for the inclusion of the\n          // new gop at the beginning\n\n          gops.byteLength += gopForFusion.byteLength;\n          gops.nalCount += gopForFusion.nalCount;\n          gops.pts = gopForFusion.pts;\n          gops.dts = gopForFusion.dts;\n          gops.duration += gopForFusion.duration;\n        } else {\n          // If we didn't find a candidate gop fall back to keyframe-pulling\n          gops = frameUtils.extendFirstKeyFrame(gops);\n        }\n      } // Trim gops to align with gopsToAlignWith\n\n\n      if (gopsToAlignWith.length) {\n        var alignedGops;\n\n        if (options.alignGopsAtEnd) {\n          alignedGops = this.alignGopsAtEnd_(gops);\n        } else {\n          alignedGops = this.alignGopsAtStart_(gops);\n        }\n\n        if (!alignedGops) {\n          // save all the nals in the last GOP into the gop cache\n          this.gopCache_.unshift({\n            gop: gops.pop(),\n            pps: track.pps,\n            sps: track.sps\n          }); // Keep a maximum of 6 GOPs in the cache\n\n          this.gopCache_.length = Math.min(6, this.gopCache_.length); // Clear nalUnits\n\n          nalUnits = []; // return early no gops can be aligned with desired gopsToAlignWith\n\n          this.resetStream_();\n          this.trigger('done', 'VideoSegmentStream');\n          return;\n        } // Some gops were trimmed. clear dts info so minSegmentDts and pts are correct\n        // when recalculated before sending off to CoalesceStream\n\n\n        trackDecodeInfo.clearDtsInfo(track);\n        gops = alignedGops;\n      }\n\n      trackDecodeInfo.collectDtsInfo(track, gops); // First, we have to build the index from byte locations to\n      // samples (that is, frames) in the video data\n\n      track.samples = frameUtils.generateSampleTable(gops); // Concatenate the video data and construct the mdat\n\n      mdat = mp4Generator.mdat(frameUtils.concatenateNalData(gops));\n      track.baseMediaDecodeTime = trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track, options.keepOriginalTimestamps);\n      this.trigger('processedGopsInfo', gops.map(function (gop) {\n        return {\n          pts: gop.pts,\n          dts: gop.dts,\n          byteLength: gop.byteLength\n        };\n      }));\n      firstGop = gops[0];\n      lastGop = gops[gops.length - 1];\n      this.trigger('segmentTimingInfo', generateSegmentTimingInfo(track.baseMediaDecodeTime, firstGop.dts, firstGop.pts, lastGop.dts + lastGop.duration, lastGop.pts + lastGop.duration, prependedContentDuration));\n      this.trigger('timingInfo', {\n        start: gops[0].pts,\n        end: gops[gops.length - 1].pts + gops[gops.length - 1].duration\n      }); // save all the nals in the last GOP into the gop cache\n\n      this.gopCache_.unshift({\n        gop: gops.pop(),\n        pps: track.pps,\n        sps: track.sps\n      }); // Keep a maximum of 6 GOPs in the cache\n\n      this.gopCache_.length = Math.min(6, this.gopCache_.length); // Clear nalUnits\n\n      nalUnits = [];\n      this.trigger('baseMediaDecodeTime', track.baseMediaDecodeTime);\n      this.trigger('timelineStartInfo', track.timelineStartInfo);\n      moof = mp4Generator.moof(sequenceNumber, [track]); // it would be great to allocate this array up front instead of\n      // throwing away hundreds of media segment fragments\n\n      boxes = new Uint8Array(moof.byteLength + mdat.byteLength); // Bump the sequence number for next time\n\n      sequenceNumber++;\n      boxes.set(moof);\n      boxes.set(mdat, moof.byteLength);\n      this.trigger('data', {\n        track: track,\n        boxes: boxes\n      });\n      this.resetStream_(); // Continue with the flush process now\n\n      this.trigger('done', 'VideoSegmentStream');\n    };\n\n    this.reset = function () {\n      this.resetStream_();\n      nalUnits = [];\n      this.gopCache_.length = 0;\n      gopsToAlignWith.length = 0;\n      this.trigger('reset');\n    };\n\n    this.resetStream_ = function () {\n      trackDecodeInfo.clearDtsInfo(track); // reset config and pps because they may differ across segments\n      // for instance, when we are rendition switching\n\n      config = undefined;\n      pps = undefined;\n    }; // Search for a candidate Gop for gop-fusion from the gop cache and\n    // return it or return null if no good candidate was found\n\n\n    this.getGopForFusion_ = function (nalUnit) {\n      var halfSecond = 45000,\n          // Half-a-second in a 90khz clock\n      allowableOverlap = 10000,\n          // About 3 frames @ 30fps\n      nearestDistance = Infinity,\n          dtsDistance,\n          nearestGopObj,\n          currentGop,\n          currentGopObj,\n          i; // Search for the GOP nearest to the beginning of this nal unit\n\n      for (i = 0; i < this.gopCache_.length; i++) {\n        currentGopObj = this.gopCache_[i];\n        currentGop = currentGopObj.gop; // Reject Gops with different SPS or PPS\n\n        if (!(track.pps && arrayEquals(track.pps[0], currentGopObj.pps[0])) || !(track.sps && arrayEquals(track.sps[0], currentGopObj.sps[0]))) {\n          continue;\n        } // Reject Gops that would require a negative baseMediaDecodeTime\n\n\n        if (currentGop.dts < track.timelineStartInfo.dts) {\n          continue;\n        } // The distance between the end of the gop and the start of the nalUnit\n\n\n        dtsDistance = nalUnit.dts - currentGop.dts - currentGop.duration; // Only consider GOPS that start before the nal unit and end within\n        // a half-second of the nal unit\n\n        if (dtsDistance >= -allowableOverlap && dtsDistance <= halfSecond) {\n          // Always use the closest GOP we found if there is more than\n          // one candidate\n          if (!nearestGopObj || nearestDistance > dtsDistance) {\n            nearestGopObj = currentGopObj;\n            nearestDistance = dtsDistance;\n          }\n        }\n      }\n\n      if (nearestGopObj) {\n        return nearestGopObj.gop;\n      }\n\n      return null;\n    }; // trim gop list to the first gop found that has a matching pts with a gop in the list\n    // of gopsToAlignWith starting from the START of the list\n\n\n    this.alignGopsAtStart_ = function (gops) {\n      var alignIndex, gopIndex, align, gop, byteLength, nalCount, duration, alignedGops;\n      byteLength = gops.byteLength;\n      nalCount = gops.nalCount;\n      duration = gops.duration;\n      alignIndex = gopIndex = 0;\n\n      while (alignIndex < gopsToAlignWith.length && gopIndex < gops.length) {\n        align = gopsToAlignWith[alignIndex];\n        gop = gops[gopIndex];\n\n        if (align.pts === gop.pts) {\n          break;\n        }\n\n        if (gop.pts > align.pts) {\n          // this current gop starts after the current gop we want to align on, so increment\n          // align index\n          alignIndex++;\n          continue;\n        } // current gop starts before the current gop we want to align on. so increment gop\n        // index\n\n\n        gopIndex++;\n        byteLength -= gop.byteLength;\n        nalCount -= gop.nalCount;\n        duration -= gop.duration;\n      }\n\n      if (gopIndex === 0) {\n        // no gops to trim\n        return gops;\n      }\n\n      if (gopIndex === gops.length) {\n        // all gops trimmed, skip appending all gops\n        return null;\n      }\n\n      alignedGops = gops.slice(gopIndex);\n      alignedGops.byteLength = byteLength;\n      alignedGops.duration = duration;\n      alignedGops.nalCount = nalCount;\n      alignedGops.pts = alignedGops[0].pts;\n      alignedGops.dts = alignedGops[0].dts;\n      return alignedGops;\n    }; // trim gop list to the first gop found that has a matching pts with a gop in the list\n    // of gopsToAlignWith starting from the END of the list\n\n\n    this.alignGopsAtEnd_ = function (gops) {\n      var alignIndex, gopIndex, align, gop, alignEndIndex, matchFound;\n      alignIndex = gopsToAlignWith.length - 1;\n      gopIndex = gops.length - 1;\n      alignEndIndex = null;\n      matchFound = false;\n\n      while (alignIndex >= 0 && gopIndex >= 0) {\n        align = gopsToAlignWith[alignIndex];\n        gop = gops[gopIndex];\n\n        if (align.pts === gop.pts) {\n          matchFound = true;\n          break;\n        }\n\n        if (align.pts > gop.pts) {\n          alignIndex--;\n          continue;\n        }\n\n        if (alignIndex === gopsToAlignWith.length - 1) {\n          // gop.pts is greater than the last alignment candidate. If no match is found\n          // by the end of this loop, we still want to append gops that come after this\n          // point\n          alignEndIndex = gopIndex;\n        }\n\n        gopIndex--;\n      }\n\n      if (!matchFound && alignEndIndex === null) {\n        return null;\n      }\n\n      var trimIndex;\n\n      if (matchFound) {\n        trimIndex = gopIndex;\n      } else {\n        trimIndex = alignEndIndex;\n      }\n\n      if (trimIndex === 0) {\n        return gops;\n      }\n\n      var alignedGops = gops.slice(trimIndex);\n      var metadata = alignedGops.reduce(function (total, gop) {\n        total.byteLength += gop.byteLength;\n        total.duration += gop.duration;\n        total.nalCount += gop.nalCount;\n        return total;\n      }, {\n        byteLength: 0,\n        duration: 0,\n        nalCount: 0\n      });\n      alignedGops.byteLength = metadata.byteLength;\n      alignedGops.duration = metadata.duration;\n      alignedGops.nalCount = metadata.nalCount;\n      alignedGops.pts = alignedGops[0].pts;\n      alignedGops.dts = alignedGops[0].dts;\n      return alignedGops;\n    };\n\n    this.alignGopsWith = function (newGopsToAlignWith) {\n      gopsToAlignWith = newGopsToAlignWith;\n    };\n  };\n\n  _VideoSegmentStream.prototype = new stream();\n  /**\n   * A Stream that can combine multiple streams (ie. audio & video)\n   * into a single output segment for MSE. Also supports audio-only\n   * and video-only streams.\n   * @param options {object} transmuxer options object\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at media timeline start.\n   */\n\n  _CoalesceStream = function CoalesceStream(options, metadataStream) {\n    // Number of Tracks per output segment\n    // If greater than 1, we combine multiple\n    // tracks into a single segment\n    this.numberOfTracks = 0;\n    this.metadataStream = metadataStream;\n    options = options || {};\n\n    if (typeof options.remux !== 'undefined') {\n      this.remuxTracks = !!options.remux;\n    } else {\n      this.remuxTracks = true;\n    }\n\n    if (typeof options.keepOriginalTimestamps === 'boolean') {\n      this.keepOriginalTimestamps = options.keepOriginalTimestamps;\n    } else {\n      this.keepOriginalTimestamps = false;\n    }\n\n    this.pendingTracks = [];\n    this.videoTrack = null;\n    this.pendingBoxes = [];\n    this.pendingCaptions = [];\n    this.pendingMetadata = [];\n    this.pendingBytes = 0;\n    this.emittedTracks = 0;\n\n    _CoalesceStream.prototype.init.call(this); // Take output from multiple\n\n\n    this.push = function (output) {\n      // buffer incoming captions until the associated video segment\n      // finishes\n      if (output.text) {\n        return this.pendingCaptions.push(output);\n      } // buffer incoming id3 tags until the final flush\n\n\n      if (output.frames) {\n        return this.pendingMetadata.push(output);\n      } // Add this track to the list of pending tracks and store\n      // important information required for the construction of\n      // the final segment\n\n\n      this.pendingTracks.push(output.track);\n      this.pendingBytes += output.boxes.byteLength; // TODO: is there an issue for this against chrome?\n      // We unshift audio and push video because\n      // as of Chrome 75 when switching from\n      // one init segment to another if the video\n      // mdat does not appear after the audio mdat\n      // only audio will play for the duration of our transmux.\n\n      if (output.track.type === 'video') {\n        this.videoTrack = output.track;\n        this.pendingBoxes.push(output.boxes);\n      }\n\n      if (output.track.type === 'audio') {\n        this.audioTrack = output.track;\n        this.pendingBoxes.unshift(output.boxes);\n      }\n    };\n  };\n\n  _CoalesceStream.prototype = new stream();\n\n  _CoalesceStream.prototype.flush = function (flushSource) {\n    var offset = 0,\n        event = {\n      captions: [],\n      captionStreams: {},\n      metadata: [],\n      info: {}\n    },\n        caption,\n        id3,\n        initSegment,\n        timelineStartPts = 0,\n        i;\n\n    if (this.pendingTracks.length < this.numberOfTracks) {\n      if (flushSource !== 'VideoSegmentStream' && flushSource !== 'AudioSegmentStream') {\n        // Return because we haven't received a flush from a data-generating\n        // portion of the segment (meaning that we have only recieved meta-data\n        // or captions.)\n        return;\n      } else if (this.remuxTracks) {\n        // Return until we have enough tracks from the pipeline to remux (if we\n        // are remuxing audio and video into a single MP4)\n        return;\n      } else if (this.pendingTracks.length === 0) {\n        // In the case where we receive a flush without any data having been\n        // received we consider it an emitted track for the purposes of coalescing\n        // `done` events.\n        // We do this for the case where there is an audio and video track in the\n        // segment but no audio data. (seen in several playlists with alternate\n        // audio tracks and no audio present in the main TS segments.)\n        this.emittedTracks++;\n\n        if (this.emittedTracks >= this.numberOfTracks) {\n          this.trigger('done');\n          this.emittedTracks = 0;\n        }\n\n        return;\n      }\n    }\n\n    if (this.videoTrack) {\n      timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n      videoProperties.forEach(function (prop) {\n        event.info[prop] = this.videoTrack[prop];\n      }, this);\n    } else if (this.audioTrack) {\n      timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n      audioProperties.forEach(function (prop) {\n        event.info[prop] = this.audioTrack[prop];\n      }, this);\n    }\n\n    if (this.videoTrack || this.audioTrack) {\n      if (this.pendingTracks.length === 1) {\n        event.type = this.pendingTracks[0].type;\n      } else {\n        event.type = 'combined';\n      }\n\n      this.emittedTracks += this.pendingTracks.length;\n      initSegment = mp4Generator.initSegment(this.pendingTracks); // Create a new typed array to hold the init segment\n\n      event.initSegment = new Uint8Array(initSegment.byteLength); // Create an init segment containing a moov\n      // and track definitions\n\n      event.initSegment.set(initSegment); // Create a new typed array to hold the moof+mdats\n\n      event.data = new Uint8Array(this.pendingBytes); // Append each moof+mdat (one per track) together\n\n      for (i = 0; i < this.pendingBoxes.length; i++) {\n        event.data.set(this.pendingBoxes[i], offset);\n        offset += this.pendingBoxes[i].byteLength;\n      } // Translate caption PTS times into second offsets to match the\n      // video timeline for the segment, and add track info\n\n\n      for (i = 0; i < this.pendingCaptions.length; i++) {\n        caption = this.pendingCaptions[i];\n        caption.startTime = clock.metadataTsToSeconds(caption.startPts, timelineStartPts, this.keepOriginalTimestamps);\n        caption.endTime = clock.metadataTsToSeconds(caption.endPts, timelineStartPts, this.keepOriginalTimestamps);\n        event.captionStreams[caption.stream] = true;\n        event.captions.push(caption);\n      } // Translate ID3 frame PTS times into second offsets to match the\n      // video timeline for the segment\n\n\n      for (i = 0; i < this.pendingMetadata.length; i++) {\n        id3 = this.pendingMetadata[i];\n        id3.cueTime = clock.metadataTsToSeconds(id3.pts, timelineStartPts, this.keepOriginalTimestamps);\n        event.metadata.push(id3);\n      } // We add this to every single emitted segment even though we only need\n      // it for the first\n\n\n      event.metadata.dispatchType = this.metadataStream.dispatchType; // Reset stream state\n\n      this.pendingTracks.length = 0;\n      this.videoTrack = null;\n      this.pendingBoxes.length = 0;\n      this.pendingCaptions.length = 0;\n      this.pendingBytes = 0;\n      this.pendingMetadata.length = 0; // Emit the built segment\n      // We include captions and ID3 tags for backwards compatibility,\n      // ideally we should send only video and audio in the data event\n\n      this.trigger('data', event); // Emit each caption to the outside world\n      // Ideally, this would happen immediately on parsing captions,\n      // but we need to ensure that video data is sent back first\n      // so that caption timing can be adjusted to match video timing\n\n      for (i = 0; i < event.captions.length; i++) {\n        caption = event.captions[i];\n        this.trigger('caption', caption);\n      } // Emit each id3 tag to the outside world\n      // Ideally, this would happen immediately on parsing the tag,\n      // but we need to ensure that video data is sent back first\n      // so that ID3 frame timing can be adjusted to match video timing\n\n\n      for (i = 0; i < event.metadata.length; i++) {\n        id3 = event.metadata[i];\n        this.trigger('id3Frame', id3);\n      }\n    } // Only emit `done` if all tracks have been flushed and emitted\n\n\n    if (this.emittedTracks >= this.numberOfTracks) {\n      this.trigger('done');\n      this.emittedTracks = 0;\n    }\n  };\n\n  _CoalesceStream.prototype.setRemux = function (val) {\n    this.remuxTracks = val;\n  };\n  /**\n   * A Stream that expects MP2T binary data as input and produces\n   * corresponding media segments, suitable for use with Media Source\n   * Extension (MSE) implementations that support the ISO BMFF byte\n   * stream format, like Chrome.\n   */\n\n\n  _Transmuxer = function Transmuxer(options) {\n    var self = this,\n        hasFlushed = true,\n        videoTrack,\n        audioTrack;\n\n    _Transmuxer.prototype.init.call(this);\n\n    options = options || {};\n    this.baseMediaDecodeTime = options.baseMediaDecodeTime || 0;\n    this.transmuxPipeline_ = {};\n    if (options.duration) {\n      customDuration = options.duration * 90000;\n    }\n\n    this.setupAacPipeline = function () {\n      var pipeline = {};\n      this.transmuxPipeline_ = pipeline;\n      pipeline.type = 'aac';\n      pipeline.metadataStream = new m2ts_1.MetadataStream(); // set up the parsing pipeline\n\n      pipeline.aacStream = new aac();\n      pipeline.audioTimestampRolloverStream = new m2ts_1.TimestampRolloverStream('audio');\n      pipeline.timedMetadataTimestampRolloverStream = new m2ts_1.TimestampRolloverStream('timed-metadata');\n      pipeline.adtsStream = new adts();\n      pipeline.coalesceStream = new _CoalesceStream(options, pipeline.metadataStream);\n      pipeline.headOfPipeline = pipeline.aacStream;\n      pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);\n      pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);\n      pipeline.metadataStream.on('timestamp', function (frame) {\n        pipeline.aacStream.setTimestamp(frame.timeStamp);\n      });\n      pipeline.aacStream.on('data', function (data) {\n        if (data.type !== 'timed-metadata' && data.type !== 'audio' || pipeline.audioSegmentStream) {\n          return;\n        }\n\n        audioTrack = audioTrack || {\n          timelineStartInfo: {\n            baseMediaDecodeTime: self.baseMediaDecodeTime\n          },\n          codec: 'adts',\n          type: 'audio'\n        }; // hook up the audio segment stream to the first track with aac data\n\n        pipeline.coalesceStream.numberOfTracks++;\n        pipeline.audioSegmentStream = new _AudioSegmentStream(audioTrack, options);\n        pipeline.audioSegmentStream.on('log', self.getLogTrigger_('audioSegmentStream'));\n        pipeline.audioSegmentStream.on('timingInfo', self.trigger.bind(self, 'audioTimingInfo')); // Set up the final part of the audio pipeline\n\n        pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream); // emit pmt info\n\n        self.trigger('trackinfo', {\n          hasAudio: !!audioTrack,\n          hasVideo: !!videoTrack\n        });\n      }); // Re-emit any data coming from the coalesce stream to the outside world\n\n      pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data')); // Let the consumer know we have finished flushing the entire pipeline\n\n      pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n      addPipelineLogRetriggers(this, pipeline);\n    };\n\n    this.setupTsPipeline = function () {\n      var pipeline = {};\n      this.transmuxPipeline_ = pipeline;\n      pipeline.type = 'ts';\n      pipeline.metadataStream = new m2ts_1.MetadataStream(); // set up the parsing pipeline\n\n      pipeline.packetStream = new m2ts_1.TransportPacketStream();\n      pipeline.parseStream = new m2ts_1.TransportParseStream();\n      pipeline.elementaryStream = new m2ts_1.ElementaryStream();\n      pipeline.timestampRolloverStream = new m2ts_1.TimestampRolloverStream();\n      pipeline.adtsStream = new adts();\n      pipeline.h264Stream = new H264Stream();\n      pipeline.captionStream = new m2ts_1.CaptionStream(options);\n      pipeline.coalesceStream = new _CoalesceStream(options, pipeline.metadataStream);\n      pipeline.headOfPipeline = pipeline.packetStream; // disassemble MPEG2-TS packets into elementary streams\n\n      pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream).pipe(pipeline.timestampRolloverStream); // !!THIS ORDER IS IMPORTANT!!\n      // demux the streams\n\n      pipeline.timestampRolloverStream.pipe(pipeline.h264Stream);\n      pipeline.timestampRolloverStream.pipe(pipeline.adtsStream);\n      pipeline.timestampRolloverStream.pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream); // Hook up CEA-608/708 caption stream\n\n      pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);\n      pipeline.elementaryStream.on('data', function (data) {\n        var i;\n\n        if (data.type === 'metadata') {\n          i = data.tracks.length; // scan the tracks listed in the metadata\n\n          while (i--) {\n            if (!videoTrack && data.tracks[i].type === 'video') {\n              videoTrack = data.tracks[i];\n              videoTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n            } else if (!audioTrack && data.tracks[i].type === 'audio') {\n              audioTrack = data.tracks[i];\n              audioTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n            }\n          } // hook up the video segment stream to the first track with h264 data\n\n\n          if (videoTrack && !pipeline.videoSegmentStream) {\n            pipeline.coalesceStream.numberOfTracks++;\n            pipeline.videoSegmentStream = new _VideoSegmentStream(videoTrack, options);\n            pipeline.videoSegmentStream.on('log', self.getLogTrigger_('videoSegmentStream'));\n            pipeline.videoSegmentStream.on('timelineStartInfo', function (timelineStartInfo) {\n              // When video emits timelineStartInfo data after a flush, we forward that\n              // info to the AudioSegmentStream, if it exists, because video timeline\n              // data takes precedence.  Do not do this if keepOriginalTimestamps is set,\n              // because this is a particularly subtle form of timestamp alteration.\n              if (audioTrack && !options.keepOriginalTimestamps) {\n                audioTrack.timelineStartInfo = timelineStartInfo; // On the first segment we trim AAC frames that exist before the\n                // very earliest DTS we have seen in video because Chrome will\n                // interpret any video track with a baseMediaDecodeTime that is\n                // non-zero as a gap.\n\n                pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts - self.baseMediaDecodeTime);\n              }\n            });\n            pipeline.videoSegmentStream.on('processedGopsInfo', self.trigger.bind(self, 'gopInfo'));\n            pipeline.videoSegmentStream.on('segmentTimingInfo', self.trigger.bind(self, 'videoSegmentTimingInfo'));\n            pipeline.videoSegmentStream.on('baseMediaDecodeTime', function (baseMediaDecodeTime) {\n              if (audioTrack) {\n                pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);\n              }\n            });\n            pipeline.videoSegmentStream.on('timingInfo', self.trigger.bind(self, 'videoTimingInfo')); // Set up the final part of the video pipeline\n\n            pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream);\n          }\n\n          if (audioTrack && !pipeline.audioSegmentStream) {\n            // hook up the audio segment stream to the first track with aac data\n            pipeline.coalesceStream.numberOfTracks++;\n            pipeline.audioSegmentStream = new _AudioSegmentStream(audioTrack, options);\n            pipeline.audioSegmentStream.on('log', self.getLogTrigger_('audioSegmentStream'));\n            pipeline.audioSegmentStream.on('timingInfo', self.trigger.bind(self, 'audioTimingInfo'));\n            pipeline.audioSegmentStream.on('segmentTimingInfo', self.trigger.bind(self, 'audioSegmentTimingInfo')); // Set up the final part of the audio pipeline\n\n            pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);\n          } // emit pmt info\n\n\n          self.trigger('trackinfo', {\n            hasAudio: !!audioTrack,\n            hasVideo: !!videoTrack\n          });\n        }\n      }); // Re-emit any data coming from the coalesce stream to the outside world\n\n      pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n      pipeline.coalesceStream.on('id3Frame', function (id3Frame) {\n        id3Frame.dispatchType = pipeline.metadataStream.dispatchType;\n        self.trigger('id3Frame', id3Frame);\n      });\n      pipeline.coalesceStream.on('caption', this.trigger.bind(this, 'caption')); // Let the consumer know we have finished flushing the entire pipeline\n\n      pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n      addPipelineLogRetriggers(this, pipeline);\n    }; // hook up the segment streams once track metadata is delivered\n\n\n    this.setBaseMediaDecodeTime = function (baseMediaDecodeTime) {\n      var pipeline = this.transmuxPipeline_;\n\n      if (!options.keepOriginalTimestamps) {\n        this.baseMediaDecodeTime = baseMediaDecodeTime;\n      }\n\n      if (audioTrack) {\n        audioTrack.timelineStartInfo.dts = undefined;\n        audioTrack.timelineStartInfo.pts = undefined;\n        trackDecodeInfo.clearDtsInfo(audioTrack);\n\n        if (pipeline.audioTimestampRolloverStream) {\n          pipeline.audioTimestampRolloverStream.discontinuity();\n        }\n      }\n\n      if (videoTrack) {\n        if (pipeline.videoSegmentStream) {\n          pipeline.videoSegmentStream.gopCache_ = [];\n        }\n\n        videoTrack.timelineStartInfo.dts = undefined;\n        videoTrack.timelineStartInfo.pts = undefined;\n        trackDecodeInfo.clearDtsInfo(videoTrack);\n        pipeline.captionStream.reset();\n      }\n\n      if (pipeline.timestampRolloverStream) {\n        pipeline.timestampRolloverStream.discontinuity();\n      }\n    };\n\n    this.setAudioAppendStart = function (timestamp) {\n      if (audioTrack) {\n        this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);\n      }\n    };\n\n    this.setRemux = function (val) {\n      var pipeline = this.transmuxPipeline_;\n      options.remux = val;\n\n      if (pipeline && pipeline.coalesceStream) {\n        pipeline.coalesceStream.setRemux(val);\n      }\n    };\n\n    this.alignGopsWith = function (gopsToAlignWith) {\n      if (videoTrack && this.transmuxPipeline_.videoSegmentStream) {\n        this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith);\n      }\n    };\n\n    this.getLogTrigger_ = function (key) {\n      var self = this;\n      return function (event) {\n        event.stream = key;\n        self.trigger('log', event);\n      };\n    }; // feed incoming data to the front of the parsing pipeline\n\n\n    this.push = function (data) {\n      if (hasFlushed) {\n        var isAac = isLikelyAacData(data);\n\n        if (isAac && this.transmuxPipeline_.type !== 'aac') {\n          this.setupAacPipeline();\n        } else if (!isAac && this.transmuxPipeline_.type !== 'ts') {\n          this.setupTsPipeline();\n        }\n\n        hasFlushed = false;\n      }\n\n      this.transmuxPipeline_.headOfPipeline.push(data);\n    }; // flush any buffered data\n\n\n    this.flush = function () {\n      hasFlushed = true; // Start at the top of the pipeline and flush all pending work\n\n      this.transmuxPipeline_.headOfPipeline.flush();\n    };\n\n    this.endTimeline = function () {\n      this.transmuxPipeline_.headOfPipeline.endTimeline();\n    };\n\n    this.reset = function () {\n      if (this.transmuxPipeline_.headOfPipeline) {\n        this.transmuxPipeline_.headOfPipeline.reset();\n      }\n    }; // Caption data has to be reset when seeking outside buffered range\n\n\n    this.resetCaptions = function () {\n      if (this.transmuxPipeline_.captionStream) {\n        this.transmuxPipeline_.captionStream.reset();\n      }\n    };\n  };\n\n  _Transmuxer.prototype = new stream();\n  var transmuxer = {\n    Transmuxer: _Transmuxer,\n    VideoSegmentStream: _VideoSegmentStream,\n    AudioSegmentStream: _AudioSegmentStream,\n    AUDIO_PROPERTIES: audioProperties,\n    VIDEO_PROPERTIES: videoProperties,\n    // exported for testing\n    generateSegmentTimingInfo: generateSegmentTimingInfo\n  };\n\n  var discardEmulationPreventionBytes = captionPacketParser.discardEmulationPreventionBytes;\n  var CaptionStream = captionStream.CaptionStream;\n  /**\n    * Maps an offset in the mdat to a sample based on the the size of the samples.\n    * Assumes that `parseSamples` has been called first.\n    *\n    * @param {Number} offset - The offset into the mdat\n    * @param {Object[]} samples - An array of samples, parsed using `parseSamples`\n    * @return {?Object} The matching sample, or null if no match was found.\n    *\n    * @see ISO-BMFF-12/2015, Section 8.8.8\n   **/\n\n  var mapToSample = function mapToSample(offset, samples) {\n    var approximateOffset = offset;\n\n    for (var i = 0; i < samples.length; i++) {\n      var sample = samples[i];\n\n      if (approximateOffset < sample.size) {\n        return sample;\n      }\n\n      approximateOffset -= sample.size;\n    }\n\n    return null;\n  };\n  /**\n    * Finds SEI nal units contained in a Media Data Box.\n    * Assumes that `parseSamples` has been called first.\n    *\n    * @param {Uint8Array} avcStream - The bytes of the mdat\n    * @param {Object[]} samples - The samples parsed out by `parseSamples`\n    * @param {Number} trackId - The trackId of this video track\n    * @return {Object[]} seiNals - the parsed SEI NALUs found.\n    *   The contents of the seiNal should match what is expected by\n    *   CaptionStream.push (nalUnitType, size, data, escapedRBSP, pts, dts)\n    *\n    * @see ISO-BMFF-12/2015, Section 8.1.1\n    * @see Rec. ITU-T H.264, 7.3.2.3.1\n   **/\n\n\n  var findSeiNals = function findSeiNals(avcStream, samples, trackId) {\n    var avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n        result = {\n      logs: [],\n      seiNals: []\n    },\n        seiNal,\n        i,\n        length,\n        lastMatchedSample;\n\n    for (i = 0; i + 4 < avcStream.length; i += length) {\n      length = avcView.getUint32(i);\n      i += 4; // Bail if this doesn't appear to be an H264 stream\n\n      if (length <= 0) {\n        continue;\n      }\n\n      switch (avcStream[i] & 0x1F) {\n        case 0x06:\n          var data = avcStream.subarray(i + 1, i + 1 + length);\n          var matchingSample = mapToSample(i, samples);\n          seiNal = {\n            nalUnitType: 'sei_rbsp',\n            size: length,\n            data: data,\n            escapedRBSP: discardEmulationPreventionBytes(data),\n            trackId: trackId\n          };\n\n          if (matchingSample) {\n            seiNal.pts = matchingSample.pts;\n            seiNal.dts = matchingSample.dts;\n            lastMatchedSample = matchingSample;\n          } else if (lastMatchedSample) {\n            // If a matching sample cannot be found, use the last\n            // sample's values as they should be as close as possible\n            seiNal.pts = lastMatchedSample.pts;\n            seiNal.dts = lastMatchedSample.dts;\n          } else {\n            result.logs.push({\n              level: 'warn',\n              message: 'We\\'ve encountered a nal unit without data at ' + i + ' for trackId ' + trackId + '. See mux.js#223.'\n            });\n            break;\n          }\n\n          result.seiNals.push(seiNal);\n          break;\n      }\n    }\n\n    return result;\n  };\n  /**\n    * Parses sample information out of Track Run Boxes and calculates\n    * the absolute presentation and decode timestamps of each sample.\n    *\n    * @param {Array<Uint8Array>} truns - The Trun Run boxes to be parsed\n    * @param {Number|BigInt} baseMediaDecodeTime - base media decode time from tfdt\n        @see ISO-BMFF-12/2015, Section 8.8.12\n    * @param {Object} tfhd - The parsed Track Fragment Header\n    *   @see inspect.parseTfhd\n    * @return {Object[]} the parsed samples\n    *\n    * @see ISO-BMFF-12/2015, Section 8.8.8\n   **/\n\n\n  var parseSamples = function parseSamples(truns, baseMediaDecodeTime, tfhd) {\n    var currentDts = baseMediaDecodeTime;\n    var defaultSampleDuration = tfhd.defaultSampleDuration || 0;\n    var defaultSampleSize = tfhd.defaultSampleSize || 0;\n    var trackId = tfhd.trackId;\n    var allSamples = [];\n    truns.forEach(function (trun) {\n      // Note: We currently do not parse the sample table as well\n      // as the trun. It's possible some sources will require this.\n      // moov > trak > mdia > minf > stbl\n      var trackRun = parseTrun(trun);\n      var samples = trackRun.samples;\n      samples.forEach(function (sample) {\n        if (sample.duration === undefined) {\n          sample.duration = defaultSampleDuration;\n        }\n\n        if (sample.size === undefined) {\n          sample.size = defaultSampleSize;\n        }\n\n        sample.trackId = trackId;\n        sample.dts = currentDts;\n\n        if (sample.compositionTimeOffset === undefined) {\n          sample.compositionTimeOffset = 0;\n        }\n\n        if (typeof currentDts === 'bigint') {\n          sample.pts = currentDts + window__default['default'].BigInt(sample.compositionTimeOffset);\n          currentDts += window__default['default'].BigInt(sample.duration);\n        } else {\n          sample.pts = currentDts + sample.compositionTimeOffset;\n          currentDts += sample.duration;\n        }\n      });\n      allSamples = allSamples.concat(samples);\n    });\n    return allSamples;\n  };\n  /**\n    * Parses out caption nals from an FMP4 segment's video tracks.\n    *\n    * @param {Uint8Array} segment - The bytes of a single segment\n    * @param {Number} videoTrackId - The trackId of a video track in the segment\n    * @return {Object.<Number, Object[]>} A mapping of video trackId to\n    *   a list of seiNals found in that track\n   **/\n\n\n  var parseCaptionNals = function parseCaptionNals(segment, videoTrackId) {\n    // To get the samples\n    var trafs = findBox_1(segment, ['moof', 'traf']); // To get SEI NAL units\n\n    var mdats = findBox_1(segment, ['mdat']);\n    var captionNals = {};\n    var mdatTrafPairs = []; // Pair up each traf with a mdat as moofs and mdats are in pairs\n\n    mdats.forEach(function (mdat, index) {\n      var matchingTraf = trafs[index];\n      mdatTrafPairs.push({\n        mdat: mdat,\n        traf: matchingTraf\n      });\n    });\n    mdatTrafPairs.forEach(function (pair) {\n      var mdat = pair.mdat;\n      var traf = pair.traf;\n      var tfhd = findBox_1(traf, ['tfhd']); // Exactly 1 tfhd per traf\n\n      var headerInfo = parseTfhd(tfhd[0]);\n      var trackId = headerInfo.trackId;\n      var tfdt = findBox_1(traf, ['tfdt']); // Either 0 or 1 tfdt per traf\n\n      var baseMediaDecodeTime = tfdt.length > 0 ? parseTfdt(tfdt[0]).baseMediaDecodeTime : 0;\n      var truns = findBox_1(traf, ['trun']);\n      var samples;\n      var result; // Only parse video data for the chosen video track\n\n      if (videoTrackId === trackId && truns.length > 0) {\n        samples = parseSamples(truns, baseMediaDecodeTime, headerInfo);\n        result = findSeiNals(mdat, samples, trackId);\n\n        if (!captionNals[trackId]) {\n          captionNals[trackId] = {\n            seiNals: [],\n            logs: []\n          };\n        }\n\n        captionNals[trackId].seiNals = captionNals[trackId].seiNals.concat(result.seiNals);\n        captionNals[trackId].logs = captionNals[trackId].logs.concat(result.logs);\n      }\n    });\n    return captionNals;\n  };\n  /**\n    * Parses out inband captions from an MP4 container and returns\n    * caption objects that can be used by WebVTT and the TextTrack API.\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/VTTCue\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack\n    * Assumes that `probe.getVideoTrackIds` and `probe.timescale` have been called first\n    *\n    * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n    * @param {Number} trackId - The id of the video track to parse\n    * @param {Number} timescale - The timescale for the video track from the init segment\n    *\n    * @return {?Object[]} parsedCaptions - A list of captions or null if no video tracks\n    * @return {Number} parsedCaptions[].startTime - The time to show the caption in seconds\n    * @return {Number} parsedCaptions[].endTime - The time to stop showing the caption in seconds\n    * @return {String} parsedCaptions[].text - The visible content of the caption\n   **/\n\n\n  var parseEmbeddedCaptions = function parseEmbeddedCaptions(segment, trackId, timescale) {\n    var captionNals; // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n\n    if (trackId === null) {\n      return null;\n    }\n\n    captionNals = parseCaptionNals(segment, trackId);\n    var trackNals = captionNals[trackId] || {};\n    return {\n      seiNals: trackNals.seiNals,\n      logs: trackNals.logs,\n      timescale: timescale\n    };\n  };\n  /**\n    * Converts SEI NALUs into captions that can be used by video.js\n   **/\n\n\n  var CaptionParser = function CaptionParser() {\n    var isInitialized = false;\n    var captionStream; // Stores segments seen before trackId and timescale are set\n\n    var segmentCache; // Stores video track ID of the track being parsed\n\n    var trackId; // Stores the timescale of the track being parsed\n\n    var timescale; // Stores captions parsed so far\n\n    var parsedCaptions; // Stores whether we are receiving partial data or not\n\n    var parsingPartial;\n    /**\n      * A method to indicate whether a CaptionParser has been initalized\n      * @returns {Boolean}\n     **/\n\n    this.isInitialized = function () {\n      return isInitialized;\n    };\n    /**\n      * Initializes the underlying CaptionStream, SEI NAL parsing\n      * and management, and caption collection\n     **/\n\n\n    this.init = function (options) {\n      captionStream = new CaptionStream();\n      isInitialized = true;\n      parsingPartial = options ? options.isPartial : false; // Collect dispatched captions\n\n      captionStream.on('data', function (event) {\n        // Convert to seconds in the source's timescale\n        event.startTime = event.startPts / timescale;\n        event.endTime = event.endPts / timescale;\n        parsedCaptions.captions.push(event);\n        parsedCaptions.captionStreams[event.stream] = true;\n      });\n      captionStream.on('log', function (log) {\n        parsedCaptions.logs.push(log);\n      });\n    };\n    /**\n      * Determines if a new video track will be selected\n      * or if the timescale changed\n      * @return {Boolean}\n     **/\n\n\n    this.isNewInit = function (videoTrackIds, timescales) {\n      if (videoTrackIds && videoTrackIds.length === 0 || timescales && typeof timescales === 'object' && Object.keys(timescales).length === 0) {\n        return false;\n      }\n\n      return trackId !== videoTrackIds[0] || timescale !== timescales[trackId];\n    };\n    /**\n      * Parses out SEI captions and interacts with underlying\n      * CaptionStream to return dispatched captions\n      *\n      * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n      * @param {Number[]} videoTrackIds - A list of video tracks found in the init segment\n      * @param {Object.<Number, Number>} timescales - The timescales found in the init segment\n      * @see parseEmbeddedCaptions\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.parse = function (segment, videoTrackIds, timescales) {\n      var parsedData;\n\n      if (!this.isInitialized()) {\n        return null; // This is not likely to be a video segment\n      } else if (!videoTrackIds || !timescales) {\n        return null;\n      } else if (this.isNewInit(videoTrackIds, timescales)) {\n        // Use the first video track only as there is no\n        // mechanism to switch to other video tracks\n        trackId = videoTrackIds[0];\n        timescale = timescales[trackId]; // If an init segment has not been seen yet, hold onto segment\n        // data until we have one.\n        // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n      } else if (trackId === null || !timescale) {\n        segmentCache.push(segment);\n        return null;\n      } // Now that a timescale and trackId is set, parse cached segments\n\n\n      while (segmentCache.length > 0) {\n        var cachedSegment = segmentCache.shift();\n        this.parse(cachedSegment, videoTrackIds, timescales);\n      }\n\n      parsedData = parseEmbeddedCaptions(segment, trackId, timescale);\n\n      if (parsedData && parsedData.logs) {\n        parsedCaptions.logs = parsedCaptions.logs.concat(parsedData.logs);\n      }\n\n      if (parsedData === null || !parsedData.seiNals) {\n        if (parsedCaptions.logs.length) {\n          return {\n            logs: parsedCaptions.logs,\n            captions: [],\n            captionStreams: []\n          };\n        }\n\n        return null;\n      }\n\n      this.pushNals(parsedData.seiNals); // Force the parsed captions to be dispatched\n\n      this.flushStream();\n      return parsedCaptions;\n    };\n    /**\n      * Pushes SEI NALUs onto CaptionStream\n      * @param {Object[]} nals - A list of SEI nals parsed using `parseCaptionNals`\n      * Assumes that `parseCaptionNals` has been called first\n      * @see m2ts/caption-stream.js\n      **/\n\n\n    this.pushNals = function (nals) {\n      if (!this.isInitialized() || !nals || nals.length === 0) {\n        return null;\n      }\n\n      nals.forEach(function (nal) {\n        captionStream.push(nal);\n      });\n    };\n    /**\n      * Flushes underlying CaptionStream to dispatch processed, displayable captions\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.flushStream = function () {\n      if (!this.isInitialized()) {\n        return null;\n      }\n\n      if (!parsingPartial) {\n        captionStream.flush();\n      } else {\n        captionStream.partialFlush();\n      }\n    };\n    /**\n      * Reset caption buckets for new data\n     **/\n\n\n    this.clearParsedCaptions = function () {\n      parsedCaptions.captions = [];\n      parsedCaptions.captionStreams = {};\n      parsedCaptions.logs = [];\n    };\n    /**\n      * Resets underlying CaptionStream\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.resetCaptionStream = function () {\n      if (!this.isInitialized()) {\n        return null;\n      }\n\n      captionStream.reset();\n    };\n    /**\n      * Convenience method to clear all captions flushed from the\n      * CaptionStream and still being parsed\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.clearAllCaptions = function () {\n      this.clearParsedCaptions();\n      this.resetCaptionStream();\n    };\n    /**\n      * Reset caption parser\n     **/\n\n\n    this.reset = function () {\n      segmentCache = [];\n      trackId = null;\n      timescale = null;\n\n      if (!parsedCaptions) {\n        parsedCaptions = {\n          captions: [],\n          // CC1, CC2, CC3, CC4\n          captionStreams: {},\n          logs: []\n        };\n      } else {\n        this.clearParsedCaptions();\n      }\n\n      this.resetCaptionStream();\n    };\n\n    this.reset();\n  };\n\n  var captionParser = CaptionParser;\n\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var mp4 = {\n    generator: mp4Generator,\n    probe: probe,\n    Transmuxer: transmuxer.Transmuxer,\n    AudioSegmentStream: transmuxer.AudioSegmentStream,\n    VideoSegmentStream: transmuxer.VideoSegmentStream,\n    CaptionParser: captionParser\n  };\n\n  return mp4;\n\n})));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/Fee-notes/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfee_notes\"] = self[\"webpackChunkfee_notes\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(3085); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["regexpList","name","title","children","label","value","form","ref","input","result","text","inputClass","regexp","computed","reg","eval","error","console","log","Object","prototype","toString","call","regexpExec","obj","global","res","exec","index","html","length","handleInputText","e","target","style","height","scrollHeight","handleChoose","val","handleClear","class","_createElementBlock","_hoisted_1","_createVNode","_component_Nav","_component_router_view","Component","_createBlock","_KeepAlive","_resolveDynamicComponent","navConfig","icon","path","activeNav","route","useRoute","queryActive","query","a","watch","newVal","router","useRouter","handleClick","opts","url","window","open","push","__exports__","components","Nav","mounted","clipboard","ClipboardJS","on","ElNotification","message","type","clearSelection","render","webList","link","description","stripNumber","num","precision","parseFloat","toPrecision","download","Blob","URL","createObjectURL","event","aLink","document","createElement","href","MouseEvent","createEvent","initMouseEvent","dispatchEvent","loadJs","src","Promise","resolve","scripts","querySelectorAll","getAttribute","script","body","appendChild","onload","onerror","initialData","direction","shape","color","width","leftWidth","rightWidth","topHeight","bottomHeight","reactive","JSON","parse","stringify","disabledWidth","includes","disabledSideWidth","disabledHeight","disabledSideHeight","triangleStyle","borderWidth","borderColor","Math","sqrt","toFixed","triangleCode","handleChangeDirection","indexOf","handleChangeShape","handleChangeWidth","handleChangeSideWidth","handleChangeHeight","handleChangeSideHeight","handleResetData","key","hasOwnProperty","colorR","colorG","colorB","opacity","angle","distance","spread","size","psForm","transToCSS","_angle","offsetY","round","sin","offsetX","cos","blurRadius","cssForm","inset","shadowStyle","boxShadow","textShadow","shadowCode","isChanged","QRCode","QR8bitByte","data","this","mode","QRMode","MODE_8BIT_BYTE","parsedData","i","l","byteArray","code","charCodeAt","Array","concat","apply","unshift","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","getLength","buffer","write","put","addData","newData","isDark","row","col","Error","getModuleCount","make","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","y","x","dark","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","getLengthInBits","totalDataCount","dataCount","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","get","totalCodeCount","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","multiply","QRMath","gexp","qrCode","sameCount","count","darkCount","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","shift","undefined","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","Drawing","_onMakeImage","_elImage","_elCanvas","toDataURL","display","_safeSetDataURI","fSuccess","fFail","self","_fFail","_fSuccess","_bSupportDataURI","el","fOnError","fOnSuccess","onabort","_getRealMaterial","material","random","htOption","_bIsPainted","_htOption","_el","_oContext","getContext","scale","alt","draw","oQRCode","nCount","nWidth","codeWidth","nHeight","codeHeight","bgWidth","bgHeight","top","left","materials","drawModules","_isSatisfyUnit","rowRange","colRange","isSatisfy","_updateDrawModules","clear","fillStyle","colorLight","border","drawImage","fillRect","nLeft","nTop","eye","row2col3","row3col2","row4","col4","row2col2","row3","col3","corner","row2","col2","single","colorDark","makeImage","isPainted","clearRect","nNumber","getImgSrc","_getTypeNumber","sText","nCorrectLevel","nType","_getUTF8Length","len","nLimit","replacedText","encodeURI","replace","vOption","callback","correctLevel","getElementById","_callback","_oQRCode","_oDrawing","loadMaterial","makeCode","getOwnPropertyNames","materialsLength","materialsLoaded","setTimeout","prop","Image","setAttribute","bind","childSrc","getImgUrl","CorrectLevel","barcodeFormatOptions","qrcode","margin","quality","errorCorrectionLevel","barcode","format","displayValue","fontOptions","textAlign","textPosition","textMargin","fontSize","background","lineColor","artcode","theme","success","loading","createQrcode","light","err","createBarcode","JsBarcode","valid","createArtcode","parseInt","electronEye","electronRow4","electronCol3","electronRow2Col3","electronRow3Col2","electronCol3_2","electronRow2Col2","electronCorner","electronRow2","electronRow2_2","electronCol2","electronSingle","electronSingle_2","electronBorder","cookieEye","cookieRow4","cookieRow2Col2","cookieCorner","cookieRow3","cookieCol2","cookieSingle","cookieBorder","pinkEye","pinkRow4","pinkRow2Col3","pinkRow3Col2","pinkRow2Col2","pinkCorner","pinkRow3","pinkCol2","pinkSingle","pinkBorder","innerHTML","ArtQrcode","handleDownloadBarcode","handleDownloadArtcode","querySelector","handleUpdate","handleReset","codeParserOptions","beautify","options","parser","printWidth","tabWidth","semi","singleQuote","jsxSingleQuote","bracketSpacing","bracketSameLine","jsxBracketSameLine","arrowParens","htmlWhitespaceSensitivity","vueIndentScriptAndStyle","singleAttributePerLine","beautifyCode","handleStart","async","prettier","plugins","prettierPlugins","then","catch","CV","qrcodeDetector","uploadEle","handleUpload","file","raw","img","crossOrigin","canvas","ctx","clearFiles","inputImage","imread","IMREAD_GRAYSCALE","points_vec","MatVector","detectAndDecode","fetchModelsData","response","fetch","method","arrayBuffer","Uint8Array","createDataFile","FS_createDataFile","onMounted","cv","wechat_qrcode_WeChatQRCode","timeForm","now","dayjs","locale","colorForm","handleInputTime","isValid","valueOf","unix","handleInputColor","chroma","hex","rgb","rgba","hsl","setInterval","loaded","onActivated","ElLoading","service","lock","close","util","newUtil","inliner","newInliner","fontFaces","newFontFaces","images","newImages","defaultOptions","imagePlaceholder","cacheBust","domtoimage","toSvg","toPng","toJpeg","toBlob","toPixelData","impl","node","copyOptions","cloneNode","filter","embedFonts","inlineImages","applyOptions","clone","makeSvgDataUri","bgcolor","backgroundColor","keys","forEach","property","getImageData","canvasToBlob","domNode","delay","image","newCanvas","root","makeNodeCopy","cloneChildren","processClone","HTMLCanvasElement","original","childNodes","cloneChildrenInOrder","asArray","parent","done","child","childClone","Element","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","source","copyProperties","setProperty","getPropertyValue","getPropertyPriority","cssText","getComputedStyle","clonePseudoElement","element","content","className","uid","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","map","formatProperty","join","HTMLTextAreaElement","HTMLInputElement","SVGElement","SVGRectElement","attribute","resolveAll","styleNode","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","foreignObject","svg","escape","parseExtension","mimeType","dataAsUrl","isDataUrl","resolveUrl","getAndEncode","mimes","WOFF","JPEG","match","extension","toLowerCase","search","binaryString","atob","split","binaryArray","baseUrl","doc","implementation","createHTMLDocument","base","head","fourRandomChars","pow","slice","uri","reject","TIMEOUT","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","send","readyState","status","encoder","FileReader","onloadend","readAsDataURL","fail","string","ms","arg","arrayLike","array","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","styleProperty","URL_REGEX","shouldProcess","readUrls","inline","dataUrl","urlAsRegex","RegExp","nothingToInline","urls","readAll","webFonts","all","webFont","cssStrings","styleSheets","getCssRules","selectWebFontRules","rules","newWebFont","cssRules","rule","CSSRule","FONT_FACE_RULE","sheet","webFontRule","parentStyleSheet","newImage","inlineBackground","HTMLImageElement","inlined","deletes","upload","uploadCenter","drag","handleDragEnd","handleDelete","downloadFile","fileName","downloadElement","click","removeChild","revokeObjectURL","handleDownload","loadingInstance","fullscreen","removePadding","outputBytes","byteLength","paddingBytes","DataView","getUint8","AESDecryptor","constructor","rcon","subMix","Uint32Array","invSubMix","sBox","invSBox","initTable","uint8ArrayToUint32Array_","view","newArray","getUint32","subMix0","subMix1","subMix2","subMix3","invSubMix0","invSubMix1","invSubMix2","invSubMix3","xi","sx","x2","x4","x8","t","expandKey","keyBuffer","sameKey","keySize","ksRow","invKsRow","prev","ksRows","keySchedule","invKeySchedule","sbox","networkToHostOrderSwap","word","decrypt","inputArrayBuffer","aesIV","removePKCS7Padding","t0","t1","t2","t3","s0","s1","s2","s3","inputWords0","inputWords1","inputWords2","inputWords3","nRounds","invSBOX","initVector","initVector0","initVector1","initVector2","initVector3","inputInt32","Int32Array","outputInt32","swapWord","destroy","model","downloadLoading","downloadIndex","startSegment","endSegment","targetSegment","tsUrlList","finishList","mediaFileList","finishNum","errorNum","durationSecond","aesConf","iv","decryptor","stringToBuffer","str","TextEncoder","encode","percentage","ajax","xhr","applyURL","targetURL","baseURL","location","domain","pop","aesDecrypt","conversionMp4","transmuxer","muxjs","keepOriginalTimestamps","duration","segment","initSegment","set","flush","fileDataList","fileBlob","remove","downloadTS","afterData","searchParams","timestamp","min","getM3U8","m3u8Str","item","infoIndex","toUpperCase","toLocaleLowerCase","routes","component","Home","meta","Plugins","Triangle","Shadow","Qrcode","Beautify","ParseQrcode","keepAlive","Regexp","Transfer","Movie","Stitch","M3u8","createRouter","history","createWebHashHistory","beforeEach","to","hljs","registerLanguage","javascript","typescript","json","css","less","scss","xml","markdown","app","createApp","App","use","ElementPlus","hljsVuePlugin","Icon","props","createVNode","Icons","mount","factory","module","exports","require","_interopDefaultLegacy","box","dinf","esds","ftyp","mdat","mfhd","minf","moof","moov","mvex","mvhd","trak","tkhd","mdia","mdhd","hdlr","sdtp","stbl","stsd","traf","trex","trun$1","types","MAJOR_BRAND","MINOR_VERSION","AVC1_BRAND","VIDEO_HDLR","AUDIO_HDLR","HDLR_TYPES","VMHD","SMHD","DREF","STCO","STSC","STSZ","STTS","window__default","MAX_UINT32$1","getUint64$3","uint8","dv","byteOffset","getBigUint64","Number","MAX_SAFE_INTEGER","numbers","getUint64","MAX_UINT32","customDuration","avc1","avcC","btrt","dref","mp4a","pasp","smhd","stco","stsc","stsz","stts","styp","tfdt","tfhd","trun","vmhd","video","audio","payload","arguments","setUint32","track","audioobjecttype","samplingfrequencyindex","channelcount","samplerate","sequenceNumber","tracks","trackFragments","boxes","bytes","flags","samples","dependsOn","isDependedOn","hasRedundancy","videoSample","audioSample","avc1Box","sps","pps","sequenceParameterSets","pictureParameterSets","profileIdc","profileCompatibility","levelIdc","sarRatio","hSpacing","vSpacing","samplesize","id","trackFragmentHeader","trackFragmentDecodeTime","trackFragmentRun","sampleDependencyTable","dataOffset","upperWordBaseMediaDecodeTime","lowerWordBaseMediaDecodeTime","baseMediaDecodeTime","audioTrun","videoTrun","trunHeader","durationPresent","sizePresent","flagsPresent","compositionTimeOffset","bytesOffest","header","sample","isLeading","paddingValue","isNonSyncSample","degradationPriority","timescale","startTime","compositionStartTime","getVideoTrackIds","getTracks","getTimescaleFromMediaHeader","getEmsgID3","mp4Generator","fileType","movie","toUnsigned$3","toHexString$1","bin","toUnsigned","toHexString","parseType$1","String","fromCharCode","parseType_1","toUnsigned$2","findBox","end","subresults","results","subarray","findBox_1","uint8ToCString$1","curChar","retString","uint8ToCString","getUint64$2","parseEmsgBox","boxData","scheme_id_uri","presentation_time","presentation_time_delta","event_duration","message_data","version","emsgBox","isValidEmsgBox","scaleTime","presentationTime","timeDelta","emsg","hasScheme","isValidV0Box","isDefined","isValidV1Box","trackId","baseDataOffsetPresent","sampleDescriptionIndexPresent","defaultSampleDurationPresent","defaultSampleSizePresent","defaultSampleFlagsPresent","durationIsEmpty","defaultBaseIsMoof","baseDataOffset","sampleDescriptionIndex","defaultSampleDuration","defaultSampleSize","defaultSampleFlags","baseDataOffsetIsMoof","parseTfhd","parseSampleFlags","parseSampleFlags_1","dataOffsetPresent","firstSampleFlagsPresent","sampleDurationPresent","sampleSizePresent","sampleFlagsPresent","sampleCompositionTimeOffsetPresent","sampleCount","getInt32","parseTrun","toUnsigned$1","getUint64$1","parseTfdt","typedArrayIndexOf$1","typedArray","fromIndex","currentIndex","typedArrayIndexOf","textEncodingDescriptionByte","Iso88591","Utf16","Utf16be","Utf8","percentEncode$1","start","parseUtf8","decodeURIComponent","parseIso88591$1","unescape","parseSyncSafeInteger$1","frameParsers","frame","mimeTypeEndIndex","descriptionEndIndex","LINK_MIME_TYPE","pictureType","pictureData","values","owner","privateData","parseId3Frames$1","frameSize","frameHeader","frameStart","tagSize","frames","hasExtendedHeader","parseId3","parseId3Frames","parseSyncSafeInteger","init","traks","reduce","fragment","trafs","lowestTime","acc","baseTime","seconds","BigInt","isNaN","Infinity","isFinite","timescales","trafBoxes","parsedTfhd","parsedTfdt","parsedTrun","videoTrackIds","hdlrs","tkhds","handlerType","tkhdVersion","sampleDescriptions","codec","codecConfig","codecConfigType","codecBox","segmentData","emsgBoxes","parsedBox","parsedId3Frames","cueTime","probe","parseType","Stream","listeners","listener","off","splice","trigger","callbacks","args","dispose","pipe","destination","flushSource","partialFlush","endTimeline","reset","silence","secondsToVideoTs","secondsToAudioTs","videoTsToSeconds","audioTsToSeconds","audioTsToVideoTs","videoTsToAudioTs","metadataTsToSeconds","stream","groupNalsIntoFrames","nalUnits","currentNal","currentFrame","nalCount","nalUnitType","dts","pts","keyFrame","groupFramesIntoGops","currentGop","gops","extendFirstKeyFrame","createDefaultSample","sampleForFrame","generateSampleTable$1","h","concatenateNalData","nalsByteLength","numberOfNals","totalByteLength","generateSampleTableForFrame","concatenateNalDataForFrame","frameUtils","generateSampleTable","highPrefix","lowPrefix","zeroFill","makeTable","metaTable","arr","part","silence_1","coneOfSilence","ONE_SECOND_IN_TS$3","sampleRate","timelineStartPts","clock","ONE_SECOND_IN_TS","sumFrameByteLengths","currentObj","sum","prefixWithSilence","audioAppendStartTs","videoBaseMediaDecodeTime","baseMediaDecodeTimeTs","silentFrame","firstFrame","frameDuration","audioGapDuration","audioFillFrameCount","audioFillDuration","ceil","trimAdtsFramesByEarliestDts","adtsFrames","earliestAllowedDts","minSegmentDts","minSegmentPts","concatenateFrameData","audioFrameUtils","ONE_SECOND_IN_TS$2","collectDtsInfo","timelineStartInfo","maxSegmentPts","maxSegmentDts","clearDtsInfo","calculateTrackBaseMediaDecodeTime","trackDecodeInfo","USER_DATA_REGISTERED_ITU_T_T35","RBSP_TRAILING_BITS","parseSei","payloadType","payloadSize","userIdentifier","parseUserData","sei","parseCaptionPackets","userData","ccData","discardEmulationPreventionBytes$1","newLength","emulationPreventionBytesPositions","sourceIndex","captionPacketParser","discardEmulationPreventionBytes","CaptionStream$1","CaptionStream","parse708captions_","parse708captions","captionPackets_","ccStreams_","Cea608Stream","cc708Stream_","Cea708Stream","captionServices","cc","newCaptionPackets","escapedRBSP","latestDts_","ignoreNextEqualDts_","numSameDts_","flushCCStreams","flushType","flushStream","elem","idx","presortIndex","sort","b","packet","dispatchCea608Packet","dispatchCea708Packet","activeCea608Channel_","ccStream","setsTextOrXDSActive","setsChannel1Active","setsChannel2Active","CHARACTER_TRANSLATION_708","get708CharFromCode","newCode","within708TextBlock","Cea708Window","windowNum","clearText","pendingNewLine","winAttr","penAttr","penLoc","penColor","visible","rowLock","columnLock","priority","relativePositioning","anchorVertical","anchorHorizontal","anchorPoint","rowCount","virtualRowCount","columnCount","windowStyle","penStyle","getText","rows","rowIdx","newLine","beforeRowOverflow","isEmpty","addText","backspace","substr","Cea708Service","serviceNum","encoding","currentWindow","windows","createTextDecoder","startPts","win","setCurrentWindow","TextDecoder","level","textDecoder_","serviceProps","captionServiceEncodings","serviceName","serviceEncodings","current708Packet","services","new708Packet","add708Bytes","push708Packet","ptsVals","byte0","byte1","packet708","packetData","blockSize","seq","sizeCode","pushServiceBlock","initService","handleText","multiByteCharacter","extendedCommands","defineWindow","clearWindows","deleteWindows","displayWindows","hideWindows","toggleWindows","setWindowAttributes","setPenAttributes","setPenColor","setPenLocation","isExtended","getPts","flushDisplayed","char","charCodeArray","isMultiByte","extended","currentByte","nextByte","decode","firstByte","secondByte","fillOpacity","fillRed","fillGreen","fillBlue","borderType","borderRed","borderGreen","borderBlue","wordWrap","printDirection","scrollDirection","justify","effectSpeed","effectDirection","displayEffect","displayedText","winId","endPts","pushCaption","textTag","penSize","italics","underline","edgeType","fontStyle","fgOpacity","fgRed","fgGreen","fgBlue","bgOpacity","bgRed","bgGreen","bgBlue","edgeRed","edgeGreen","edgeBlue","column","CHARACTER_TRANSLATION","getCharFromCode","BOTTOM_ROW","ROWS","createDisplayBuffer","field","dataChannel","field_","dataChannel_","name_","setConstants","swap","char0","char1","lastControlCode_","PADDING_","RESUME_CAPTION_LOADING_","mode_","END_OF_CAPTION_","clearFormatting","displayed_","nonDisplayed_","startPts_","ROLL_UP_2_ROWS_","rollUpRows_","setRollUp","ROLL_UP_3_ROWS_","ROLL_UP_4_ROWS_","CARRIAGE_RETURN_","shiftRowsUp_","BACKSPACE_","row_","ERASE_DISPLAYED_MEMORY_","ERASE_NON_DISPLAYED_MEMORY_","RESUME_DIRECT_CAPTIONING_","isSpecialCharacter","column_","isExtCharacter","isMidRowCode","addFormatting","isOffsetControlCode","isPAC","formatting_","isColorPAC","isNormalChar","trim","topRow_","BASE_","EXT_","CONTROL_","OFFSET_","newBaseRow","reverse","popOn","baseRow","rollUp","paintOn","captionStream","streamTypes","H264_STREAM_TYPE","ADTS_STREAM_TYPE","METADATA_STREAM_TYPE","MAX_TS","RO_THRESH","TYPE_SHARED","handleRollover","reference","TimestampRolloverStream$1","TimestampRolloverStream","lastDTS","referenceDTS","type_","discontinuity","_MetadataStream","timestampRolloverStream","settings","descriptor","bufferSize","dispatchType","chunk","tag","dataAlignmentIndicator","timeStamp","_TransportPacketStream","_TransportParseStream","_ElementaryStream","metadataStream","MP2T_PACKET_LENGTH","SYNC_BYTE","bytesInBuffer","everything","startIndex","endIndex","parsePsi","parsePat","parsePmt","packetsWaitingForPmt","programMapTable","psi","payloadUnitStartIndicator","pat","section_number","last_section_number","pmtPid","pmt","sectionLength","tableEnd","programInfoLength","streamType","pid","processPes_","STREAM_TYPES","h264","adts","segmentHadPmt","timedMetadata","parsePes","pes","ptsDtsFlags","startPrefix","packetLength","forceFlush","packetFlushable","flushStreams_","m2ts","PAT_PID","TransportPacketStream","TransportParseStream","ElementaryStream","MetadataStream","_AdtsStream","m2ts_1","ONE_SECOND_IN_TS$1","ADTS_SAMPLING_FREQUENCIES$1","handlePartialSegments","frameNum","skipWarn_","frameLength","protectionSkipBytes","oldBuffer","adtsFrameDuration","skip","ExpGolomb","workingData","workingBytesAvailable","workingWord","workingBitsAvailable","bitsAvailable","loadWord","position","workingBytes","availableBytes","skipBits","skipBytes","readBits","valu","skipLeadingZeros","leadingZeroCount","skipUnsignedExpGolomb","skipExpGolomb","readUnsignedExpGolomb","clz","readExpGolomb","readBoolean","readUnsignedByte","_H264Stream","_NalByteStream","PROFILES_WITH_OPTIONAL_SPS_DATA","expGolomb","syncPoint","swapBuffer","currentPts","currentDts","readSequenceParameterSet","skipScalingList","nalByteStream","nalUnitTypeCode","config","expGolombDecoder","deltaScale","lastScale","nextScale","chromaFormatIdc","picOrderCntType","numRefFramesInPicOrderCntCycle","picWidthInMbsMinus1","picHeightInMapUnitsMinus1","frameMbsOnlyFlag","scalingListCount","aspectRatioIdc","frameCropLeftOffset","frameCropRightOffset","frameCropTopOffset","frameCropBottomOffset","_AacStream","H264Stream","NalByteStream","ADTS_SAMPLING_FREQUENCIES","parseId3TagSize","returnSize","footerPresent","getId3Offset","isLikelyAacData$1","percentEncode","parseIso88591","parseAdtsSize","lowThree","middle","highTwo","parseSampleRate","parseAacTimestamp","utils","isLikelyAacData","setTimestamp","bytesLeft","tempLength","_VideoSegmentStream","_AudioSegmentStream","_Transmuxer","_CoalesceStream","aac","AUDIO_PROPERTIES","audioProperties","VIDEO_PROPERTIES","videoProperties","retriggerForStream","addPipelineLogRetriggers","pipeline","arrayEquals","generateSegmentTimingInfo","startDts","endDts","prependedContentDuration","ptsOffsetFromDts","decodeDuration","presentationDuration","firstSequenceNumber","setEarliestDts","earliestDts","setVideoBaseMediaDecodeTime","setAudioAppendStart","segmentDuration","videoClockCyclesOfSilencePrefixed","gopsToAlignWith","minPTS","gopCache_","nalUnit","gopForFusion","firstGop","lastGop","resetStream_","getGopForFusion_","alignedGops","alignGopsAtEnd","alignGopsAtEnd_","alignGopsAtStart_","gop","dtsDistance","nearestGopObj","currentGopObj","halfSecond","allowableOverlap","nearestDistance","alignIndex","gopIndex","align","alignEndIndex","matchFound","trimIndex","metadata","total","alignGopsWith","newGopsToAlignWith","numberOfTracks","remux","remuxTracks","pendingTracks","videoTrack","pendingBoxes","pendingCaptions","pendingMetadata","pendingBytes","emittedTracks","output","audioTrack","caption","id3","captions","captionStreams","info","endTime","setRemux","hasFlushed","transmuxPipeline_","setupAacPipeline","aacStream","audioTimestampRolloverStream","timedMetadataTimestampRolloverStream","adtsStream","coalesceStream","headOfPipeline","audioSegmentStream","getLogTrigger_","hasAudio","hasVideo","setupTsPipeline","packetStream","parseStream","elementaryStream","h264Stream","videoSegmentStream","id3Frame","setBaseMediaDecodeTime","isAac","resetCaptions","Transmuxer","VideoSegmentStream","AudioSegmentStream","mapToSample","approximateOffset","findSeiNals","avcStream","seiNal","lastMatchedSample","avcView","logs","seiNals","matchingSample","parseSamples","truns","allSamples","trackRun","parseCaptionNals","videoTrackId","mdats","captionNals","mdatTrafPairs","matchingTraf","pair","headerInfo","parseEmbeddedCaptions","trackNals","CaptionParser","segmentCache","parsedCaptions","parsingPartial","isInitialized","isPartial","isNewInit","cachedSegment","pushNals","nals","nal","clearParsedCaptions","resetCaptionStream","clearAllCaptions","captionParser","mp4","generator","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","deferred","O","chunkIds","fn","notFulfilled","fulfilled","every","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}